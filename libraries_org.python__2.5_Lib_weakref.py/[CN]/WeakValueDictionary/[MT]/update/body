def update(self, dict=None, **kwargs):
    d = self.data
    if (dict is not None):
        if (not hasattr(dict, 'items')):
            dict = type({})(dict)
        for (key, o) in dict.items():
            d[key] = KeyedRef(o, self._remove, key)
    if len(kwargs):
        self.update(kwargs)
