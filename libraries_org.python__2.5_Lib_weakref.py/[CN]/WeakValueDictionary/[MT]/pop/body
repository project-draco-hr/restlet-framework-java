def pop(self, key, *args):
    try:
        o = self.data.pop(key)()
    except KeyError:
        if args:
            return args[0]
        raise
    if (o is None):
        raise KeyError, key
    else:
        return o
