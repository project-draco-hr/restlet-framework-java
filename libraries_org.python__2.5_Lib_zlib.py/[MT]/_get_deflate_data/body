def _get_deflate_data(deflater):
    buf = jarray.zeros(1024, 'b')
    s = StringIO()
    while (not deflater.finished()):
        l = deflater.deflate(buf)
        if (l == 0):
            break
        s.write(String(buf, 0, 0, l))
    s.seek(0)
    return s.read()
