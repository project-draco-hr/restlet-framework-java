def compress(string, level=6):
    if ((level < Z_BEST_SPEED) or (level > Z_BEST_COMPRESSION)):
        raise error, 'Bad compression level'
    deflater = Deflater(level, 0)
    string = _to_input(string)
    deflater.setInput(string, 0, len(string))
    deflater.finish()
    return _get_deflate_data(deflater)
