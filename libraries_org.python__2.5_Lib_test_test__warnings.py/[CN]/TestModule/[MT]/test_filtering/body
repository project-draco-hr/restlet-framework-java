def test_filtering(self):
    warnings.filterwarnings('error', '', Warning, '', 0)
    self.assertRaises(UserWarning, warnings.warn, 'convert to error')
    warnings.resetwarnings()
    text = 'handle normally'
    warnings.warn(text)
    self.assertEqual(msg.message, text)
    self.assertEqual(msg.category, 'UserWarning')
    warnings.filterwarnings('ignore', '', Warning, '', 0)
    text = 'filtered out'
    warnings.warn(text)
    self.assertNotEqual(msg.message, text)
    warnings.resetwarnings()
    warnings.filterwarnings('error', 'hex*', Warning, '', 0)
    self.assertRaises(UserWarning, warnings.warn, 'hex/oct')
    text = 'nonmatching text'
    warnings.warn(text)
    self.assertEqual(msg.message, text)
    self.assertEqual(msg.category, 'UserWarning')
