{
  ConnegService connegService=null;
  MetadataService metadataService=null;
  Application app=Application.getCurrent();
  if (app == null) {
    connegService=new ConnegService();
    metadataService=new MetadataService();
  }
 else {
    connegService=app.getConnegService();
    metadataService=app.getMetadataService();
  }
  Request request=new Request();
  request.setClientInfo(this);
  return connegService.getPreferredVariant(variants,request,metadataService);
}
