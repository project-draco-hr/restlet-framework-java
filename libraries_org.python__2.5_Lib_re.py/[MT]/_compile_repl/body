def _compile_repl(*key):
    p = _cache_repl.get(key)
    if (p is not None):
        return p
    (repl, pattern) = key
    try:
        p = sre_parse.parse_template(repl, pattern)
    except error as v:
        raise error, v
    if (len(_cache_repl) >= _MAXCACHE):
        _cache_repl.clear()
    _cache_repl[key] = p
    return p
