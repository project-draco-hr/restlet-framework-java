def __init__(self, lexicon, flags=0):
    from sre_constants import BRANCH, SUBPATTERN
    self.lexicon = lexicon
    p = []
    s = sre_parse.Pattern()
    s.flags = flags
    for (phrase, action) in lexicon:
        p.append(sre_parse.SubPattern(s, [(SUBPATTERN, ((len(p) + 1), sre_parse.parse(phrase, flags)))]))
    s.groups = (len(p) + 1)
    p = sre_parse.SubPattern(s, [(BRANCH, (None, p))])
    self.scanner = sre_compile.compile(p)
