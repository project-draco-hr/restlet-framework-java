def task2(ident):
    global running
    for i in range(numtrips):
        if (ident == 0):
            delay = 0.001
        else:
            whmutex.acquire()
            delay = (whrandom.random() * numtasks)
            whmutex.release()
        if verbose:
            print 'task', ident, 'will run for', round(delay, 1), 'sec'
        time.sleep(delay)
        if verbose:
            print 'task', ident, 'entering barrier', i
        bar.enter()
        if verbose:
            print 'task', ident, 'leaving barrier', i
    mutex.acquire()
    running = (running - 1)
    if (running == 0):
        done.release()
    mutex.release()
