def task(ident):
    global running
    whmutex.acquire()
    delay = (whrandom.random() * numtasks)
    whmutex.release()
    if verbose:
        print 'task', ident, 'will run for', round(delay, 1), 'sec'
    time.sleep(delay)
    if verbose:
        print 'task', ident, 'done'
    mutex.acquire()
    running = (running - 1)
    if (running == 0):
        done.release()
    mutex.release()
