def do_create(self, dir=None, pre='', suf='', bin=1):
    if (dir is None):
        dir = tempfile.gettempdir()
    try:
        file = self.mkstemped(dir, pre, suf, bin)
    except:
        self.failOnException('_mkstemp_inner')
    self.nameCheck(file.name, dir, pre, suf)
    return file
