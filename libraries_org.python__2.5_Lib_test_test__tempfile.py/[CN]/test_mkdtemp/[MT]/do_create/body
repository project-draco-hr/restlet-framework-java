def do_create(self, dir=None, pre='', suf=''):
    if (dir is None):
        dir = tempfile.gettempdir()
    try:
        name = tempfile.mkdtemp(dir=dir, prefix=pre, suffix=suf)
    except:
        self.failOnException('mkdtemp')
    try:
        self.nameCheck(name, dir, pre, suf)
        return name
    except:
        os.rmdir(name)
        raise
