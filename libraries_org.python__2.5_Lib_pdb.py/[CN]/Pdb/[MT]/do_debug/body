def do_debug(self, arg):
    sys.settrace(None)
    globals = self.curframe.f_globals
    locals = self.curframe.f_locals
    p = Pdb(self.completekey, self.stdin, self.stdout)
    p.prompt = ('(%s) ' % self.prompt.strip())
    print  >> self.stdout, 'ENTERING RECURSIVE DEBUGGER'
    sys.call_tracing(p.run, (arg, globals, locals))
    print  >> self.stdout, 'LEAVING RECURSIVE DEBUGGER'
    sys.settrace(self.trace_dispatch)
    self.lastcmd = p.lastcmd
