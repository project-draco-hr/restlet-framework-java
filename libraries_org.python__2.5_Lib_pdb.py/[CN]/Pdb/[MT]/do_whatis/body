def do_whatis(self, arg):
    try:
        value = eval(arg, self.curframe.f_globals, self.curframe.f_locals)
    except:
        (t, v) = sys.exc_info()[:2]
        if (type(t) == type('')):
            exc_type_name = t
        else:
            exc_type_name = t.__name__
        print  >> self.stdout, '***', (exc_type_name + ':'), repr(v)
        return
    code = None
    try:
        code = value.func_code
    except:
        pass
    if code:
        print  >> self.stdout, 'Function', code.co_name
        return
    try:
        code = value.im_func.func_code
    except:
        pass
    if code:
        print  >> self.stdout, 'Method', code.co_name
        return
    print  >> self.stdout, type(value)
