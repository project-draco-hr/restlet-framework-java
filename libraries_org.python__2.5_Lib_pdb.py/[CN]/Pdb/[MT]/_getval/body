def _getval(self, arg):
    try:
        return eval(arg, self.curframe.f_globals, self.curframe.f_locals)
    except:
        (t, v) = sys.exc_info()[:2]
        if isinstance(t, str):
            exc_type_name = t
        else:
            exc_type_name = t.__name__
        print  >> self.stdout, '***', (exc_type_name + ':'), repr(v)
        raise
