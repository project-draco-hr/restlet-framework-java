def test_readline(self):
    readline(self.fp, 'CR\n')
    assert (self.fp.newlines == None), repr(self.fp.newlines)
    readline(self.fp, 'LF\n')
    assert (self.fp.newlines == ('\r', '\n')), repr(self.fp.newlines)
    readline(self.fp, 'CRLF\n')
    assert (self.fp.newlines == ('\r', '\n')), repr(self.fp.newlines)
    readline(self.fp, 'EOF')
    assert (self.fp.newlines == ('\r', '\n', '\r\n')), repr(self.fp.newlines)
    self.fp.seek(0)
    readline(self.fp, 'CR\n', 3)
    readline(self.fp, 'LF\n', 3)
    readline(self.fp, 'CRLF\n', 5)
    readline(self.fp, 'EOF', 3)
