def getdelimited(self, beginchar, endchars, allowcomments=True):
    "Parse a header fragment delimited by special characters.\n\n        `beginchar' is the start character for the fragment.\n        If self is not looking at an instance of `beginchar' then\n        getdelimited returns the empty string.\n\n        `endchars' is a sequence of allowable end-delimiting characters.\n        Parsing stops when one of these is encountered.\n\n        If `allowcomments' is non-zero, embedded RFC 2822 comments are allowed\n        within the parsed fragment.\n        "
    if (self.field[self.pos] != beginchar):
        return ''
    slist = ['']
    quote = False
    self.pos += 1
    while (self.pos < len(self.field)):
        if quote:
            slist.append(self.field[self.pos])
            quote = False
        elif (self.field[self.pos] in endchars):
            self.pos += 1
            break
        elif (allowcomments and (self.field[self.pos] == '(')):
            slist.append(self.getcomment())
        elif (self.field[self.pos] == '\\'):
            quote = True
        else:
            slist.append(self.field[self.pos])
        self.pos += 1
    return EMPTYSTRING.join(slist)
