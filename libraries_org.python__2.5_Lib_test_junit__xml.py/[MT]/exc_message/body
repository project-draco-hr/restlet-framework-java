def exc_message(exc_info):
    'Safely return a short message passed through safe_str describing\n    exc_info, being careful of unicode values.\n    '
    exc = exc_info[1]
    if (exc is None):
        return safe_str(exc_info[0])
    if (isinstance(exc, BaseException) and isinstance(exc.message, unicode)):
        return safe_str(exc.message)
    try:
        return safe_str(str(exc))
    except UnicodeEncodeError:
        try:
            val = unicode(exc)
            return safe_str(val)
        except UnicodeDecodeError:
            return '?'
