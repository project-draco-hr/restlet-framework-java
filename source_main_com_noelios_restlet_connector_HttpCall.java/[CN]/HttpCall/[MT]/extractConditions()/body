{
  Conditions result=new ConditionsImpl();
  long ifModifiedSince=getRequestDateHeader(HEADER_IF_MODIFIED_SINCE);
  if (ifModifiedSince != -1) {
    result.setModifiedSince(new Date(ifModifiedSince));
  }
  long ifUnmodifiedSince=getRequestDateHeader(HEADER_IF_UNMODIFIED_SINCE);
  if (ifUnmodifiedSince != -1) {
    result.setUnmodifiedSince(new Date(ifUnmodifiedSince));
  }
  List<Tag> match=null;
  String matchHeader=getRequestHeader(HEADER_IF_MATCH);
  if (matchHeader != null) {
    String[] tags=matchHeader.split(",");
    for (int i=0; i < tags.length; i++) {
      if (match == null) {
        match=new ArrayList<Tag>();
        result.setMatch(match);
      }
      match.add(new TagImpl(tags[i]));
    }
  }
  List<Tag> noneMatch=null;
  String noneMatchHeader=getRequestHeader(HEADER_IF_NONE_MATCH);
  if (noneMatchHeader != null) {
    String[] tags=noneMatchHeader.split(",");
    for (int i=0; i < tags.length; i++) {
      if (noneMatch == null) {
        noneMatch=new ArrayList<Tag>();
        result.setNoneMatch(noneMatch);
      }
      noneMatch.add(new TagImpl(tags[i]));
    }
  }
  return result;
}
