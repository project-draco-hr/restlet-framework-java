def __init__(self, family=AF_INET, type=SOCK_STREAM, proto=0, _sock=None):
    if (_sock is None):
        _sock = _realsocket(family, type, proto)
        _sock.reference_count += 1
    elif isinstance(_sock, _nonblocking_api_mixin):
        _sock.reference_count += 1
    self._sock = _sock
    for method in _delegate_methods:
        meth = getattr(_sock, method, None)
        if meth:
            setattr(self, method, meth)
    _active_sockets.add(self)
