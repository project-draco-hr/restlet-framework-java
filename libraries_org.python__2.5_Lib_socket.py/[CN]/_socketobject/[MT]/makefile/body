def makefile(self, mode='r', bufsize=(-1)):
    'makefile([mode[, bufsize]]) -> file object\n\n        Return a regular file object corresponding to the socket.  The mode\n        and bufsize arguments are as for the built-in open() function.'
    _sock = self._sock
    if (not isinstance(_sock, _nonblocking_api_mixin)):
        return _fileobject(_sock, mode, bufsize)
    _sock.close_lock.acquire()
    try:
        fileobject = _fileobject(_sock, mode, bufsize)
    finally:
        _sock.close_lock.release()
    return fileobject
