def write(self, data):
    data = str(data)
    if (not data):
        return
    self._wbuf.append(data)
    if ((self._wbufsize == 0) or ((self._wbufsize == 1) and ('\n' in data)) or (self._get_wbuf_len() >= self._wbufsize)):
        self.flush()
