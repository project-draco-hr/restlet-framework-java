def _do_send_nio(self, byte_array, socket_address, flags):
    byte_buf = java.nio.ByteBuffer.wrap(byte_array)
    if (self.jchannel.isConnected() and (socket_address is None)):
        bytes_sent = self.jchannel.write(byte_buf)
    else:
        bytes_sent = self.jchannel.send(byte_buf, socket_address)
    return bytes_sent
