def _realsocket(family=AF_INET, type=SOCK_STREAM, protocol=0):
    assert (family == AF_INET), 'Only AF_INET sockets are currently supported on jython'
    assert (type in (SOCK_DGRAM, SOCK_STREAM)), 'Only SOCK_STREAM and SOCK_DGRAM sockets are currently supported on jython'
    if (type == SOCK_STREAM):
        if (protocol != 0):
            assert (protocol == IPPROTO_TCP), 'Only IPPROTO_TCP supported on SOCK_STREAM sockets'
        return _tcpsocket()
    else:
        if (protocol != 0):
            assert (protocol == IPPROTO_UDP), 'Only IPPROTO_UDP supported on SOCK_DGRAM sockets'
        return _udpsocket()
