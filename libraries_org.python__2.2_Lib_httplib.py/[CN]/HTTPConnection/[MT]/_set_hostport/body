def _set_hostport(self, host, port):
    if (port is None):
        i = host.find(':')
        if (i >= 0):
            try:
                port = int(host[(i + 1):])
            except ValueError:
                raise InvalidURL(("nonnumeric port: '%s'" % host[(i + 1):]))
            host = host[:i]
        else:
            port = self.default_port
    self.host = host
    self.port = port
