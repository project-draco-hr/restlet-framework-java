def adapt(delta, first, numchars):
    if first:
        delta //= 700
    else:
        delta //= 2
    delta += (delta // numchars)
    divisions = 0
    while (delta > 455):
        delta = (delta // 35)
        divisions += 36
    bias = (divisions + ((36 * delta) // (delta + 38)))
    return bias
