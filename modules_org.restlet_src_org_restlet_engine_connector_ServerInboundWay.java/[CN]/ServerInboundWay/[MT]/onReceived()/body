{
  InboundRequest request=(InboundRequest)getMessage().getRequest();
  if (getHeaders() != null) {
    request.setHeaders(getHeaders());
  }
  if (HeaderUtils.isConnectionClose(getHeaders())) {
    getConnection().setState(ConnectionState.CLOSING);
  }
  Representation entity=createEntity(getHeaders());
  getMessage().getRequest().setEntity(entity);
  getMessage().getServerInfo().setAddress(getConnection().getHelper().getHelped().getAddress());
  getMessage().getServerInfo().setPort(getConnection().getHelper().getHelped().getPort());
  if (request != null) {
    if (getMessage().getRequest().isExpectingResponse()) {
      getMessages().add(getMessage());
    }
    getHelper().getInboundMessages().add(getMessage());
  }
  if (!getMessage().getRequest().isEntityAvailable()) {
    onCompleted();
  }
}
