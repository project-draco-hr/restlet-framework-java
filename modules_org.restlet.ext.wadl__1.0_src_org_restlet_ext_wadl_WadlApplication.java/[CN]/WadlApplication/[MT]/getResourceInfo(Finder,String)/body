{
  ResourceInfo result=null;
  final Handler handler=finder.createTarget(finder.getTargetClass(),null,null);
  if (handler instanceof WadlResource) {
    final WadlResource resource=(WadlResource)handler;
    result=resource.getResourceInfo(path);
  }
 else {
    result=new ResourceInfo();
    result.setPath(path);
    final List<Method> methods=new ArrayList<Method>();
    methods.addAll(handler.getAllowedMethods());
    Collections.sort(methods,new Comparator<Method>(){
      public int compare(      Method m1,      Method m2){
        return m1.getName().compareTo(m2.getName());
      }
    }
);
    if (handler instanceof Resource) {
      final Resource resource=(Resource)handler;
      for (      final Method method : methods) {
        final MethodInfo methodInfo=new MethodInfo();
        methodInfo.setName(method);
        if (Method.GET.equals(method)) {
          final ResponseInfo responseInfo=new ResponseInfo();
          for (          final Variant variant : resource.getVariants()) {
            final RepresentationInfo representationInfo=new RepresentationInfo();
            representationInfo.setMediaType(variant.getMediaType());
            responseInfo.getRepresentations().add(representationInfo);
          }
          methodInfo.setResponse(responseInfo);
        }
        result.getMethods().add(methodInfo);
      }
    }
 else {
      for (      final Method method : methods) {
        final MethodInfo methodInfo=new MethodInfo();
        methodInfo.setName(method);
        result.getMethods().add(methodInfo);
      }
    }
  }
  return result;
}
