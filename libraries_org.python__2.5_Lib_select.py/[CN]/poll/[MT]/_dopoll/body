def _dopoll(self, timeout):
    if ((timeout is None) or (timeout < 0)):
        self.selector.select()
    else:
        try:
            timeout = int(timeout)
            if (timeout == 0):
                self.selector.selectNow()
            else:
                self.selector.select(timeout)
        except ValueError as vx:
            raise error('poll timeout must be a number of milliseconds or None', errno.EINVAL)
    return self.selector.selectedKeys()
