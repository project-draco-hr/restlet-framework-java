def test_nonempty_maildir_both(self):
    self.createMessage('cur')
    self.createMessage('new')
    self.mbox = mailbox.Maildir(test_support.TESTFN)
    self.assert_((len(self.mbox) == 2))
    self.assert_and_close(self.mbox.next())
    self.assert_and_close(self.mbox.next())
    self.assert_((self.mbox.next() is None))
    self.assert_((self.mbox.next() is None))
