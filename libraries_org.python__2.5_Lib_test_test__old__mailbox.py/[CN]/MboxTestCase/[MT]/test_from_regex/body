def test_from_regex(self):
    f = open(self._path, 'w')
    f.write('From fred@example.com Mon May 31 13:24:50 2004 +0200\nSubject: message 1\n\nbody1\nFrom fred@example.com Mon May 31 13:24:50 2004 -0200\nSubject: message 2\n\nbody2\nFrom fred@example.com Mon May 31 13:24:50 2004\nSubject: message 3\n\nbody3\nFrom fred@example.com Mon May 31 13:24:50 2004\nSubject: message 4\n\nbody4\n')
    f.close()
    box = mailbox.UnixMailbox(open(self._path, 'r'))
    messages = list(iter(box))
    self.assert_((len(messages) == 4))
    for message in messages:
        message.fp.close()
