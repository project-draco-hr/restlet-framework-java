{
  Handler result=null;
  if (targetClass != null) {
    try {
      Constructor<?> constructor;
      try {
        constructor=targetClass.getConstructor(Context.class,Request.class,Response.class);
        result=(Handler)constructor.newInstance(getContext(),request,response);
      }
 catch (      final NoSuchMethodException nsme) {
        constructor=targetClass.getConstructor();
        if (constructor != null) {
          result=(Handler)constructor.newInstance();
          result.init(getContext(),request,response);
        }
      }
    }
 catch (    final InvocationTargetException e) {
      if (e.getCause() instanceof Error) {
        throw (Error)e.getCause();
      }
 else       if (e.getCause() instanceof RuntimeException) {
        throw (RuntimeException)e.getCause();
      }
 else {
        getLogger().log(Level.WARNING,"Exception while instantiating the target handler.",e);
      }
    }
catch (    final Exception e) {
      getLogger().log(Level.WARNING,"Exception while instantiating the target handler.",e);
    }
  }
  return result;
}
