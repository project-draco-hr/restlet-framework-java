{
  Response res=Application.getCurrent().getContext().getClientDispatcher().get(passwdFileRef);
  if (res.getStatus().isSuccess() && res.getEntity() != null && res.getEntity().isAvailable()) {
    BufferedReader reader=null;
    String secret=null;
    try {
      reader=new BufferedReader(res.getEntity().getReader());
      String line;
      while (secret == null && (line=reader.readLine()) != null) {
        int colonIndex=line.indexOf(':');
        if (colonIndex != -1 && login.equals(line.substring(0,colonIndex)))         secret=line.substring(colonIndex + 1);
      }
    }
 catch (    IOException e) {
      throw new RuntimeException("Could not read " + passwdFileRef,e);
    }
 finally {
      try {
        if (reader != null)         reader.close();
      }
 catch (      IOException e) {
        throw new RuntimeException("Could not close " + passwdFileRef,e);
      }
    }
    return secret.toCharArray();
  }
  return null;
}
