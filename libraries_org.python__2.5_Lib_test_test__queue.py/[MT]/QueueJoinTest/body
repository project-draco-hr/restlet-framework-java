def QueueJoinTest(q):
    global cum
    cum = 0
    for i in (0, 1):
        threading.Thread(target=worker, args=(q,)).start()
    for i in xrange(100):
        q.put(i)
    q.join()
    verify((cum == sum(range(100))), 'q.join() did not block until all tasks were done')
    for i in (0, 1):
        q.put(None)
    q.join()
