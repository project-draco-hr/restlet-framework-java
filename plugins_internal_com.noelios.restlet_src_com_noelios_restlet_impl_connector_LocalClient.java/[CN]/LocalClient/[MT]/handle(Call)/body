{
  try {
    if (!isStarted())     start();
  }
 catch (  Exception e) {
    logger.log(Level.SEVERE,"Couldn't start the local client connector",e);
  }
  if (isStarted()) {
    String scheme=call.getResourceRef().getScheme();
    call.getResourceRef().normalize();
    if (scheme.equalsIgnoreCase("file")) {
      handleFile(call,call.getResourceRef().getPath());
    }
 else     if (scheme.equalsIgnoreCase("context")) {
      ContextReference cr=new ContextReference(call.getResourceRef());
      if (cr.getAuthorityType() == AuthorityType.CLASS) {
        handleClassLoader(call,getClass().getClassLoader());
      }
 else       if (cr.getAuthorityType() == AuthorityType.SYSTEM) {
        handleClassLoader(call,ClassLoader.getSystemClassLoader());
      }
 else       if (cr.getAuthorityType() == AuthorityType.THREAD) {
        handleClassLoader(call,Thread.currentThread().getContextClassLoader());
      }
 else       if (cr.getAuthorityType() == AuthorityType.WEB_APPLICATION) {
        handleWebApp(call);
      }
    }
 else {
      throw new IllegalArgumentException("Protocol \"" + scheme + "\" not supported by the connector. Only FILE and CONTEXT are supported.");
    }
  }
}
