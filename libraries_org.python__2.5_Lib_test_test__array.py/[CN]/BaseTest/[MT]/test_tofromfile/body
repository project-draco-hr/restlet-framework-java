def test_tofromfile(self):
    a = array.array(self.typecode, (2 * self.example))
    self.assertRaises(TypeError, a.tofile)
    self.assertRaises(TypeError, a.tofile, cStringIO.StringIO())
    f = open(test_support.TESTFN, 'wb')
    try:
        a.tofile(f)
        f.close()
        b = array.array(self.typecode)
        f = open(test_support.TESTFN, 'rb')
        self.assertRaises(TypeError, b.fromfile)
        self.assertRaises(TypeError, b.fromfile, cStringIO.StringIO(), len(self.example))
        b.fromfile(f, len(self.example))
        self.assertEqual(b, array.array(self.typecode, self.example))
        self.assertNotEqual(a, b)
        b.fromfile(f, len(self.example))
        self.assertEqual(a, b)
        self.assertRaises(EOFError, b.fromfile, f, 1)
        f.close()
    finally:
        if (not f.closed):
            f.close()
        test_support.unlink(test_support.TESTFN)
