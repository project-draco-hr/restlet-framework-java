def test_pickle(self):
    for protocol in (0, 1, 2):
        a = array.array(self.typecode, self.example)
        b = loads(dumps(a, protocol))
        self.assertNotEqual(id(a), id(b))
        self.assertEqual(a, b)
        a = ArraySubclass(self.typecode, self.example)
        a.x = 10
        b = loads(dumps(a, protocol))
        self.assertNotEqual(id(a), id(b))
        self.assertEqual(a, b)
        self.assertEqual(a.x, b.x)
        self.assertEqual(type(a), type(b))
