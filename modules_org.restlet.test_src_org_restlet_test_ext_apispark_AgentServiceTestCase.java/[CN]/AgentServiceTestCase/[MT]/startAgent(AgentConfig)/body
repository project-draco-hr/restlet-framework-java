{
  this.agentComponent=new Component();
  this.agentComponent.setName("agent");
  this.agentComponent.getServers().add(Protocol.HTTP,AGENT_PORT);
  AgentService agentService=new AgentService();
  agentService.setCellId(agentConfig.getCellId());
  agentService.setCellVersion(agentConfig.getCellVersion());
  agentService.setAgentServicePath(agentConfig.getAgentServicePath());
  agentService.setAgentUsername(agentConfig.getAgentUsername());
  agentService.setAgentSecretKey(agentConfig.getAgentSecretKey());
  agentComponent.getServices().add(agentService);
  final Application application=new Application(){
    @Override public Restlet createInboundRoot(){
      Router router=new Router();
      router.attach("/test",AgentServerResource.class);
      router.attach("/admin/test",AgentServerResource.class);
      return router;
    }
  }
;
  this.agentComponent.getDefaultHost().attach(application);
  this.agentComponent.start();
}
