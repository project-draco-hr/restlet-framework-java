{
  super(context,request,response);
  if (getCurrentUser() != null) {
    setModifiable(true);
    final String mailboxId=Reference.decode((String)request.getAttributes().get("mailboxId"));
    this.mailbox=getObjectsFacade().getMailboxById(mailboxId);
    if (this.mailbox != null) {
      final String contactId=(String)request.getAttributes().get("contactId");
      this.contact=getObjectsFacade().getContactById(contactId);
      if (this.contact != null) {
        this.hostedMailboxes=getObjectsFacade().getMailboxes();
        getVariants().add(new Variant(MediaType.TEXT_HTML));
      }
    }
  }
 else {
    setModifiable(false);
  }
}
