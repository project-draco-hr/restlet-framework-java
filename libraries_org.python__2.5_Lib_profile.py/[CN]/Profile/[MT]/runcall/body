def runcall(self, func, *args, **kw):
    self.set_cmd(repr(func))
    sys.setprofile(self.dispatcher)
    try:
        return func(*args, **kw)
    finally:
        sys.setprofile(None)
