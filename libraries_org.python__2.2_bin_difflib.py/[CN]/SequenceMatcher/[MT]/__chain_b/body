def __chain_b(self):
    b = self.b
    self.b2j = b2j = {}
    self.b2jhas = b2jhas = b2j.has_key
    for i in xrange(len(b)):
        elt = b[i]
        if b2jhas(elt):
            b2j[elt].append(i)
        else:
            b2j[elt] = [i]
    (isjunk, junkdict) = (self.isjunk, {})
    if isjunk:
        for elt in b2j.keys():
            if isjunk(elt):
                junkdict[elt] = 1
                del b2j[elt]
    self.isbjunk = junkdict.has_key
