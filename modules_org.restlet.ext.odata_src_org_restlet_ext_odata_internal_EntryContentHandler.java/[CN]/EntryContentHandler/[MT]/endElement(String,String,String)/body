{
  if (State.ASSOCIATION == getState()) {
    if (uri.equalsIgnoreCase(Feed.ATOM_NAMESPACE)) {
      if (localName.equals("feed")) {
        extraFeedHandler.endFeed(null);
      }
 else       if (localName.equals("link")) {
        if (association.isToMany()) {
          extraFeedHandler.endLink(null);
        }
 else {
          extraEntryHandler.endLink(null);
        }
      }
 else       if (localName.equalsIgnoreCase("entry")) {
        if (association.isToMany()) {
          extraFeedHandler.endEntry(null);
        }
 else {
          extraEntryHandler.endEntry(null);
        }
      }
 else       if (localName.equalsIgnoreCase("content")) {
        if (association.isToMany()) {
          extraFeedHandler.endContent(null);
        }
 else {
          extraEntryHandler.endContent(null);
        }
      }
    }
    if (association.isToMany()) {
      extraFeedHandler.endElement(uri,localName,qName);
    }
 else {
      extraEntryHandler.endElement(uri,localName,qName);
    }
  }
 else   if (State.PROPERTY == getState()) {
    if (parsePropertyNull) {
      popState();
      parsePropertyNull=false;
    }
 else {
      Object obj=entity;
      if (propertyPath.size() > 1) {
        for (int i=0; i < propertyPath.size() - 1; i++) {
          try {
            Object o=ReflectUtils.invokeGetter(obj,propertyPath.get(i));
            if (o == null) {
              Field[] fields=obj.getClass().getDeclaredFields();
              for (              Field field : fields) {
                if (field.getName().equalsIgnoreCase(propertyPath.get(i))) {
                  o=field.getType().newInstance();
                  break;
                }
              }
            }
            ReflectUtils.invokeSetter(obj,propertyPath.get(i),o);
            obj=o;
          }
 catch (          Exception e) {
            obj=null;
          }
        }
      }
      Property property=metadata.getProperty(obj,localName);
      try {
        ReflectUtils.setProperty(obj,property,sb.toString());
      }
 catch (      Exception e) {
        getLogger().warning("Cannot set " + localName + " property on "+ obj+ " with value "+ sb.toString());
      }
      popState();
      if (!propertyPath.isEmpty()) {
        propertyPath.remove(propertyPath.size() - 1);
      }
    }
  }
 else   if (State.PROPERTIES == getState()) {
    popState();
  }
 else   if (State.CONTENT == getState()) {
    popState();
  }
 else   if (mapping != null) {
    if (sb != null) {
      try {
        ReflectUtils.invokeSetter(entity,mapping.getPropertyPath(),sb.toString());
      }
 catch (      Exception e) {
        getLogger().warning("Cannot set the mapped property " + mapping.getPropertyPath() + " on "+ entity+ " with value "+ sb.toString());
      }
    }
    mapping=null;
  }
 else   if (State.ENTRY == getState()) {
    if (!eltPath.isEmpty()) {
      eltPath.remove(eltPath.size() - 1);
    }
  }
}
