{
  if (entity != null && !entryName.endsWith("/")) {
    ZipEntry entry=new ZipEntry(entryName);
    if (entity.getModificationDate() != null)     entry.setTime(entity.getModificationDate().getTime());
 else {
      entry.setTime(System.currentTimeMillis());
    }
    out.putNextEntry(entry);
    ByteUtils.write(new BufferedInputStream(entity.getStream()),out);
    out.closeEntry();
    return true;
  }
 else {
    out.putNextEntry(new ZipEntry(entryName));
    out.closeEntry();
  }
  return false;
}
