def finalize_options(self):
    if (self.plat_name is None):
        self.plat_name = get_platform()
    if (self.bdist_base is None):
        build_base = self.get_finalized_command('build').build_base
        self.bdist_base = os.path.join(build_base, ('bdist.' + self.plat_name))
    self.ensure_string_list('formats')
    if (self.formats is None):
        try:
            self.formats = [self.default_format[os.name]]
        except KeyError:
            raise DistutilsPlatformError, ("don't know how to create built distributions " + ('on platform %s' % os.name))
    if (self.dist_dir is None):
        self.dist_dir = 'dist'
