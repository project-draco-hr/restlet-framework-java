def run(self):
    commands = []
    for format in self.formats:
        try:
            commands.append(self.format_command[format][0])
        except KeyError:
            raise DistutilsOptionError, ("invalid format '%s'" % format)
    for i in range(len(self.formats)):
        cmd_name = commands[i]
        sub_cmd = self.reinitialize_command(cmd_name)
        if (cmd_name not in self.no_format_option):
            sub_cmd.format = self.formats[i]
        if (cmd_name in commands[(i + 1):]):
            sub_cmd.keep_temp = 1
        self.run_command(cmd_name)
