def escape(pattern):
    'Escape all non-alphanumeric characters in pattern.'
    s = list(pattern)
    for i in range(len(pattern)):
        c = pattern[i]
        if (not (('a' <= c <= 'z') or ('A' <= c <= 'Z') or ('0' <= c <= '9'))):
            if (c == '\x00'):
                s[i] = '\\000'
            else:
                s[i] = ('\\' + c)
    return _join(s, pattern)
