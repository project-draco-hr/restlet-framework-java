{
  ByteArrayOutputStream headStream=new ByteArrayOutputStream(8192);
  writeResponseHead(headStream);
  ByteBuffer buffer=ByteBuffer.wrap(headStream.toByteArray());
  if (isConfidential()) {
    SSLOutputWriter.flushChannel(socketChannel,buffer);
  }
 else {
    OutputWriter.flushChannel(socketChannel,buffer);
  }
  buffer.clear();
}
