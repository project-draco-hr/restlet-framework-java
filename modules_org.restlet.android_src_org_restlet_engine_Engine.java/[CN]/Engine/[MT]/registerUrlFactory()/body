{
  URL.setURLStreamHandlerFactory(new URLStreamHandlerFactory(){
    public URLStreamHandler createURLStreamHandler(    String protocol){
      final URLStreamHandler result=new URLStreamHandler(){
        @Override protected URLConnection openConnection(        URL url) throws IOException {
          return new URLConnection(url){
            @Override public void connect() throws IOException {
            }
            @Override public InputStream getInputStream() throws IOException {
              InputStream result=null;
              final Context context=Context.getCurrent();
              if (context != null) {
                final Response response=context.getClientDispatcher().get(this.url.toString());
                if (response.getStatus().isSuccess()) {
                  result=response.getEntity().getStream();
                }
              }
              return result;
            }
          }
;
        }
      }
;
      return result;
    }
  }
);
}
