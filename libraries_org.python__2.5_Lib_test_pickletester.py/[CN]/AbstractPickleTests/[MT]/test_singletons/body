def test_singletons(self):
    expected_opcode = {(0, None): pickle.NONE, (1, None): pickle.NONE, (2, None): pickle.NONE, (0, True): pickle.INT, (1, True): pickle.INT, (2, True): pickle.NEWTRUE, (0, False): pickle.INT, (1, False): pickle.INT, (2, False): pickle.NEWFALSE, }
    for proto in protocols:
        for x in (None, False, True):
            s = self.dumps(x, proto)
            y = self.loads(s)
            self.assert_((x is y), (proto, x, s, y))
            expected = expected_opcode[(proto, x)]
            self.assertEqual(opcode_in_pickle(expected, s), True)
