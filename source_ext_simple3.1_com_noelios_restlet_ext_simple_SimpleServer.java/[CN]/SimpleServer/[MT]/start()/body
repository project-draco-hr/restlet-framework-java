{
  if (!isStarted()) {
    if (Protocols.HTTP.equals(super.protocol)) {
      socket=new ServerSocket(port);
    }
 else     if (Protocols.HTTPS.equals(super.protocol)) {
      KeyStore keyStore=KeyStore.getInstance("JKS");
      keyStore.load(new FileInputStream(keystorePath),keystorePassword.toCharArray());
      KeyManagerFactory keyManagerFactory=KeyManagerFactory.getInstance("SunX509");
      keyManagerFactory.init(keyStore,keyPassword.toCharArray());
      SSLContext sslContext=SSLContext.getInstance("TLS");
      sslContext.init(keyManagerFactory.getKeyManagers(),null,null);
      socket=sslContext.getServerSocketFactory().createServerSocket(port);
      socket.setSoTimeout(60000);
    }
 else {
      throw new RuntimeException("Unsupported protocol: " + super.protocol);
    }
    this.confidential=Protocols.HTTPS.equals(getProtocol());
    this.handler=PipelineHandlerFactory.getInstance(this,20,200);
    this.connection=ConnectionFactory.getConnection(handler,new BufferedPipelineFactory());
    this.connection.connect(socket);
    super.start();
  }
}
