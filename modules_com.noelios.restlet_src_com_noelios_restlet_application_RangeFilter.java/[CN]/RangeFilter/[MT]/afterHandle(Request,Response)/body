{
  if (getRangeService().isEnabled() && response.isEntityAvailable()) {
    if (request.getRanges().size() == 1) {
      Range requestedRange=request.getRanges().get(0);
      if (!requestedRange.equals(response.getEntity().getRange())) {
        response.setEntity(new RangeRepresentation(response.getEntity(),requestedRange));
      }
    }
 else     if (request.getRanges().size() > 1) {
      response.setStatus(Status.CLIENT_ERROR_REQUESTED_RANGE_NOT_SATISFIABLE);
      response.setEntity(null);
    }
  }
}
