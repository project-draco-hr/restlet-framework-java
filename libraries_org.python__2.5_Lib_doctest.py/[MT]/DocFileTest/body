def DocFileTest(path, module_relative=True, package=None, globs=None, parser=DocTestParser(), encoding=None, **options):
    if (globs is None):
        globs = {}
    else:
        globs = globs.copy()
    if (package and (not module_relative)):
        raise ValueError('Package may only be specified for module-relative paths.')
    (doc, path) = _load_testfile(path, package, module_relative)
    if ('__file__' not in globs):
        globs['__file__'] = path
    name = os.path.basename(path)
    if (encoding is not None):
        doc = doc.decode(encoding)
    test = parser.get_doctest(doc, globs, name, path, 0)
    return DocFileCase(test, **options)
