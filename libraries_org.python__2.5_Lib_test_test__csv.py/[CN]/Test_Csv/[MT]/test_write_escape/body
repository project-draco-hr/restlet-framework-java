def test_write_escape(self):
    self._write_test(['a', 1, 'p,q'], 'a,1,"p,q"', escapechar='\\')
    self.assertRaises(csv.Error, self._write_test, ['a', 1, 'p,"q"'], 'a,1,"p,\\"q\\""', escapechar=None, doublequote=False)
    self._write_test(['a', 1, 'p,"q"'], 'a,1,"p,\\"q\\""', escapechar='\\', doublequote=False)
    self._write_test(['"'], '""""', escapechar='\\', quoting=csv.QUOTE_MINIMAL)
    self._write_test(['"'], '\\"', escapechar='\\', quoting=csv.QUOTE_MINIMAL, doublequote=False)
    self._write_test(['"'], '\\"', escapechar='\\', quoting=csv.QUOTE_NONE)
    self._write_test(['a', 1, 'p,q'], 'a,1,p\\,q', escapechar='\\', quoting=csv.QUOTE_NONE)
