def test_write_simple_dict(self):
    (fd, name) = tempfile.mkstemp()
    fileobj = os.fdopen(fd, 'w+b')
    try:
        writer = csv.DictWriter(fileobj, fieldnames=['f1', 'f2', 'f3'])
        writer.writerow({'f1': 10, 'f3': 'abc', })
        fileobj.seek(0)
        self.assertEqual(fileobj.read(), '10,,abc\r\n')
    finally:
        fileobj.close()
        os.unlink(name)
