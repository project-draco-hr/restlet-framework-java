def redirect_internal(self, url, fp, errcode, errmsg, headers, data):
    if headers.has_key('location'):
        newurl = headers['location']
    elif headers.has_key('uri'):
        newurl = headers['uri']
    else:
        return
    void = fp.read()
    fp.close()
    newurl = basejoin(((self.type + ':') + url), newurl)
    if (data is None):
        return self.open(newurl)
    else:
        return self.open(newurl, data)
