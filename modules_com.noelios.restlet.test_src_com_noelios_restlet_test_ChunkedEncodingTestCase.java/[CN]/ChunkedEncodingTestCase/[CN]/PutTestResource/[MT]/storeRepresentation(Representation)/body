{
  checkForChunkedHeader(getRequest());
  DomRepresentation dom=new DomRepresentation(entity);
  try {
    Document doc=dom.getDocument();
    assertXML(dom);
    getResponse().setEntity(new DomRepresentation(MediaType.TEXT_XML,doc));
  }
 catch (  IOException ex) {
    ex.printStackTrace();
    fail(ex.getMessage());
  }
}
