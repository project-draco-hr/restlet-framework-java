def test_floatconversion(self):


    class Foo0:

        def __float__(self):
            return 42.0


    class Foo1(object):

        def __float__(self):
            return 42.0


    class Foo2(float):

        def __float__(self):
            return 42.0


    class Foo3(float):

        def __new__(cls, value=0.0):
            return float.__new__(cls, (2 * value))

        def __float__(self):
            return self


    class Foo4(float):

        def __float__(self):
            return 42
    self.assertAlmostEqual(float(Foo0()), 42.0)
    self.assertAlmostEqual(float(Foo1()), 42.0)
    self.assertAlmostEqual(float(Foo2()), 42.0)
    self.assertAlmostEqual(float(Foo3(21)), 42.0)
    self.assertRaises(TypeError, float, Foo4(42))
