def test_intern(self):
    self.assertRaises(TypeError, intern)
    s = 'never interned before'
    self.assert_((intern(s) is s))
    s2 = s.swapcase().swapcase()
    self.assert_((intern(s2) is s))


    class S(str):

        def __hash__(self):
            return 123
    self.assertRaises(TypeError, intern, S('abc'))
    s = S('abc')
    setattr(s, s, s)
    self.assertEqual(getattr(s, s), s)
