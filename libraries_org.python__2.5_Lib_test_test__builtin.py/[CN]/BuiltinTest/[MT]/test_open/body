def test_open(self):
    self.write_testfile()
    fp = open(TESTFN, 'r')
    try:
        self.assertEqual(fp.readline(4), '1+1\n')
        self.assertEqual(fp.readline(4), '1+1\n')
        self.assertEqual(fp.readline(), 'The quick brown fox jumps over the lazy dog.\n')
        self.assertEqual(fp.readline(4), 'Dear')
        self.assertEqual(fp.readline(100), ' John\n')
        self.assertEqual(fp.read(300), ('XXX' * 100))
        self.assertEqual(fp.read(1000), ('YYY' * 100))
    finally:
        fp.close()
    unlink(TESTFN)
