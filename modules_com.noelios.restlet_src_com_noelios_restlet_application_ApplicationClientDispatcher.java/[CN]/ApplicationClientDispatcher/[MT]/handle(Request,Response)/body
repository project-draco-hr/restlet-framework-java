{
  Protocol protocol=request.getProtocol();
  if (protocol == null) {
    throw new UnsupportedOperationException("Unable to determine the protocol to use for this call.");
  }
 else {
    request.getAttributes().put(Application.KEY,this.applicationContext.getApplication());
    response.getAttributes().put(Application.KEY,this.applicationContext.getApplication());
    if (protocol.equals(Protocol.WAR)) {
      this.applicationContext.getWarClient().handle(request,response);
    }
 else {
      if (!this.applicationContext.getApplication().getConnectorService().getClientProtocols().contains(protocol)) {
        this.applicationContext.getLogger().fine("The protocol used by this request is not declared in the application's connector service. " + "Please update the list of client connectors used by your application and restart it.");
      }
      if (this.applicationContext != null) {
        this.applicationContext.getParentContext().getClientDispatcher().handle(request,response);
      }
 else {
        Logger.getLogger(ApplicationClientDispatcher.class.getCanonicalName()).warning("Your Application doesn't have a context set. Ensure that you pass the parent Component's context to your Application constructor.");
      }
    }
  }
}
