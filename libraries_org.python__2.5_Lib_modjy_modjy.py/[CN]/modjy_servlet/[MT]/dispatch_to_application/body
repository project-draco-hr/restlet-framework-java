def dispatch_to_application(self, req, resp, environ):
    app_callable = self.get_app_object(req, environ)
    self.set_wsgi_environment(req, resp, environ, self.params, self.get_j2ee_ns(req, resp))
    response_callable = start_response_object(req, resp)
    try:
        app_return = self.call_application(app_callable, environ, response_callable)
        if (app_return is None):
            raise ReturnNotIterable('Application returned None: must return an iterable')
        self.deal_with_app_return(environ, response_callable, app_return)
    except ModjyException as mx:
        self.raise_exc(mx.__class__, str(mx))
    except Exception as x:
        self.raise_exc(ApplicationException, str(x))
