def testall(list, recursive, toplevel):
    import sys
    import os
    for filename in list:
        if os.path.isdir(filename):
            print (filename + '/:'),
            if (recursive or toplevel):
                print 'recursing down:'
                import glob
                names = glob.glob(os.path.join(filename, '*'))
                testall(names, recursive, 0)
            else:
                print '*** directory (use -r) ***'
        else:
            print (filename + ':'),
            sys.stdout.flush()
            try:
                print what(filename)
            except IOError:
                print '*** not found ***'
