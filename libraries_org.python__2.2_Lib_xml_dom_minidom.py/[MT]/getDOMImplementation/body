def getDOMImplementation(features=None):
    if features:
        if isinstance(features, StringTypes):
            features = domreg._parse_feature_string(features)
        for (f, v) in features:
            if (not Document.implementation.hasFeature(f, v)):
                return None
    return Document.implementation
