def compare_events(self, line_offset, events, expected_events):
    events = [((l - line_offset), e) for (l, e) in events]
    if (events != expected_events):
        self.fail(('events did not match expectation:\n' + '\n'.join(difflib.ndiff(map(str, expected_events), map(str, events)))))
