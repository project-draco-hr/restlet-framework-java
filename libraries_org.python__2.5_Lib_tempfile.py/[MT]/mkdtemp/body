def mkdtemp(suffix='', prefix=template, dir=None):
    "mkdtemp([suffix, [prefix, [dir]]])\n    User-callable function to create and return a unique temporary\n    directory.  The return value is the pathname of the directory.\n\n    Arguments are as for mkstemp, except that the 'text' argument is\n    not accepted.\n\n    The directory is readable, writable, and searchable only by the\n    creating user.\n\n    Caller is responsible for deleting the directory when done with it.\n    "
    if (dir is None):
        dir = gettempdir()
    names = _get_candidate_names()
    for seq in xrange(TMP_MAX):
        name = names.next()
        file = _os.path.join(dir, ((prefix + name) + suffix))
        try:
            _os.mkdir(file, 448)
            return file
        except OSError as e:
            if (e.errno == _errno.EEXIST):
                continue
            raise
    raise IOError, (_errno.EEXIST, 'No usable temporary directory name found')
