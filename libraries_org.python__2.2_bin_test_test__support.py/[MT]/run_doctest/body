def run_doctest(module, verbosity=None):
    "Run doctest on the given module.  Return (#failures, #tests).\n\n    If optional argument verbosity is not specified (or is None), pass\n    test_support's belief about verbosity on to doctest.  Else doctest's\n    usual behavior is used (it searches sys.argv for -v).\n    "
    import doctest
    if (verbosity is None):
        verbosity = verbose
    else:
        verbosity = None
    save_stdout = sys.stdout
    sys.stdout = get_original_stdout()
    try:
        (f, t) = doctest.testmod(module, verbose=verbosity)
        if f:
            raise TestFailed(('%d of %d doctests failed' % (f, t)))
        return (f, t)
    finally:
        sys.stdout = save_stdout
