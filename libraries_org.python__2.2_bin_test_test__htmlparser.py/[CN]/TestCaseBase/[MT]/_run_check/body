def _run_check(self, source, expected_events, collector=EventCollector):
    parser = collector()
    for s in source:
        parser.feed(s)
    parser.close()
    events = parser.get_events()
    if (events != expected_events):
        self.fail(((('received events did not match expected events\nExpected:\n' + pprint.pformat(expected_events)) + '\nReceived:\n') + pprint.pformat(events)))
