{
  HandshakeStatus hs=getSslHandshakeStatus();
  if (getLogger().isLoggable(Level.FINER)) {
    getLogger().log(Level.FINER,"Handling SSL handshake: " + hs);
  }
  if (isHandshaking && hs == HandshakeStatus.NOT_HANDSHAKING) {
    hs=HandshakeStatus.FINISHED;
    if (getLogger().isLoggable(Level.FINER)) {
      getLogger().log(Level.FINER,"SSLEngine went directly from handshaking to NOT_HANDSHAKING, " + "treating as FINISHED.");
    }
  }
  if (hs != HandshakeStatus.NOT_HANDSHAKING) {
    isHandshaking=true;
switch (hs) {
case FINISHED:
      onFinished();
    break;
case NEED_TASK:
  onNeedTask();
break;
case NEED_UNWRAP:
onUnwrap();
break;
case NEED_WRAP:
onWrap();
break;
case NOT_HANDSHAKING:
break;
}
}
}
