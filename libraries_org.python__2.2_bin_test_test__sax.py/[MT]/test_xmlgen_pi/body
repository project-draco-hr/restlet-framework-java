def test_xmlgen_pi():
    result = StringIO()
    gen = XMLGenerator(result)
    gen.startDocument()
    gen.processingInstruction('test', 'data')
    gen.startElement('doc', {})
    gen.endElement('doc')
    gen.endDocument()
    return (result.getvalue() == (start + '<?test data?><doc></doc>'))
