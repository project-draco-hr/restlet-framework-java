def read(self, size):
    b = [self.buf]
    x = len(self.buf)
    while (x < size):
        try:
            raw = self.fileobj.read(self.blocksize)
            data = self.bz2obj.decompress(raw)
            b.append(data)
        except EOFError:
            break
        x += len(data)
    self.buf = ''.join(b)
    buf = self.buf[:size]
    self.buf = self.buf[size:]
    self.pos += len(buf)
    return buf
