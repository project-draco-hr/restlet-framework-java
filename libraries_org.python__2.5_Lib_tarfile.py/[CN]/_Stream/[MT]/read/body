def read(self, size=None):
    'Return the next size number of bytes from the stream.\n           If size is not defined, return all bytes of the stream\n           up to EOF.\n        '
    if (size is None):
        t = []
        while True:
            buf = self._read(self.bufsize)
            if (not buf):
                break
            t.append(buf)
        buf = ''.join(t)
    else:
        buf = self._read(size)
    self.pos += len(buf)
    return buf
