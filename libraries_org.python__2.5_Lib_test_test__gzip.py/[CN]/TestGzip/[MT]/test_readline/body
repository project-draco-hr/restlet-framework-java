def test_readline(self):
    self.test_write()
    f = gzip.GzipFile(self.filename, 'rb')
    line_length = 0
    while 1:
        L = f.readline(line_length)
        if ((L == '') and (line_length != 0)):
            break
        self.assert_((len(L) <= line_length))
        line_length = ((line_length + 1) % 50)
    f.close()
