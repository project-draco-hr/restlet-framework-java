def test_seek_read(self):
    self.test_write()
    f = gzip.GzipFile(self.filename)
    while 1:
        oldpos = f.tell()
        line1 = f.readline()
        if (not line1):
            break
        newpos = f.tell()
        f.seek(oldpos)
        if (len(line1) > 10):
            amount = 10
        else:
            amount = len(line1)
        line2 = f.read(amount)
        self.assertEqual(line1[:amount], line2)
        f.seek(newpos)
    f.close()
