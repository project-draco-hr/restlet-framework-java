{
  if (getOutboundMessageState() == null) {
    setOutboundMessageState(WayMessageState.START_LINE);
    getOutboundBuilder().delete(0,getOutboundBuilder().length());
  }
  while (getOutboundBuffer().hasRemaining()) {
    if (getOutboundMessageState() == WayMessageState.START_LINE) {
      writeMessageStart();
    }
 else     if (getMessageState() == WayMessageState.HEADERS) {
      readMessageHeaders();
    }
  }
}
