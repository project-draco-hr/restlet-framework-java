def write(self, data):
    if (self.state != _DID_HEADER):
        raise Error, 'Writing data at the wrong time'
    self.dlen = (self.dlen - len(data))
    self._write(data)
