def write(self, data):
    self.data = (self.data + data)
    datalen = len(self.data)
    todo = ((datalen // 3) * 3)
    data = self.data[:todo]
    self.data = self.data[todo:]
    if (not data):
        return
    self.hqxdata = (self.hqxdata + binascii.b2a_hqx(data))
    self._flush(0)
