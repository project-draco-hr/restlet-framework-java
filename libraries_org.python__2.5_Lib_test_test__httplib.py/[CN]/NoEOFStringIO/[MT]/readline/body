def readline(self, length=None):
    data = StringIO.StringIO.readline(self, length)
    if (data == ''):
        raise AssertionError('caller tried to read past EOF')
    return data
