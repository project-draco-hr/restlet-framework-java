def _main():
    import os
    mod = sys.argv[1]
    if os.path.exists(mod):
        path = [os.path.dirname(mod)]
        mod = os.path.basename(mod)
        if mod.lower().endswith('.py'):
            mod = mod[:(-3)]
    else:
        path = []
    dict = readmodule_ex(mod, path)
    objs = dict.values()
    objs.sort((lambda a, b: cmp(getattr(a, 'lineno', 0), getattr(b, 'lineno', 0))))
    for obj in objs:
        if isinstance(obj, Class):
            print 'class', obj.name, obj.super, obj.lineno
            methods = sorted(obj.methods.iteritems(), key=itemgetter(1))
            for (name, lineno) in methods:
                if (name != '__path__'):
                    print '  def', name, lineno
        elif isinstance(obj, Function):
            print 'def', obj.name, obj.lineno
