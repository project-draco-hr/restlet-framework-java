def storlines(self, cmd, fp):
    'Store a file in line mode.'
    self.voidcmd('TYPE A')
    conn = self.transfercmd(cmd)
    while 1:
        buf = fp.readline()
        if (not buf):
            break
        if (buf[(-2):] != CRLF):
            if (buf[(-1)] in CRLF):
                buf = buf[:(-1)]
            buf = (buf + CRLF)
        conn.sendall(buf)
    conn.close()
    return self.voidresp()
