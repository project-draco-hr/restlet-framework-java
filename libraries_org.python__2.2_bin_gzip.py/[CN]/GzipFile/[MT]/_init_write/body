def _init_write(self, filename):
    if (filename[(-3):] != '.gz'):
        filename = (filename + '.gz')
    self.filename = filename
    self.crc = zlib.crc32('')
    self.size = 0
    self.writebuf = []
    self.bufsize = 0
