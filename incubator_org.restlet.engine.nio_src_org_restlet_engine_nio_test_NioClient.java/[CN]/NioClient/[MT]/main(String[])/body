{
  Engine.getInstance().getRegisteredClients().add(0,new org.restlet.engine.nio.HttpClientHelper(null));
  Client client=new Client(new Context(),Protocol.HTTP);
  client.getContext().getParameters().add("minThreads","1");
  client.getContext().getParameters().add("lowThreads","30");
  client.getContext().getParameters().add("maxThreads","40");
  client.getContext().getParameters().add("maxQueued","20");
  client.start();
  String uri="http://www.restlet.org";
  int iterations=50;
  ClientResource cr=new ClientResource(uri);
  cr.setNext(client);
  Representation r=null;
  System.out.println("Calling resource: " + uri + " "+ iterations+ " times");
  long start=System.currentTimeMillis();
  for (int i=0; i < iterations; i++) {
    r=cr.get();
    r.exhaust();
  }
  long total=(System.currentTimeMillis() - start);
  long avg=total / iterations;
  System.out.println("Done in " + total + ". avg per call: "+ avg);
}
