{
  Context ctx=getContext();
  Router router=new Router(ctx);
  OAuthAuthorizer auth=new OAuthAuthorizer(AuthorizationServerTestCase.prot + "://localhost:" + AuthorizationServerTestCase.serverPort+ "/oauth/validate",AuthorizationServerTestCase.prot + "://localhost:" + AuthorizationServerTestCase.serverPort+ "/oauth/authorize");
  auth.setNext(DummyResource.class);
  router.attach("/protected",auth);
  OAuthAuthorizer auth2=new OAuthAuthorizer(AuthorizationServerTestCase.prot + "://localhost:" + AuthorizationServerTestCase.serverPort+ "/oauth/validate",AuthorizationServerTestCase.prot + "://localhost:" + AuthorizationServerTestCase.serverPort+ "/oauth/authorize");
  List<Role> roles=new ArrayList<Role>();
  roles.add(new Role("foo",null));
  roles.add(new Role("bar",null));
  auth2.setAuthorizedRoles(roles);
  auth2.setNext(ScopedDummyResource.class);
  router.attach("/scoped",auth2);
  return router;
}
