def test_bug1001011(self):
    t = self.type2test


    class subclass(t):
        pass
    s1 = subclass('abcd')
    s2 = t().join([s1])
    self.assert_((s1 is not s2))
    self.assert_((type(s2) is t))
    s1 = t('abcd')
    s2 = t().join([s1])
    self.assert_((s1 is s2))
    if (t is unicode):
        s1 = subclass('abcd')
        s2 = ''.join([s1])
        self.assert_((s1 is not s2))
        self.assert_((type(s2) is t))
        s1 = t('abcd')
        s2 = ''.join([s1])
        self.assert_((s1 is s2))
    elif (t is str):
        s1 = subclass('abcd')
        s2 = u''.join([s1])
        self.assert_((s1 is not s2))
        self.assert_((type(s2) is unicode))
        s1 = t('abcd')
        s2 = u''.join([s1])
        self.assert_((s1 is not s2))
        self.assert_((type(s2) is unicode))
    else:
        self.fail(('unexpected type for MixinStrUnicodeTest %r' % t))
