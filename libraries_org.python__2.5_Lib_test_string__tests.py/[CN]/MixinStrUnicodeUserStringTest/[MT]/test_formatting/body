def test_formatting(self):
    self.checkequal('+hello+', '+%s+', '__mod__', 'hello')
    self.checkequal('+10+', '+%d+', '__mod__', 10)
    self.checkequal('a', '%c', '__mod__', 'a')
    self.checkequal('a', '%c', '__mod__', 'a')
    self.checkequal('"', '%c', '__mod__', 34)
    self.checkequal('$', '%c', '__mod__', 36)
    self.checkequal('10', '%d', '__mod__', 10)
    self.checkequal('\x7f', '%c', '__mod__', 127)
    for ordinal in ((-100), 2097152):
        self.checkraises((ValueError, OverflowError), '%c', '__mod__', ordinal)
    self.checkequal(' 42', '%3ld', '__mod__', 42)
    self.checkequal('0042.00', '%07.2f', '__mod__', 42)
    self.checkequal('0042.00', '%07.2F', '__mod__', 42)
    self.checkraises(TypeError, 'abc', '__mod__')
    self.checkraises(TypeError, '%(foo)s', '__mod__', 42)
    self.checkraises(TypeError, '%s%s', '__mod__', (42,))
    self.checkraises(TypeError, '%c', '__mod__', (None,))
    self.checkraises(ValueError, '%(foo', '__mod__', {})
    self.checkraises(TypeError, '%(foo)s %(bar)s', '__mod__', ('foo', 42))
    self.checkequal('bar', '%((foo))s', '__mod__', {'(foo)': 'bar', })
    self.checkequal(((103 * 'a') + 'x'), '%sx', '__mod__', (103 * 'a'))
    self.checkraises(TypeError, '%*s', '__mod__', ('foo', 'bar'))
    self.checkraises(TypeError, '%10.*f', '__mod__', ('foo', 42.0))
    self.checkraises(ValueError, '%10', '__mod__', (42,))
