def test_rsplit(self):
    self.checkequal(['this', 'is', 'the', 'rsplit', 'function'], 'this is the rsplit function', 'rsplit')
    self.checkequal(['a', 'b', 'c', 'd'], 'a b c d ', 'rsplit')
    self.checkequal(['a b c', 'd'], 'a b c d', 'rsplit', None, 1)
    self.checkequal(['a b', 'c', 'd'], 'a b c d', 'rsplit', None, 2)
    self.checkequal(['a', 'b', 'c', 'd'], 'a b c d', 'rsplit', None, 3)
    self.checkequal(['a', 'b', 'c', 'd'], 'a b c d', 'rsplit', None, 4)
    self.checkequal(['a', 'b', 'c', 'd'], 'a b c d', 'rsplit', None, (sys.maxint - 20))
    self.checkequal(['a b c d'], 'a b c d', 'rsplit', None, 0)
    self.checkequal(['a b c d'], 'a b c d  ', 'rsplit', None, 0)
    self.checkequal(['a  b', 'c', 'd'], 'a  b  c  d', 'rsplit', None, 2)
    self.checkequal([], '         ', 'rsplit')
    self.checkequal(['a'], '  a    ', 'rsplit')
    self.checkequal(['a', 'b'], '  a    b   ', 'rsplit')
    self.checkequal(['  a', 'b'], '  a    b   ', 'rsplit', None, 1)
    self.checkequal(['  a    b', 'c'], '  a    b   c   ', 'rsplit', None, 1)
    self.checkequal(['  a', 'b', 'c'], '  a    b   c   ', 'rsplit', None, 2)
    self.checkequal(['a', 'b'], '\n\ta \t\r b \x0b ', 'rsplit', None, 88)
    aaa = (' a ' * 20)
    self.checkequal((['a'] * 20), aaa, 'rsplit')
    self.checkequal(([aaa[:(-4)]] + ['a']), aaa, 'rsplit', None, 1)
    self.checkequal(([' a  a'] + (['a'] * 18)), aaa, 'rsplit', None, 18)
    self.checkequal(['a', 'b', 'c', 'd'], 'a|b|c|d', 'rsplit', '|')
    self.checkequal(['a|b|c', 'd'], 'a|b|c|d', 'rsplit', '|', 1)
    self.checkequal(['a|b', 'c', 'd'], 'a|b|c|d', 'rsplit', '|', 2)
    self.checkequal(['a', 'b', 'c', 'd'], 'a|b|c|d', 'rsplit', '|', 3)
    self.checkequal(['a', 'b', 'c', 'd'], 'a|b|c|d', 'rsplit', '|', 4)
    self.checkequal(['a', 'b', 'c', 'd'], 'a|b|c|d', 'rsplit', '|', (sys.maxint - 100))
    self.checkequal(['a|b|c|d'], 'a|b|c|d', 'rsplit', '|', 0)
    self.checkequal(['a||b||c', '', 'd'], 'a||b||c||d', 'rsplit', '|', 2)
    self.checkequal(['', ' begincase'], '| begincase', 'rsplit', '|')
    self.checkequal(['endcase ', ''], 'endcase |', 'rsplit', '|')
    self.checkequal(['', 'bothcase', ''], '|bothcase|', 'rsplit', '|')
    self.checkequal(['a\x00\x00b', 'c', 'd'], 'a\x00\x00b\x00c\x00d', 'rsplit', '\x00', 2)
    self.checkequal((['a'] * 20), ('a|' * 20)[:(-1)], 'rsplit', '|')
    self.checkequal((['a|a|a|a|a'] + (['a'] * 15)), ('a|' * 20)[:(-1)], 'rsplit', '|', 15)
    self.checkequal(['a', 'b', 'c', 'd'], 'a//b//c//d', 'rsplit', '//')
    self.checkequal(['a//b//c', 'd'], 'a//b//c//d', 'rsplit', '//', 1)
    self.checkequal(['a//b', 'c', 'd'], 'a//b//c//d', 'rsplit', '//', 2)
    self.checkequal(['a', 'b', 'c', 'd'], 'a//b//c//d', 'rsplit', '//', 3)
    self.checkequal(['a', 'b', 'c', 'd'], 'a//b//c//d', 'rsplit', '//', 4)
    self.checkequal(['a', 'b', 'c', 'd'], 'a//b//c//d', 'rsplit', '//', (sys.maxint - 5))
    self.checkequal(['a//b//c//d'], 'a//b//c//d', 'rsplit', '//', 0)
    self.checkequal(['a////b////c', '', 'd'], 'a////b////c////d', 'rsplit', '//', 2)
    self.checkequal(['', ' begincase'], 'test begincase', 'rsplit', 'test')
    self.checkequal(['endcase ', ''], 'endcase test', 'rsplit', 'test')
    self.checkequal(['', ' bothcase ', ''], 'test bothcase test', 'rsplit', 'test')
    self.checkequal(['ab', 'c'], 'abbbc', 'rsplit', 'bb')
    self.checkequal(['', ''], 'aaa', 'rsplit', 'aaa')
    self.checkequal(['aaa'], 'aaa', 'rsplit', 'aaa', 0)
    self.checkequal(['ab', 'ab'], 'abbaab', 'rsplit', 'ba')
    self.checkequal(['aaaa'], 'aaaa', 'rsplit', 'aab')
    self.checkequal([''], '', 'rsplit', 'aaa')
    self.checkequal(['aa'], 'aa', 'rsplit', 'aaa')
    self.checkequal(['bbob', 'A'], 'bbobbbobbA', 'rsplit', 'bbobb')
    self.checkequal(['', 'B', 'A'], 'bbobbBbbobbA', 'rsplit', 'bbobb')
    self.checkequal((['a'] * 20), ('aBLAH' * 20)[:(-4)], 'rsplit', 'BLAH')
    self.checkequal((['a'] * 20), ('aBLAH' * 20)[:(-4)], 'rsplit', 'BLAH', 19)
    self.checkequal((['aBLAHa'] + (['a'] * 18)), ('aBLAH' * 20)[:(-4)], 'rsplit', 'BLAH', 18)
    self.checkequal([u'a b', u'c', u'd'], 'a b c d', 'rsplit', u' ', 2)
    self.checkraises(TypeError, 'hello', 'rsplit', 42, 42, 42)
    self.checkraises(ValueError, 'hello', 'rsplit', '')
    self.checkraises(ValueError, 'hello', 'rsplit', '', 0)
