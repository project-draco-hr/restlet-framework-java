{
  Constructor<?> constructor=RootResourceClass.findJaxRsConstructor(providerClass);
  Object provider;
  try {
    provider=RootResourceClass.createInstance(constructor,null,null,null,null,authenticator);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException("Provider could not be instantiated: " + e.getMessage(),e);
  }
  boolean used=false;
  if (asReader && provider instanceof javax.ws.rs.ext.MessageBodyReader<?>) {
    this.messageBodyReaders.add(new MessageBodyReader((javax.ws.rs.ext.MessageBodyReader<?>)provider));
    used=true;
  }
  if (asWriter && provider instanceof javax.ws.rs.ext.MessageBodyWriter<?>) {
    this.messageBodyWriters.add(new MessageBodyWriter((javax.ws.rs.ext.MessageBodyWriter<?>)provider));
  }
 else   if (!used) {
    throw new IllegalArgumentException("This class is neither a MessageBodyReader nor a MessageBodyWriter");
  }
}
