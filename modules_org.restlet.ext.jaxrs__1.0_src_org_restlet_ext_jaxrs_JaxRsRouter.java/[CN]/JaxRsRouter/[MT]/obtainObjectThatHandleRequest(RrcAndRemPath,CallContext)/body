{
  RemainingPath u=rrcAndRemPath.u;
  RootResourceClass resClass=rrcAndRemPath.rrc;
  PathRegExp rMatch=resClass.getPathRegExp();
  ResourceObject o;
  try {
    o=resClass.createInstance(callContext,this);
  }
 catch (  InstantiateParameterException e) {
    throw new WebApplicationException(e,404);
  }
catch (  WebApplicationException e) {
    throw e;
  }
catch (  Exception e) {
    throw handleExecption(e,null,callContext,"Could not create new instance of root resource class");
  }
  for (; ; ) {
    if (u.isEmptyOrSlash()) {
      return new ResObjAndRemPath(o,u);
    }
    Collection<ResourceMethodOrLocator> eWithMethod=new ArrayList<ResourceMethodOrLocator>();
    for (    ResourceMethodOrLocator methodOrLocator : resClass.getSubResourceMethodsAndLocators()) {
      MatchingResult matchResult=methodOrLocator.getPathRegExp().match(u);
      if (matchResult == null)       continue;
      if (!Util.isEmptyOrSlash(matchResult.getFinalMatchingGroup()))       continue;
      eWithMethod.add(methodOrLocator);
    }
    if (eWithMethod.isEmpty())     throwResourceNotFound(o,u);
    ResourceMethodOrLocator firstMeth=getFirstMethOrLocByNumberOfLiteralCharactersAndByNumberOfCapturingGroups(eWithMethod);
    rMatch=firstMeth.getPathRegExp();
    MatchingResult matchingResult=rMatch.match(u);
    addMrVarsToMap(matchingResult,callContext);
    if (firstMeth instanceof SubResourceMethod)     return new ResObjAndRemPath(o,u);
    u=matchingResult.getFinalCapturingGroup();
    SubResourceLocator subResourceLocator=(SubResourceLocator)firstMeth;
    try {
      o=subResourceLocator.createSubResource(o,callContext,this);
    }
 catch (    WebApplicationException e) {
      throw e;
    }
catch (    InstantiateParameterException e) {
      throw new WebApplicationException(e,404);
    }
catch (    Exception e) {
      throw handleExecption(e,subResourceLocator,callContext,"Could not create new instance of root resource class");
    }
  }
}
