{
  ScriptSource.ScriptDescriptor<CompositeScript> scriptDescriptor=this.resource.getScriptSource().getScriptDescriptor(name);
  CompositeScript script=scriptDescriptor.getScript();
  if (script == null) {
    String text=scriptDescriptor.getText();
    if (scriptEngineName != null) {
      text=CompositeScript.DEFAULT_DELIMITER1_START + scriptEngineName + " "+ text+ CompositeScript.DEFAULT_DELIMITER1_END;
    }
    script=new CompositeScript(text,this.resource.getScriptEngineManager(),this.resource.getDefaultScriptEngineName(),this.resource.getScriptSource(),this.resource.isAllowCompilation());
    CompositeScript existing=scriptDescriptor.setScriptIfAbsent(script);
    if (existing != null) {
      script=existing;
    }
  }
  script.run(false,this.resource.getWriter(),this.resource.getErrorWriter(),true,this.compositeScriptContext,this,this.resource.getScriptContextController());
}
