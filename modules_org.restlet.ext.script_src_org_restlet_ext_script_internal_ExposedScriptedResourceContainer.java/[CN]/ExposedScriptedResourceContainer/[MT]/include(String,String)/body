{
  ScriptSource.ScriptDescriptor<EmbeddedScript> scriptDescriptor=this.resource.getScriptSource().getScriptDescriptor(name);
  EmbeddedScript script=scriptDescriptor.getScript();
  if (script == null) {
    String text=scriptDescriptor.getText();
    if (scriptEngineName != null) {
      text=EmbeddedScript.DEFAULT_DELIMITER1_START + scriptEngineName + " "+ text+ EmbeddedScript.DEFAULT_DELIMITER1_END;
    }
    script=new EmbeddedScript(text,this.resource.getScriptEngineManager(),this.resource.getDefaultScriptEngineName(),this.resource.getScriptSource(),this.resource.isAllowCompilation());
    scriptDescriptor.setScriptIfAbsent(script);
  }
  script.run(false,this.resource.getWriter(),this.resource.getErrorWriter(),true,this.embeddedScriptContext,this,this.resource.getScriptContextController());
}
