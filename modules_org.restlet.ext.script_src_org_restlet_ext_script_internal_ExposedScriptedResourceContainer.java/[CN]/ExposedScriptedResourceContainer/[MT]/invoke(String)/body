{
  String name=ScriptUtils.getRelativePart(this.resource.getRequest(),this.resource.getDefaultName());
  try {
    ScriptSource.ScriptDescriptor<CompositeScript> scriptDescriptor=this.resource.getScriptSource().getScriptDescriptor(name);
    CompositeScript script=scriptDescriptor.getScript();
    if (script == null) {
      String text=scriptDescriptor.getText();
      script=new CompositeScript(text,this.resource.getScriptEngineManager(),this.resource.getDefaultScriptEngineName(),this.resource.getScriptSource(),this.resource.isAllowCompilation());
      CompositeScript existing=scriptDescriptor.setScriptIfAbsent(script);
      if (existing != null) {
        script=existing;
      }
      script.run(false,this.resource.getWriter(),this.resource.getErrorWriter(),true,this.compositeScriptContext,this,this.resource.getScriptContextController());
    }
    return script.invoke(entryPointName,this,this.resource.getScriptContextController());
  }
 catch (  FileNotFoundException e) {
    throw new ResourceException(Status.CLIENT_ERROR_NOT_FOUND,e);
  }
catch (  IOException e) {
    throw new ResourceException(e);
  }
catch (  ScriptException e) {
    throw new ResourceException(e);
  }
catch (  NoSuchMethodException e) {
    throw new ResourceException(e);
  }
}
