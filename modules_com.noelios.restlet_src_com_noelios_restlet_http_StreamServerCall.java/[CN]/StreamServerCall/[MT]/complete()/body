{
  try {
    socket.getOutputStream().flush();
    ByteUtils.exhaust(getRequestEntityStream(getContentLength()));
    if (!socket.isClosed()) {
      socket.shutdownOutput();
      socket.close();
    }
  }
 catch (  IOException ex) {
    getLogger().log(Level.WARNING,"Unable to shutdown server socket",ex);
  }
}
