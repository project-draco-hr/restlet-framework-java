{
  if (responseEntityStream == null) {
    if (isResponseChunked() && isKeepAlive()) {
      responseEntityStream=new ChunkedOutputStream(new KeepAliveOutputStream(getResponseStream()));
    }
 else     if (isResponseChunked()) {
      responseEntityStream=new ChunkedOutputStream(getResponseStream());
    }
 else     if (isKeepAlive()) {
      responseEntityStream=new KeepAliveOutputStream(getResponseStream());
    }
 else {
      responseEntityStream=getResponseStream();
    }
  }
  return responseEntityStream;
}
