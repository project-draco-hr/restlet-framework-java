{
  beforeHandle(request,response);
  long startTime=System.currentTimeMillis();
  super.handle(request,response);
  int duration=(int)(System.currentTimeMillis() - startTime);
  if (this.logTemplate != null) {
    this.logger.log(Level.INFO,format(request,response));
  }
 else {
    this.logger.log(Level.INFO,formatDefault(request,response,duration));
  }
  afterHandle(request,response);
}
