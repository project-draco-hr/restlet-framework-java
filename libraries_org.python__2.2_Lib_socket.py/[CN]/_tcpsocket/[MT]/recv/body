def recv(self, n):
    try:
        if (not self.sock_impl):
            raise error(errno.ENOTCONN, 'Socket is not connected')
        if self.sock_impl.jchannel.isConnectionPending():
            self.sock_impl.jchannel.finishConnect()
        data = jarray.zeros(n, 'b')
        m = self.sock_impl.read(data)
        if (m == (-1)):
            return ''
        elif (m <= 0):
            if (self.mode == MODE_NONBLOCKING):
                raise would_block_error()
            return ''
        if (m < n):
            data = data[:m]
        return data.tostring()
    except java.lang.Exception as jlx:
        raise _map_exception(jlx)
