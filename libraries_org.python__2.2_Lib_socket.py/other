"\nThis is an updated socket module for use on JVMs > 1.4; it is derived from the\nold jython socket module.\nThe primary extra it provides is non-blocking support.\n\nXXX Restrictions:\n\n- Only INET sockets\n- No asynchronous behavior\n- No socket options\n- Can't do a very good gethostbyaddr() right...\nAMAK: 20050527: added socket timeouts\nAMAK: 20070515: Added non-blocking (asynchronous) support\nAMAK: 20070515: Added client-side SSL support\n"
_defaulttimeout = None
import errno
import jarray
import string
import sys
import threading
import time
import types
import java.io.BufferedInputStream
import java.io.BufferedOutputStream
import java.io.InterruptedIOException
import java.io.IOException
import java.lang.String
import java.lang.Exception
import java.net.DatagramPacket
import java.net.InetAddress
import java.net.InetSocketAddress
import java.net.Socket
import java.net.BindException
import java.net.ConnectException
import java.net.NoRouteToHostException
import java.net.PortUnreachableException
import java.net.ProtocolException
import java.net.SocketException
import java.net.SocketTimeoutException
import java.net.UnknownHostException
import java.nio.ByteBuffer
import java.nio.channels.DatagramChannel
import java.nio.channels.ServerSocketChannel
import java.nio.channels.SocketChannel
import java.nio.channels.AlreadyConnectedException
import java.nio.channels.AsynchronousCloseException
import java.nio.channels.CancelledKeyException
import java.nio.channels.ClosedByInterruptException
import java.nio.channels.ClosedChannelException
import java.nio.channels.ClosedSelectorException
import java.nio.channels.ConnectionPendingException
import java.nio.channels.IllegalBlockingModeException
import java.nio.channels.IllegalSelectorException
import java.nio.channels.NoConnectionPendingException
import java.nio.channels.NonReadableChannelException
import java.nio.channels.NonWritableChannelException
import java.nio.channels.NotYetBoundException
import java.nio.channels.NotYetConnectedException
import java.nio.channels.UnresolvedAddressException
import java.nio.channels.UnsupportedAddressTypeException
import javax.net.ssl.SSLSocketFactory
import org.python.core.PyFile
ALL = None
_exception_map = {(java.io.IOException, ALL): error(errno.ECONNRESET, 'Software caused connection abort'), (java.io.InterruptedIOException, ALL): timeout('timed out'), (java.net.BindException, ALL): error(errno.EADDRINUSE, 'Address already in use'), (java.net.ConnectException, ALL): error(errno.ECONNREFUSED, 'Connection refused'), (java.net.NoRouteToHostException, ALL): error((-1), 'Unmapped exception: java.net.NoRouteToHostException'), (java.net.PortUnreachableException, ALL): error((-1), 'Unmapped exception: java.net.PortUnreachableException'), (java.net.ProtocolException, ALL): error((-1), 'Unmapped exception: java.net.ProtocolException'), (java.net.SocketException, ALL): error((-1), 'Unmapped exception: java.net.SocketException'), (java.net.SocketTimeoutException, ALL): timeout('timed out'), (java.net.UnknownHostException, ALL): gaierror(errno.EGETADDRINFOFAILED, 'getaddrinfo failed'), (java.nio.channels.AlreadyConnectedException, ALL): error(errno.EISCONN, 'Socket is already connected'), (java.nio.channels.AsynchronousCloseException, ALL): error((-1), 'Unmapped exception: java.nio.AsynchronousCloseException'), (java.nio.channels.CancelledKeyException, ALL): error((-1), 'Unmapped exception: java.nio.CancelledKeyException'), (java.nio.channels.ClosedByInterruptException, ALL): error((-1), 'Unmapped exception: java.nio.ClosedByInterruptException'), (java.nio.channels.ClosedChannelException, ALL): error(errno.EPIPE, 'Socket closed'), (java.nio.channels.ClosedSelectorException, ALL): error((-1), 'Unmapped exception: java.nio.ClosedSelectorException'), (java.nio.channels.ConnectionPendingException, ALL): error((-1), 'Unmapped exception: java.nio.ConnectionPendingException'), (java.nio.channels.IllegalBlockingModeException, ALL): error((-1), 'Unmapped exception: java.nio.IllegalBlockingModeException'), (java.nio.channels.IllegalSelectorException, ALL): error((-1), 'Unmapped exception: java.nio.IllegalSelectorException'), (java.nio.channels.NoConnectionPendingException, ALL): error((-1), 'Unmapped exception: java.nio.NoConnectionPendingException'), (java.nio.channels.NonReadableChannelException, ALL): error((-1), 'Unmapped exception: java.nio.NonReadableChannelException'), (java.nio.channels.NonWritableChannelException, ALL): error((-1), 'Unmapped exception: java.nio.NonWritableChannelException'), (java.nio.channels.NotYetBoundException, ALL): error((-1), 'Unmapped exception: java.nio.NotYetBoundException'), (java.nio.channels.NotYetConnectedException, ALL): error((-1), 'Unmapped exception: java.nio.NotYetConnectedException'), (java.nio.channels.UnresolvedAddressException, ALL): gaierror(errno.EGETADDRINFOFAILED, 'getaddrinfo failed'), (java.nio.channels.UnsupportedAddressTypeException, ALL): error((-1), 'Unmapped exception: java.nio.UnsupportedAddressTypeException'), }
MODE_BLOCKING = 'block'
MODE_NONBLOCKING = 'nonblock'
MODE_TIMEOUT = 'timeout'
_permitted_modes = (MODE_BLOCKING, MODE_NONBLOCKING, MODE_TIMEOUT)
SHUT_RD = 0
SHUT_WR = 1
SHUT_RDWR = 2
__all__ = ['AF_INET', 'SO_REUSEADDR', 'SOCK_DGRAM', 'SOCK_RAW', 'SOCK_RDM', 'SOCK_SEQPACKET', 'SOCK_STREAM', 'SOL_SOCKET', 'SocketType', 'SocketTypes', 'error', 'herror', 'gaierror', 'timeout', 'getfqdn', 'gethostbyaddr', 'gethostbyname', 'gethostname', 'socket', 'getaddrinfo', 'getdefaulttimeout', 'setdefaulttimeout', 'has_ipv6', 'htons', 'htonl', 'ntohs', 'ntohl', 'SHUT_RD', 'SHUT_WR', 'SHUT_RDWR']
AF_INET = 2
SOCK_DGRAM = 1
SOCK_STREAM = 2
SOCK_RAW = 3
SOCK_RDM = 4
SOCK_SEQPACKET = 5
SOL_SOCKET = 65535
SO_REUSEADDR = 4
has_ipv6 = 1
SocketType = _tcpsocket
SocketTypes = [_tcpsocket, _udpsocket]
if (__name__ == '__main__'):
    test()
