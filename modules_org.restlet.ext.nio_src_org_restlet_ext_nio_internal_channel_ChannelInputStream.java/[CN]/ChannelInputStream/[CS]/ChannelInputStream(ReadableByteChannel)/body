{
  this.channel=channel;
  if (channel instanceof ReadableSelectionChannel) {
    this.selectionChannel=(ReadableSelectionChannel)channel;
    this.selectableChannel=null;
  }
 else   if (channel instanceof SelectableChannel) {
    this.selectionChannel=null;
    this.selectableChannel=(SelectableChannel)channel;
  }
 else   if (channel instanceof SelectionChannel) {
    this.selectionChannel=(SelectionChannel)channel;
    this.selectableChannel=null;
  }
 else {
    this.selectionChannel=null;
    this.selectableChannel=null;
  }
  this.buffer=new Buffer(IoUtils.BUFFER_SIZE);
  this.endReached=false;
  this.selectionRegistration=null;
}
