{
  Status result=null;
  final Representation entity=request.isEntityAvailable() ? request.getEntity() : null;
  try {
    if (entity != null) {
      final ConnectorService connectorService=getConnectorService(request);
      if (connectorService != null) {
        connectorService.beforeSend(entity);
      }
      final OutputStream rs=getRequestEntityStream();
      final WritableByteChannel wbc=getRequestEntityChannel();
      if (wbc != null) {
        entity.write(wbc);
      }
 else       if (rs != null) {
        entity.write(rs);
        rs.flush();
      }
      if (connectorService != null) {
        connectorService.afterSend(entity);
      }
      if (rs != null) {
        rs.close();
      }
 else       if (wbc != null) {
        wbc.close();
      }
    }
    result=new Status(getStatusCode(),null,getReasonPhrase(),null);
  }
 catch (  final IOException ioe) {
    getHelper().getLogger().log(Level.WARNING,"An error occured during the communication with the remote HTTP server.",ioe);
    result=new Status(Status.CONNECTOR_ERROR_COMMUNICATION,ioe);
  }
 finally {
    if (entity != null) {
      entity.release();
    }
  }
  return result;
}
