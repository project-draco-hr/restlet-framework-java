{
  Status result=null;
  try {
    Representation entity=request.isEntityAvailable() ? request.getEntity() : null;
    if (entity != null) {
      ConnectorService connectorService=getConnectorService(request);
      if (connectorService != null)       connectorService.beforeSend(entity);
      OutputStream rs=getRequestEntityStream();
      WritableByteChannel wbc=getRequestEntityChannel();
      if (wbc != null) {
        if (entity != null) {
          entity.write(wbc);
        }
      }
 else       if (rs != null) {
        if (entity != null) {
          entity.write(rs);
        }
        rs.flush();
      }
      if (connectorService != null)       connectorService.afterSend(entity);
      if (rs != null) {
        rs.close();
      }
 else       if (wbc != null) {
        wbc.close();
      }
    }
    result=new Status(getStatusCode(),null,getReasonPhrase(),null);
  }
 catch (  IOException ioe) {
    getHelper().getLogger().log(Level.WARNING,"An error occured during the communication with the remote HTTP server.",ioe);
    result=new Status(Status.CONNECTOR_ERROR_COMMUNICATION,"Unable to complete the HTTP call due to a communication error with the remote server. " + ioe.getMessage());
  }
 finally {
    Representation entity=request.isEntityAvailable() ? request.getEntity() : null;
    if (entity != null) {
      entity.release();
    }
  }
  return result;
}
