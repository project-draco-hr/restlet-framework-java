def __init__(self, dirname, factory=rfc822.Message):
    self.dirname = dirname
    self.factory = factory
    newdir = os.path.join(self.dirname, 'new')
    boxes = [os.path.join(newdir, f) for f in os.listdir(newdir) if (f[0] != '.')]
    curdir = os.path.join(self.dirname, 'cur')
    boxes += [os.path.join(curdir, f) for f in os.listdir(curdir) if (f[0] != '.')]
    self.boxes = boxes
