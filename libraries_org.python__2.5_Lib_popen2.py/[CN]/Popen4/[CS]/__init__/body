def __init__(self, cmd, bufsize=(-1)):
    PIPE = subprocess.PIPE
    self._popen = subprocess.Popen(cmd, bufsize=bufsize, shell=isinstance(cmd, basestring), stdin=PIPE, stdout=PIPE, stderr=subprocess.STDOUT)
    self._setup(cmd)
