{
  if (request == null) {
    throw new IllegalArgumentException("The Restlet Request must not be null");
  }
  if (response == null) {
    throw new IllegalArgumentException("The Restlet Response must not be null");
  }
  if (roleChecker == null) {
    throw new IllegalArgumentException("The RoleChecker must not be null.");
  }
  final Reference referenceCut=request.getResourceRef();
  if (referenceCut == null) {
    throw new IllegalArgumentException("The request reference must not be null");
  }
  if (referenceCut.getBaseRef() == null) {
    throw new IllegalArgumentException("The request reference must contains a baseRef");
  }
  final Reference referenceOriginal=request.getOriginalRef();
  if (referenceOriginal == null) {
    throw new IllegalArgumentException("The request.originalRef must not be null");
  }
  this.referenceCut=referenceCut;
  this.referenceOriginal=referenceOriginal;
  this.readOnly=false;
  this.request=request;
  this.response=response;
  this.roleChecker=roleChecker;
  this.accMediaTypes=SortedMetadata.getForMediaTypes(request.getClientInfo().getAcceptedMediaTypes());
}
