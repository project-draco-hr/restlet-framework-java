{
  this.handler=handler;
  this.targetUri=new Reference(handler.getRootUri() + resourcePath).getTargetRef().toString();
  if (!this.targetUri.startsWith(handler.getRootUri())) {
    this.targetUri=handler.getRootUri();
  }
  Call call=getDirectory().getContextClient().get(this.targetUri);
  if ((call.getOutput() != null) && call.getOutput().getMediaType().equals(MediaTypes.TEXT_URI_LIST)) {
    this.targetDirectory=true;
    this.directoryContent=new ReferenceList(call.getOutput());
    if (getDirectory().getIndexName() != null) {
      this.directoryUri=this.targetUri;
      this.baseName=getDirectory().getIndexName();
      this.targetUri=this.directoryUri + this.baseName;
    }
  }
 else {
    this.targetDirectory=false;
    int lastSlashIndex=targetUri.lastIndexOf('/');
    if (lastSlashIndex == -1) {
      this.directoryUri="";
      this.baseName=targetUri;
    }
 else {
      this.directoryUri=targetUri.substring(0,lastSlashIndex + 1);
      this.baseName=targetUri.substring(lastSlashIndex + 1);
    }
    call=getDirectory().getContextClient().get(this.directoryUri);
    if ((call.getOutput() != null) && call.getOutput().getMediaType().equals(MediaTypes.TEXT_URI_LIST)) {
      this.directoryContent=new ReferenceList(call.getOutput());
    }
  }
  int firstDotIndex=this.baseName.indexOf('.');
  if (firstDotIndex != -1) {
    this.baseExtensions=getExtensions(this.baseName);
    this.baseName=this.baseName.substring(0,firstDotIndex);
  }
  logger.info("Converted base path: " + this.targetUri);
  logger.info("Converted base name: " + this.baseName);
}
