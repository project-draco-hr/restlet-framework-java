{
  ReferenceList result=new ReferenceList(0);
  try {
    Request contextCall=new Request(Method.GET,this.targetUri);
    contextCall.getClient().getAcceptedMediaTypes().add(new Preference<MediaType>(MediaType.TEXT_URI_LIST));
    Response contextResponse=getClient().handle(contextCall);
    if (contextResponse.getOutput() != null) {
      ReferenceList listVariants=new ReferenceList(contextResponse.getOutput());
      Set<String> extensions=null;
      String entryUri;
      String fullEntryName;
      String baseEntryName;
      int lastSlashIndex;
      int firstDotIndex;
      for (      Reference ref : listVariants) {
        entryUri=ref.toString();
        lastSlashIndex=entryUri.lastIndexOf('/');
        fullEntryName=(lastSlashIndex == -1) ? entryUri : entryUri.substring(lastSlashIndex + 1);
        baseEntryName=fullEntryName;
        if (this.handler.isNegotiationEnabled()) {
          firstDotIndex=fullEntryName.indexOf('.');
          if (firstDotIndex != -1) {
            baseEntryName=fullEntryName.substring(0,firstDotIndex);
          }
        }
        if (baseEntryName.equals(this.baseName)) {
          boolean validVariant=true;
          if (this.handler.isNegotiationEnabled()) {
            extensions=getExtensions(fullEntryName);
            validVariant=(((extensions == null) && (this.baseExtensions == null)) || (this.baseExtensions == null) || extensions.containsAll(this.baseExtensions));
            if (unique && validVariant) {
              validVariant=this.baseExtensions.containsAll(extensions);
            }
          }
          if (validVariant) {
            result.add(ref);
          }
        }
      }
    }
  }
 catch (  IOException ioe) {
    logger.log(Level.WARNING,"Unable to get resource variants",ioe);
  }
  return result;
}
