def _mk_bitmap(bits):
    data = []
    dataappend = data.append
    if (_sre.CODESIZE == 2):
        start = (1, 0)
    else:
        start = (1L, 0L)
    (m, v) = start
    for c in bits:
        if c:
            v = (v + m)
        m = (m + m)
        if (m > MAXCODE):
            dataappend(v)
            (m, v) = start
    return data
