def test_compressincremental(self):
    data = (HAMLET_SCENE * 128)
    co = zlib.compressobj()
    bufs = []
    for i in range(0, len(data), 256):
        bufs.append(co.compress(data[i:(i + 256)]))
    bufs.append(co.flush())
    combuf = ''.join(bufs)
    dco = zlib.decompressobj()
    y1 = dco.decompress(''.join(bufs))
    y2 = dco.flush()
    self.assertEqual(data, (y1 + y2))
