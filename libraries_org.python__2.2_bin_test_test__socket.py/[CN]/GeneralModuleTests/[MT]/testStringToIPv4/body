def testStringToIPv4(self):
    if (not hasattr(socket, 'inet_ntop')):
        return
    from socket import inet_ntoa as f, inet_ntop, AF_INET
    g = (lambda a: inet_ntop(AF_INET, a))
    self.assertEquals('1.0.1.0', f('\x01\x00\x01\x00'))
    self.assertEquals('170.85.170.85', f('\xaaU\xaaU'))
    self.assertEquals('255.255.255.255', f('\xff\xff\xff\xff'))
    self.assertEquals('1.2.3.4', f('\x01\x02\x03\x04'))
    self.assertEquals('1.0.1.0', g('\x01\x00\x01\x00'))
    self.assertEquals('170.85.170.85', g('\xaaU\xaaU'))
    self.assertEquals('255.255.255.255', g('\xff\xff\xff\xff'))
