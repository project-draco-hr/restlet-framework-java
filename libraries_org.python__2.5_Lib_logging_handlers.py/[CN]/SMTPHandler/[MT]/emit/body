def emit(self, record):
    '\n        Emit a record.\n\n        Format the record and send it to the specified addressees.\n        '
    try:
        import smtplib
        try:
            from email.Utils import formatdate
        except:
            formatdate = self.date_time
        port = self.mailport
        if (not port):
            port = smtplib.SMTP_PORT
        smtp = smtplib.SMTP(self.mailhost, port)
        msg = self.format(record)
        msg = ('From: %s\r\nTo: %s\r\nSubject: %s\r\nDate: %s\r\n\r\n%s' % (self.fromaddr, string.join(self.toaddrs, ','), self.getSubject(record), formatdate(), msg))
        smtp.sendmail(self.fromaddr, self.toaddrs, msg)
        smtp.quit()
    except (KeyboardInterrupt, SystemExit):
        raise
    except:
        self.handleError(record)
