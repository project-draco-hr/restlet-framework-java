{
  if ((getState() != ConnectionState.CLOSING) && (getState() != ConnectionState.CLOSED)) {
    getInboundWay().registerInterest(selector);
    getOutboundWay().registerInterest(selector);
    int socketInterestOps=getSocketInterestOps();
    if (socketInterestOps > 0) {
      if (getSocketKey() == null) {
        try {
          setSocketKey(getSocketChannel().register(selector,socketInterestOps,this));
        }
 catch (        ClosedChannelException cce) {
          onError("Unable to register NIO interest operations for this connection",cce,Status.CONNECTOR_ERROR_COMMUNICATION);
        }
      }
 else {
        getSocketKey().interestOps(socketInterestOps);
      }
    }
 else {
      if (getSocketKey() != null) {
        getSocketKey().cancel();
        getSocketKey().attach(null);
        setSocketKey(null);
      }
    }
  }
}
