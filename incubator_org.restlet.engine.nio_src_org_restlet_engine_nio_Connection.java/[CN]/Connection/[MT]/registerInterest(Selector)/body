{
  int socketInterestOps=getSocketInterestOps();
  if (socketInterestOps > 0) {
    if (getSocketKey() == null) {
      try {
        setSocketKey(getSocketChannel().register(selector,socketInterestOps,this));
      }
 catch (      ClosedChannelException cce) {
        getLogger().log(Level.WARNING,"Unable to register NIO interest operations for this connection",cce);
        onError();
      }
    }
 else {
      getSocketKey().interestOps(socketInterestOps);
    }
  }
 else {
    if (getSocketKey() != null) {
      getSocketKey().cancel();
      getSocketKey().attach(null);
      setSocketKey(null);
    }
  }
  getInboundWay().registerInterest(selector);
  getOutboundWay().registerInterest(selector);
}
