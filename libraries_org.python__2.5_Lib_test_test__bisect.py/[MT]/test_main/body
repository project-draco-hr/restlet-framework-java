def test_main(verbose=None):
    from test import test_bisect
    from types import BuiltinFunctionType
    import sys
    test_classes = [TestBisect, TestInsort]
    if isinstance(bisect_left, BuiltinFunctionType):
        test_classes.append(TestErrorHandling)
    test_support.run_unittest(*test_classes)
    test_support.run_doctest(test_bisect, verbose)
    if (verbose and hasattr(sys, 'gettotalrefcount')):
        import gc
        counts = ([None] * 5)
        for i in xrange(len(counts)):
            test_support.run_unittest(*test_classes)
            gc.collect()
            counts[i] = sys.gettotalrefcount()
        print counts
