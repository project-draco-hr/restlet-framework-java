def test_bug1229429(self):
    if (not hasattr(sys, 'getrefcount')):
        return

    def f():
        pass
    r = f.__reversed__ = object()
    rc = sys.getrefcount(r)
    for i in range(10):
        try:
            reversed(f)
        except TypeError:
            pass
        else:
            self.fail("non-callable __reversed__ didn't raise!")
    self.assertEqual(rc, sys.getrefcount(r))
