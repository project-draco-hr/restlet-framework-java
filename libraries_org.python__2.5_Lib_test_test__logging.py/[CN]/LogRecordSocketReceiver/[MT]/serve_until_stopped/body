def serve_until_stopped(self):
    if sys.platform.startswith('java'):
        self.socket.setblocking(0)
    while (not self.abort):
        (rd, wr, ex) = select.select([self.socket.fileno()], [], [], self.timeout)
        if rd:
            self.handle_request()
    socketDataProcessed.set()
    self.server_close()
