def test2():
    logger = logging.getLogger('')
    sh = logger.handlers[0]
    sh.close()
    logger.removeHandler(sh)
    mh = logging.handlers.MemoryHandler(10, logging.WARNING, sh)
    logger.setLevel(logging.DEBUG)
    logger.addHandler(mh)
    message('-- logging at DEBUG, nothing should be seen yet --')
    logger.debug('Debug message')
    message('-- logging at INFO, nothing should be seen yet --')
    logger.info('Info message')
    message('-- logging at WARNING, 3 messages should be seen --')
    logger.warn('Warn message')
    for i in xrange(102):
        message((MSG % i))
        logger.info('Info index = %d', i)
    mh.close()
    logger.removeHandler(mh)
    logger.addHandler(sh)
