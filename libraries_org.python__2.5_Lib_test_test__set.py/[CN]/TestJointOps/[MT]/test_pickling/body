def test_pickling(self):
    for i in (0, 1, 2):
        p = pickle.dumps(self.s, i)
        dup = pickle.loads(p)
        self.assertEqual(self.s, dup, ('%s != %s' % (self.s, dup)))
        if (type(self.s) not in (set, frozenset)):
            self.s.x = 10
            p = pickle.dumps(self.s)
            dup = pickle.loads(p)
            self.assertEqual(self.s.x, dup.x)
