def _test_urls(self, urls, handlers):
    import socket
    import time
    import logging
    debug = logging.getLogger('test_urllib2').debug
    urllib2.install_opener(urllib2.build_opener(*handlers))
    for url in urls:
        if isinstance(url, tuple):
            (url, req, expected_err) = url
        else:
            req = expected_err = None
        debug(url)
        try:
            f = urllib2.urlopen(url, req)
        except (IOError, socket.error, OSError) as err:
            debug(err)
            if expected_err:
                msg = ("Didn't get expected error(s) %s for %s %s, got %s" % (expected_err, url, req, err))
                self.assert_(isinstance(err, expected_err), msg)
        else:
            buf = f.read()
            f.close()
            debug(('read %d bytes' % len(buf)))
        debug('******** next url coming up...')
        time.sleep(0.1)
