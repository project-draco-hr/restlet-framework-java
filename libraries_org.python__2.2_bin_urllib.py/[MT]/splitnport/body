def splitnport(host, defport=(-1)):
    "Split host and port, returning numeric port.\n    Return given default port if no ':' found; defaults to -1.\n    Return numerical port if a valid number are found after ':'.\n    Return None if ':' but not a valid number."
    global _nportprog
    if (_nportprog is None):
        import re
        _nportprog = re.compile('^(.*):(.*)$')
    match = _nportprog.match(host)
    if match:
        (host, port) = match.group(1, 2)
        try:
            if (not port):
                raise ValueError, 'no digits'
            nport = int(port)
        except ValueError:
            nport = None
        return (host, nport)
    return (host, defport)
