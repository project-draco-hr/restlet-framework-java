def __init__(self, proxies=None, **x509):
    if (proxies is None):
        proxies = getproxies()
    assert hasattr(proxies, 'has_key'), 'proxies must be a mapping'
    self.proxies = proxies
    self.key_file = x509.get('key_file')
    self.cert_file = x509.get('cert_file')
    self.addheaders = [('User-agent', self.version)]
    self.__tempfiles = []
    self.__unlink = os.unlink
    self.tempcache = None
    self.ftpcache = ftpcache
