def _command_complete(self, name, tag):
    self._check_bye()
    try:
        (typ, data) = self._get_tagged_response(tag)
    except self.abort as val:
        raise self.abort(('command: %s => %s' % (name, val)))
    except self.error as val:
        raise self.error(('command: %s => %s' % (name, val)))
    self._check_bye()
    if (typ == 'BAD'):
        raise self.error(('%s command error: %s %s' % (name, typ, data)))
    return (typ, data)
