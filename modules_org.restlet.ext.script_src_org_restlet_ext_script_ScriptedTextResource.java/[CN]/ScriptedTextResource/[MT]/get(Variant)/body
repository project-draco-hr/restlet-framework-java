{
  Request request=getRequest();
  String name=ScriptUtils.getRelativePart(request,getDefaultName());
  try {
    if (isSourceViewable() && TRUE.equals(request.getResourceRef().getQueryAsForm().getFirstValue(SOURCE))) {
      return new StringRepresentation(getScriptSource().getScriptDescriptor(name).getText());
    }
 else {
      ScriptedTextResourceContainer container=new ScriptedTextResourceContainer(this,variant,getCache());
      Representation representation=container.include(name);
      if (representation == null) {
        throw new ResourceException(Status.CLIENT_ERROR_NOT_FOUND);
      }
 else {
        return representation;
      }
    }
  }
 catch (  FileNotFoundException e) {
    throw new ResourceException(Status.CLIENT_ERROR_NOT_FOUND,e);
  }
catch (  IOException e) {
    throw new ResourceException(e);
  }
catch (  ScriptException e) {
    throw new ResourceException(e);
  }
}
