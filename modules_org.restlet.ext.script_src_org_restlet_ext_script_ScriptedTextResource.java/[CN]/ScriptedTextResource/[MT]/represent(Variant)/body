{
  Request request=getRequest();
  String name=ScriptUtils.getRelativePart(request,defaultName);
  try {
    if (sourceViewable && TRUE.equals(request.getResourceRef().getQueryAsForm().getFirstValue(SOURCE))) {
      return new StringRepresentation(scriptSource.getScriptDescriptor(name).getText());
    }
 else {
      ScriptedTextResourceContainer container=new ScriptedTextResourceContainer(variant,request,getResponse(),cache);
      Representation representation=container.include(name);
      if (representation == null) {
        throw new ResourceException(Status.CLIENT_ERROR_NOT_FOUND);
      }
 else {
        return representation;
      }
    }
  }
 catch (  FileNotFoundException x) {
    throw new ResourceException(Status.CLIENT_ERROR_NOT_FOUND,x);
  }
catch (  IOException x) {
    throw new ResourceException(x);
  }
catch (  ScriptException x) {
    throw new ResourceException(x);
  }
}
