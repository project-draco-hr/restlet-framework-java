{
  if (date == null) {
    throw new IllegalArgumentException("Date is null");
  }
  DateFormat formatter=null;
  if (FORMAT_RFC_3339.get(0).equals(format)) {
    formatter=new InternetDateFormat(TIMEZONE_GMT);
  }
 else {
    formatter=new SimpleDateFormat(format,Locale.US);
    formatter.setTimeZone(TIMEZONE_GMT);
  }
  return formatter.format(date);
}
