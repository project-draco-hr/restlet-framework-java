def hook_compressed(filename, mode):
    ext = os.path.splitext(filename)[1]
    if (ext == '.gz'):
        import gzip
        return gzip.open(filename, mode)
    elif (ext == '.bz2'):
        import bz2
        return bz2.BZ2File(filename, mode)
    else:
        return open(filename, mode)
