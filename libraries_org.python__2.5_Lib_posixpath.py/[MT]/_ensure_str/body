def _ensure_str(obj):
    'Ensure obj is a string, otherwise raise a TypeError'
    if isinstance(obj, basestring):
        return obj
    raise TypeError(('coercing to Unicode: need string or buffer, %s found' % _type_name(obj)))
