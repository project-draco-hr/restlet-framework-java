{
  Subject result=null;
  if (getRequest().getUserPrincipal() != null) {
    Set<Principal> principals=new CopyOnWriteArraySet<Principal>();
    Set<Object> pubCredentials=new CopyOnWriteArraySet<Object>();
    Set<Object> privCredentials=new CopyOnWriteArraySet<Object>();
    principals.add(getRequest().getUserPrincipal());
    result=new Subject(false,principals,pubCredentials,privCredentials);
  }
  return result;
}
