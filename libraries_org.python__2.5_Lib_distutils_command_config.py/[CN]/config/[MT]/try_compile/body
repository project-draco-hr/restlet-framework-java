def try_compile(self, body, headers=None, include_dirs=None, lang='c'):
    "Try to compile a source file built from 'body' and 'headers'.\n        Return true on success, false otherwise.\n        "
    from distutils.ccompiler import CompileError
    self._check_compiler()
    try:
        self._compile(body, headers, include_dirs, lang)
        ok = 1
    except CompileError:
        ok = 0
    log.info(((ok and 'success!') or 'failure.'))
    self._clean()
    return ok
