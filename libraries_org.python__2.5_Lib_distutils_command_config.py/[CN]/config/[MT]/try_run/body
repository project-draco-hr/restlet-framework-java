def try_run(self, body, headers=None, include_dirs=None, libraries=None, library_dirs=None, lang='c'):
    "Try to compile, link to an executable, and run a program\n        built from 'body' and 'headers'.  Return true on success, false\n        otherwise.\n        "
    from distutils.ccompiler import CompileError, LinkError
    self._check_compiler()
    try:
        (src, obj, exe) = self._link(body, headers, include_dirs, libraries, library_dirs, lang)
        self.spawn([exe])
        ok = 1
    except (CompileError, LinkError, DistutilsExecError):
        ok = 0
    log.info(((ok and 'success!') or 'failure.'))
    self._clean()
    return ok
