{
  boolean toArray=false;
  Collection<Object> coll=null;
  if (paramGenericType instanceof GenericArrayType) {
    GenericArrayType genericArrayType=(GenericArrayType)paramGenericType;
    paramClass=(Class<?>)genericArrayType.getGenericComponentType();
    coll=new ArrayList<Object>(1);
    toArray=true;
  }
 else   if (paramGenericType instanceof ParameterizedType) {
    ParameterizedType parameterizedType=(ParameterizedType)paramGenericType;
    coll=createColl(parameterizedType);
    paramClass=(Class<?>)parameterizedType.getActualTypeArguments()[0];
  }
  if (coll == null) {
    return convertParamValueFromParam(paramClass,paramValue,defaultValue,leaveEncoded);
  }
  while (paramValueIter.hasNext()) {
    String queryParamValue=paramValueIter.next();
    Object convertedValue=convertParamValueFromParam(paramClass,queryParamValue,defaultValue,leaveEncoded);
    if (convertedValue != null)     coll.add(convertedValue);
    defaultValue=null;
  }
  if (toArray)   return coll.toArray();
  return coll;
}
