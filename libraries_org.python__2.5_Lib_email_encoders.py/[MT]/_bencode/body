def _bencode(s):
    if (not s):
        return s
    hasnewline = (s[(-1)] == '\n')
    value = base64.encodestring(s)
    if ((not hasnewline) and (value[(-1)] == '\n')):
        return value[:(-1)]
    return value
