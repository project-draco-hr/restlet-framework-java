{
  setMessageState(MessageState.END);
  getMessages().remove(message);
  if (getConnection().isPersistent()) {
    if (getMessages().isEmpty()) {
      setIoState(IoState.IDLE);
    }
 else {
      setIoState(IoState.WRITE_INTEREST);
      setMessageState(MessageState.START_LINE);
    }
    if (!message.getStatus().isInformational() && !getConnection().isPipelining()) {
      getConnection().getInboundWay().setIoState(IoState.READ_INTEREST);
      getConnection().getInboundWay().setMessageState(MessageState.START_LINE);
    }
  }
}
