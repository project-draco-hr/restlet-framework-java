def _handle_text(self, msg):
    payload = msg.get_payload()
    if (payload is None):
        return
    if (not isinstance(payload, basestring)):
        raise TypeError(('string payload expected: %s' % type(payload)))
    if self._mangle_from_:
        payload = fcre.sub('>From ', payload)
    self._fp.write(payload)
