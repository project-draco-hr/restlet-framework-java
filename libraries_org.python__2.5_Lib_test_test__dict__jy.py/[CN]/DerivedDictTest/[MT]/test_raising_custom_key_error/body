def test_raising_custom_key_error(self):


    class CustomKeyError(KeyError):
        pass


    class DerivedDict(dict):

        def __getitem__(self, key):
            raise CustomKeyError('custom message')
    self.assertRaises(CustomKeyError, (lambda : DerivedDict()['foo']))
