{
  Logger log=Context.getCurrentLogger();
  try {
    String text=body.getText();
    log.info("Debug JSON body = " + text);
    StringRepresentation sr=new StringRepresentation(text);
    JsonRepresentation returned=new JsonRepresentation(sr);
    JSONObject answer=returned.getJsonObject();
    log.info("Got answer on JSON = " + answer.toString());
    String accessToken=null;
    if (answer.has(OAuthServerResource.ACCESS_TOKEN)) {
      accessToken=answer.getString(OAuthServerResource.ACCESS_TOKEN);
      log.info("AccessToken = " + accessToken);
    }
    String refreshToken=null;
    if (answer.has(OAuthServerResource.REFRESH_TOKEN)) {
      refreshToken=answer.getString(OAuthServerResource.REFRESH_TOKEN);
      log.info("RefreshToken = " + refreshToken);
    }
    long expiresIn=0;
    if (answer.has(OAuthServerResource.EXPIRES_IN)) {
      expiresIn=answer.getLong(OAuthServerResource.EXPIRES_IN);
      log.info("ExpiresIn = " + expiresIn);
    }
    return new OAuthUser(null,accessToken,refreshToken,expiresIn);
  }
 catch (  JSONException e) {
    log.log(Level.WARNING,"Error parsing JSON",e);
  }
catch (  IOException e) {
    log.log(Level.WARNING,"Error creating representation JSON",e);
  }
  return null;
}
