print '3. Operations'
print 'XXX Mostly not yet implemented'
print '3.1 Dictionary lookups fail if __cmp__() raises an exception'
d = {}
x1 = BadDictKey()
x2 = BadDictKey()
d[x1] = 1
for stmt in ['d[x2] = 2', 'z = d[x2]', 'x2 in d', 'd.has_key(x2)', 'd.get(x2)', 'd.setdefault(x2, 42)', 'd.pop(x2)', 'd.update({x2: 2})']:
    try:
        exec stmt
    except RuntimeError:
        print ('%s: caught the RuntimeError outside' % (stmt,))
    else:
        print '%s: No exception passed through!'
d = {}
for i in range(5):
    d[i] = i
for i in range(5):
    del d[i]
for i in range(5, 9):
    d[i] = i
d = {}
resizing = False
d[X()] = 1
d[X()] = 2
d[X()] = 3
d[X()] = 4
d[X()] = 5
resizing = True
d[9] = 6
print 'resize bugs not triggered.'
