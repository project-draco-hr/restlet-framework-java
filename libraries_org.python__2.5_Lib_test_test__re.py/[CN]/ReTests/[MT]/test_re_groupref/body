def test_re_groupref(self):
    self.assertEqual(re.match('^(\\|)?([^()]+)\\1$', '|a|').groups(), ('|', 'a'))
    self.assertEqual(re.match('^(\\|)?([^()]+)\\1?$', 'a').groups(), (None, 'a'))
    self.assertEqual(re.match('^(\\|)?([^()]+)\\1$', 'a|'), None)
    self.assertEqual(re.match('^(\\|)?([^()]+)\\1$', '|a'), None)
    self.assertEqual(re.match('^(?:(a)|c)(\\1)$', 'aa').groups(), ('a', 'a'))
    self.assertEqual(re.match('^(?:(a)|c)(\\1)?$', 'c').groups(), (None, None))
