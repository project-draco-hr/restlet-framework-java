def pickaddr(proto):
    if (proto == socket.AF_INET):
        return (host, pickport())
    else:
        fn = (TESTFN + str(pickport()))
        if (os.name == 'os2'):
            if (fn[1] == ':'):
                fn = fn[2:]
            if (fn[0] in (os.sep, os.altsep)):
                fn = fn[1:]
            fn = os.path.join('\\socket', fn)
            if (os.sep == '/'):
                fn = fn.replace(os.sep, os.altsep)
            else:
                fn = fn.replace(os.altsep, os.sep)
        testfiles.append(fn)
        return fn
