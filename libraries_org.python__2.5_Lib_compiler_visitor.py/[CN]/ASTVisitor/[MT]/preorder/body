def preorder(self, tree, visitor, *args):
    'Do preorder walk of tree using visitor'
    self.visitor = visitor
    visitor.visit = self.dispatch
    self.dispatch(tree, *args)
