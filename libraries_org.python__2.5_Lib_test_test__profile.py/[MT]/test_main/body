def test_main():
    global ticks
    ticks = 42000
    prof = profile.Profile(timer)
    prof.runctx('testfunc()', globals(), locals())
    assert (ticks == 43000), ticks
    st = pstats.Stats(prof)
    st.strip_dirs().sort_stats('stdname').print_stats()
    st.print_callees()
    st.print_callers()
