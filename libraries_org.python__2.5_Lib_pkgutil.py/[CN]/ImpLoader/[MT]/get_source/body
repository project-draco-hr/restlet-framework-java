def get_source(self, fullname=None):
    fullname = self._fix_name(fullname)
    if (self.source is None):
        mod_type = self.etc[2]
        if (mod_type == imp.PY_SOURCE):
            self._reopen()
            try:
                self.source = self.file.read()
            finally:
                self.file.close()
        elif (mod_type == imp.PY_COMPILED):
            if os.path.exists(self.filename[:(-1)]):
                f = open(self.filename[:(-1)], 'rU')
                try:
                    self.source = f.read()
                finally:
                    f.close()
        elif (mod_type == imp.PKG_DIRECTORY):
            self.source = self._get_delegate().get_source()
    return self.source
