def test_message_from_file_with_class(self):
    unless = self.failUnless


    class MyMessage(Message):
        pass
    fp = openfile('msg_01.txt')
    try:
        msg = email.message_from_file(fp, MyMessage)
    finally:
        fp.close()
    unless(isinstance(msg, MyMessage))
    fp = openfile('msg_02.txt')
    try:
        msg = email.message_from_file(fp, MyMessage)
    finally:
        fp.close()
    for subpart in msg.walk():
        unless(isinstance(subpart, MyMessage))
