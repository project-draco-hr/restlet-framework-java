{
  return new InputStream(){
    private boolean endReached=false;
    public int read() throws IOException {
      try {
        if (endReached)         return -1;
        int value=((Integer)queue.take()).intValue();
        endReached=(value == -1);
        return value;
      }
 catch (      InterruptedException ie) {
        throw new IOException("Interruption occurred while writing in the queue");
      }
    }
  }
;
}
