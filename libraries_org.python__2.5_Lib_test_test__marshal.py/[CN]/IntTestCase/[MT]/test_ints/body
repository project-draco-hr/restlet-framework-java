def test_ints(self):
    n = sys.maxint
    while n:
        for expected in ((- n), n):
            s = marshal.dumps(expected)
            got = marshal.loads(s)
            self.assertEqual(expected, got)
            self.assertEqual(expected, roundtrip(expected))
        n = (n >> 1)
    os.unlink(test_support.TESTFN)
