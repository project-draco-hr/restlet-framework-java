def test_unicode(self):
    for s in [u'', u'Andr\xe8 Previn', u'abc', (u' ' * 10000)]:
        new = marshal.loads(marshal.dumps(s))
        self.assertEqual(s, new)
        self.assertEqual(type(s), type(new))
        new = roundtrip(s)
        self.assertEqual(s, new)
        self.assertEqual(type(s), type(new))
    os.unlink(test_support.TESTFN)
