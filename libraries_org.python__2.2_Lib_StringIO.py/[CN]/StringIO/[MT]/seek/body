def seek(self, pos, mode=0):
    if self.closed:
        raise ValueError, 'I/O operation on closed file'
    if self.buflist:
        self.buf += ''.join(self.buflist)
        self.buflist = []
    if (mode == 1):
        pos += self.pos
    elif (mode == 2):
        pos += self.len
    self.pos = max(0, pos)
