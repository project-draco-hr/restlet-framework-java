{
  if (canEncode()) {
    OutputStream os=BioUtils.getOutputStream(writer,getCharacterSet());
    write(os);
    os.flush();
  }
 else {
    getWrappedRepresentation().write(writer);
  }
}
