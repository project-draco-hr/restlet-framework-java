def run_amock(app=hello_app, data='GET / HTTP/1.0\n\n'):
    server = make_server('', 80, app, MockServer, MockHandler)
    (inp, out, err, olderr) = (StringIO(data), StringIO(), StringIO(), sys.stderr)
    sys.stderr = err
    try:
        server.finish_request((inp, out), ('127.0.0.1', 8888))
    finally:
        sys.stderr = olderr
    return (out.getvalue(), err.getvalue())
