def testContentLength(self):

    def trivial_app1(e, s):
        s('200 OK', [])
        return [e['wsgi.url_scheme']]

    def trivial_app2(e, s):
        s('200 OK', [])(e['wsgi.url_scheme'])
        return []
    h = TestHandler()
    h.run(trivial_app1)
    self.assertEqual(h.stdout.getvalue(), 'Status: 200 OK\r\nContent-Length: 4\r\n\r\nhttp')
    h = TestHandler()
    h.run(trivial_app2)
    self.assertEqual(h.stdout.getvalue(), 'Status: 200 OK\r\n\r\nhttp')
