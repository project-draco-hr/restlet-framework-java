def test_expanduser(self):
    self.assertEqual(posixpath.expanduser('foo'), 'foo')
    try:
        import pwd
    except ImportError:
        pass
    else:
        self.assert_(isinstance(posixpath.expanduser('~/'), basestring))
        if (posixpath.expanduser('~') != '/'):
            self.assertEqual((posixpath.expanduser('~') + '/'), posixpath.expanduser('~/'))
        self.assert_(isinstance(posixpath.expanduser('~root/'), basestring))
        self.assert_(isinstance(posixpath.expanduser('~foo/'), basestring))
    self.assertRaises(TypeError, posixpath.expanduser)
