def test_attributes_bad_port(self):
    'Check handling of non-integer ports.'
    p = urlparse.urlsplit('http://www.example.net:foo')
    self.assertEqual(p.netloc, 'www.example.net:foo')
    self.assertRaises(ValueError, (lambda : p.port))
    p = urlparse.urlparse('http://www.example.net:foo')
    self.assertEqual(p.netloc, 'www.example.net:foo')
    self.assertRaises(ValueError, (lambda : p.port))
