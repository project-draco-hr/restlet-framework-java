def _testCloseDoesNotCloseOthers(self):
    self.dup_conn1 = self.serv_conn.dup()
    self.dup_conn2 = self.serv_conn.dup()
    self.cli_file = self.serv_conn.makefile('wb')
    self.serv_conn.close()
    self.dup_conn1.close()
    try:
        self.serv_conn.send(MSG)
    except socket.error as se:
        self.failUnlessEqual(se[0], errno.EBADF)
    else:
        self.fail('Original socket did not close')
    try:
        self.dup_conn1.send(MSG)
    except socket.error as se:
        self.failUnlessEqual(se[0], errno.EBADF)
    else:
        self.fail('Duplicate socket 1 did not close')
    self.dup_conn2.send(MSG)
    self.dup_conn2.close()
    try:
        self.cli_file.write(('and ' + MSG))
    except Exception as x:
        self.fail(('Closing others appears to have closed the socket file: %s' % str(x)))
    self.cli_file.close()
