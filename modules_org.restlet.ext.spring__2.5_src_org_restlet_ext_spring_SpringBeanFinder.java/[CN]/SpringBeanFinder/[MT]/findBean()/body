{
  if (getApplicationContext() != null && getApplicationContext().containsBean(getBeanName())) {
    return getApplicationContext().getBean(getBeanName());
  }
 else   if (getBeanFactory() != null && getBeanFactory().containsBean(getBeanName())) {
    return getBeanFactory().getBean(getBeanName());
  }
  throw new IllegalStateException("Either a beanFactory or an applicationContext is required for SpringBeanFinder.");
}
