{
  Connection conn=null;
  if (System.getProperty("java.vm.name").equals("JServer VM")) {
    try {
      conn=DriverManager.getConnection("jdbc:oracle:kprb:","default","default");
    }
 catch (    final SQLException s) {
      System.err.println("Exception getting SQL Connection: " + s.getLocalizedMessage());
      throw new ServletException("Unable to connect using: jdbc:oracle:kprb:",s);
    }
  }
 else {
    Class<?> targetClass;
    try {
      targetClass=Engine.classForName("oracle.jdbc.driver.OracleDriver");
      final Driver drv=(Driver)targetClass.newInstance();
      DriverManager.registerDriver(drv);
      conn=DriverManager.getConnection("jdbc:oracle:oci:@" + System.getProperty("db.str","orcl"),System.getProperty("db.usr","lucene"),System.getProperty("db.pwd","lucene"));
    }
 catch (    final SQLException s) {
      System.err.println("Exception getting SQL Connection: " + s.getLocalizedMessage());
      throw new ServletException("Unable to connect using: jdbc:oracle:oci:@" + System.getProperty("db.str","orcl") + "["+ System.getProperty("db.usr","lucene")+ ":"+ System.getProperty("db.pwd","lucene")+ "]",s);
    }
catch (    final ClassNotFoundException cnf) {
      System.err.println("Exception getting oracle.jdbc.driver.OracleDriver class: " + cnf.getLocalizedMessage());
    }
catch (    final InstantiationException ie) {
      System.err.println("Exception in Driver.newIntance(): " + ie.getLocalizedMessage());
    }
catch (    final IllegalAccessException iae) {
      System.err.println("Exception in Driver.newIntance(): " + iae.getLocalizedMessage());
    }
  }
  return conn;
}
