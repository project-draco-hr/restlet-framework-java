{
  HttpServerHelper result=null;
  Component component=getComponent();
  Application application=getApplication();
  if ((component != null) && (application != null)) {
    Server server=new Server(component.getContext(),new ArrayList<Protocol>(),localAddr,localPort,component);
    server.getProtocols().add(Protocol.HTTP);
    result=new HttpServerHelper(server);
    String uriPattern=request.getServletPath();
    log(".createServer: attaching application: " + application + " uri: "+ uriPattern);
    Route route=component.getDefaultHost().attach(uriPattern,application);
    String extractQueries=getInitParameter(EXTRACT_QUERY_ATTRIBUTE,EXTRACT_QUERY_ATTRIBUTE_DEFAULT);
    log(".createServer: parsing query attributes: " + extractQueries);
    if (extractQueries != null && extractQueries.length() > 0) {
      String extractQuery[]=extractQueries.split(";");
      for (int i=0; i < extractQuery.length; i++) {
        String args[]=extractQuery[i].split(",");
        route.extractQuery(args[0],args[1],"true".equalsIgnoreCase(args[2]));
      }
    }
  }
  return result;
}
