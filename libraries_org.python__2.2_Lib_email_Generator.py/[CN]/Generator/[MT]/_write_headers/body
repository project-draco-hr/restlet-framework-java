def _write_headers(self, msg):
    for (h, v) in msg.items():
        print  >> self._fp, ('%s:' % h),
        if (self.__maxheaderlen == 0):
            print  >> self._fp, v
        elif isinstance(v, Header):
            print  >> self._fp, v.encode()
        elif _is8bitstring(v):
            print  >> self._fp, v
        else:
            print  >> self._fp, Header(v, maxlinelen=self.__maxheaderlen, header_name=h, continuation_ws='\t').encode()
    print  >> self._fp
