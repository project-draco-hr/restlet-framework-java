{
  Float result=null;
  if (parameters != null) {
    Parameter param=null;
    for (Iterator iter=parameters.iterator(); (result == null) && iter.hasNext(); ) {
      param=(Parameter)iter.next();
      if (param.getName().equals("q")) {
        result=Float.valueOf(param.getValue());
        iter.remove();
      }
    }
  }
  if (result == null) {
    result=new Float(1F);
  }
  if ((result.floatValue() < 0F) || (result.floatValue() > 1F)) {
    throw new IllegalArgumentException("Quality value must be between 0 and 1");
  }
  return result.floatValue();
}
