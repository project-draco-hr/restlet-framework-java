{
  try {
    UniformCall call=new JettyCall(request,response);
    getJettyConnector().getTarget().handle(call);
    if (call.getStatus() != null) {
      response.setStatus(call.getStatus().getHttpCode(),call.getStatus().getDescription());
    }
    CookieSetting cookieSetting;
    for (Iterator iter=call.getCookieSettings().iterator(); iter.hasNext(); ) {
      cookieSetting=(CookieSetting)iter.next();
      response.addSetCookie(new JettyCookie(cookieSetting));
    }
    if ((response.getStatus() == HttpResponse.__201_Created) || (response.getStatus() == HttpResponse.__300_Multiple_Choices) || (response.getStatus() == HttpResponse.__301_Moved_Permanently)|| (response.getStatus() == HttpResponse.__302_Moved_Temporarily)|| (response.getStatus() == HttpResponse.__303_See_Other)|| (response.getStatus() == 307)) {
      if ((call.getOutput() != null) && (call.getOutput().getMetadata().getMediaType().equals(MediaTypes.TEXT_URI))) {
        response.setField(HttpFields.__Location,call.getOutput().toString());
        call.setOutput(null);
      }
    }
 else     if (response.getStatus() == HttpResponse.__401_Unauthorized) {
      if ((call.getSecurity() != null) && (call.getSecurity().getChallengeRequest() != null)) {
        ChallengeRequest challenge=call.getSecurity().getChallengeRequest();
        response.setField(HttpFields.__WwwAuthenticate,challenge.getScheme().getTechnicalName() + " realm=\"" + challenge.getRealm()+ '"');
      }
    }
    if (call.getOutput() != null) {
      RepresentationMetadata meta=call.getOutput().getMetadata();
      if (meta.getMediaType() != null) {
        StringBuilder contentType=new StringBuilder(meta.getMediaType().getName());
        if (meta.getCharacterSet() != null) {
          contentType.append("; charset=").append(meta.getCharacterSet().getName());
        }
        response.setContentType(contentType.toString());
      }
      if (meta.getExpirationDate() != null) {
        response.addDateField("Expires",meta.getExpirationDate());
      }
      if (meta.getModificationDate() != null) {
        response.addDateField("Last-Modified",meta.getModificationDate());
      }
      if (meta.getTag() != null) {
        response.addField("ETag",meta.getTag().getName());
      }
      response.setContentLength((int)call.getOutput().getSize());
      call.getOutput().write(response.getOutputStream());
    }
    response.commit();
    request.setHandled(true);
  }
 catch (  Exception re) {
    response.setStatus(HttpResponse.__500_Internal_Server_Error);
    request.setHandled(true);
    re.printStackTrace();
  }
  return null;
}
