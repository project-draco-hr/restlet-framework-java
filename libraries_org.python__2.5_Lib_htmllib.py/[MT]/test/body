def test(args=None):
    import sys, formatter
    if (not args):
        args = sys.argv[1:]
    silent = (args and (args[0] == '-s'))
    if silent:
        del args[0]
    if args:
        file = args[0]
    else:
        file = 'test.html'
    if (file == '-'):
        f = sys.stdin
    else:
        try:
            f = open(file, 'r')
        except IOError as msg:
            print file, ':', msg
            sys.exit(1)
    data = f.read()
    if (f is not sys.stdin):
        f.close()
    if silent:
        f = formatter.NullFormatter()
    else:
        f = formatter.AbstractFormatter(formatter.DumbWriter())
    p = HTMLParser(f)
    p.feed(data)
    p.close()
