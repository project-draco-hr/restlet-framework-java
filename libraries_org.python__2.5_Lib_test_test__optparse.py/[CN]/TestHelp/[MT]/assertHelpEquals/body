def assertHelpEquals(self, expected_output):
    if (type(expected_output) is types.UnicodeType):
        encoding = self.parser._get_encoding(sys.stdout)
        expected_output = expected_output.encode(encoding, 'replace')
    save_argv = sys.argv[:]
    try:
        sys.argv[0] = os.path.join('foo', 'bar.py')
        self.assertOutput(['-h'], expected_output)
    finally:
        sys.argv[:] = save_argv
