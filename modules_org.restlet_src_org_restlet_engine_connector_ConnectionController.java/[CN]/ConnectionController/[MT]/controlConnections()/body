{
  for (  Connection<?> conn : getHelper().getConnections()) {
    if (conn.getState() == ConnectionState.CLOSED) {
      getUpdatedRegistrations().add(conn.getRegistration());
      getHelper().getConnections().remove(conn);
      getHelper().checkin(conn);
    }
 else     if ((conn.getState() == ConnectionState.CLOSING) && conn.isEmpty()) {
      conn.close(false);
    }
 else     if (conn.hasTimedOut()) {
      if (getHelper().getLogger().isLoggable(Level.FINE)) {
        getHelper().getLogger().fine("Closing connection with \"" + conn.getSocketAddress() + "\" due to lack of activity during "+ getHelper().getMaxIoIdleTimeMs()+ " ms");
      }
      conn.close(false);
    }
 else     if (conn.updateState()) {
      getUpdatedRegistrations().add(conn.getRegistration());
    }
 else     if (conn.getInboundWay().getIoState() == IoState.READY) {
      conn.getInboundWay().onSelected();
    }
 else     if (conn.getOutboundWay().getIoState() == IoState.READY) {
      conn.getOutboundWay().onSelected();
    }
  }
}
