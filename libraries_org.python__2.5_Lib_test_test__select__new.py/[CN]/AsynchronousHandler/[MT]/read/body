def read(self, expected):
    "\n        Reads expected bytes from this socket\n\n        An Exception is raised if expected bytes aren't read before READ_TIMEOUT\n        is reached.\n        "
    results = ''
    start = time.time()
    while 1:
        if self.select_readable():
            recvd_bytes = self.socket.recv((expected - len(results)))
            if len(recvd_bytes):
                results += recvd_bytes
            if (len(results) == expected):
                return results
        else:
            stop = time.time()
            if ((stop - start) > READ_TIMEOUT):
                raise Exception(('Got %d bytes but %d bytes were written.' % (len(results), expected)))
