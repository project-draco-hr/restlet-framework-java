def _type_name(obj):
    TPFLAGS_HEAPTYPE = (1 << 9)
    type_name = ''
    obj_type = type(obj)
    is_heap = ((obj_type.__flags__ & TPFLAGS_HEAPTYPE) == TPFLAGS_HEAPTYPE)
    if ((not is_heap) and (obj_type.__module__ != '__builtin__')):
        type_name = ('%s.' % obj_type.__module__)
    type_name += obj_type.__name__
    return type_name
