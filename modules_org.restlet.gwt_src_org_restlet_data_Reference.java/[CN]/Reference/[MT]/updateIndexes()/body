{
  if (internalRef != null) {
    int firstSlashIndex=this.internalRef.indexOf('/');
    this.schemeIndex=this.internalRef.indexOf(':');
    if ((firstSlashIndex != -1) && (this.schemeIndex > firstSlashIndex)) {
      this.schemeIndex=-1;
    }
    this.queryIndex=this.internalRef.indexOf('?');
    this.fragmentIndex=this.internalRef.indexOf('#');
    if (hasQuery() && hasFragment() && (this.queryIndex > this.fragmentIndex)) {
      this.queryIndex=-1;
    }
  }
 else {
    this.schemeIndex=-1;
    this.queryIndex=-1;
    this.fragmentIndex=-1;
  }
}
