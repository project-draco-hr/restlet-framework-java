def testStringToIPv6(self):
    if (not hasattr(socket, 'inet_ntop')):
        return
    try:
        from socket import inet_ntop, AF_INET6, has_ipv6
        if (not has_ipv6):
            return
    except ImportError:
        return
    f = (lambda a: inet_ntop(AF_INET6, a))
    self.assertEquals('::', f(('\x00' * 16)))
    self.assertEquals('::1', f((('\x00' * 15) + '\x01')))
    self.assertEquals('aef:b01:506:1001:ffff:9997:55:170', f('\n\xef\x0b\x01\x05\x06\x10\x01\xff\xff\x99\x97\x00U\x01p'))
