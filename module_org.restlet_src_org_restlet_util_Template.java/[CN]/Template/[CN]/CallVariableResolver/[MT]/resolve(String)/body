{
  String result=null;
  Variable var=getVariables().get(variableName);
  if (var == null)   var=getDefaultVariable();
  if (request != null) {
    Object variable=request.getAttributes().get(variableName);
    if (variable != null) {
      result=variable.toString();
    }
  }
  if ((result == null) && (response != null) && response.getAttributes().containsKey(variableName)) {
    result=response.getAttributes().get(variableName).toString();
  }
  if (result == null) {
    if (request != null) {
      if (variableName.equals("c")) {
        result=Boolean.toString(request.isConfidential());
      }
 else       if (variableName.equals("cia")) {
        result=request.getClientInfo().getAddress();
      }
 else       if (variableName.equals("cig")) {
        result=request.getClientInfo().getAgent();
      }
 else       if (variableName.equals("cri")) {
        result=request.getChallengeResponse().getIdentifier();
      }
 else       if (variableName.equals("crs")) {
        if (request.getChallengeResponse().getScheme() != null) {
          result=request.getChallengeResponse().getScheme().getTechnicalName();
        }
      }
 else       if (variableName.equals("ecs")) {
        if ((request.getEntity() != null) && (request.getEntity().getCharacterSet() != null)) {
          result=request.getEntity().getCharacterSet().getName();
        }
      }
 else       if (variableName.equals("ee")) {
        if ((request.getEntity() != null) && (request.getEntity().getEncoding() != null)) {
          result=request.getEntity().getEncoding().getName();
        }
      }
 else       if (variableName.equals("eed")) {
        if ((request.getEntity() != null) && (request.getEntity().getExpirationDate() != null)) {
          result=DateUtils.format(request.getEntity().getExpirationDate(),DateUtils.FORMAT_RFC_1123.get(0));
        }
      }
 else       if (variableName.equals("el")) {
        if ((request.getEntity() != null) && (!request.getEntity().getLanguages().isEmpty())) {
          StringBuilder value=new StringBuilder();
          for (int i=0; i < request.getEntity().getLanguages().size(); i++) {
            if (i > 0)             value.append(", ");
            value.append(request.getEntity().getLanguages().get(i).getName());
          }
          result=value.toString();
        }
      }
 else       if (variableName.equals("emd")) {
        if ((request.getEntity() != null) && (request.getEntity().getModificationDate() != null)) {
          result=DateUtils.format(request.getEntity().getModificationDate(),DateUtils.FORMAT_RFC_1123.get(0));
        }
      }
 else       if (variableName.equals("emt")) {
        if ((request.getEntity() != null) && (request.getEntity().getMediaType() != null)) {
          result=request.getEntity().getMediaType().getName();
        }
      }
 else       if (variableName.equals("es")) {
        if ((request.getEntity() != null) && (request.getEntity().getSize() != -1)) {
          result=Long.toString(request.getEntity().getSize());
        }
      }
 else       if (variableName.equals("et")) {
        if ((request.getEntity() != null) && (request.getEntity().getTag() != null)) {
          result=request.getEntity().getTag().getName();
        }
      }
 else       if (variableName.startsWith("f")) {
        result=getReferenceContent(variableName.substring(1),request.getReferrerRef());
      }
 else       if (variableName.startsWith("h")) {
        result=getReferenceContent(variableName.substring(1),request.getHostRef());
      }
 else       if (variableName.equals("m")) {
        if (request.getMethod() != null) {
          result=request.getMethod().getName();
        }
      }
 else       if (variableName.equals("p")) {
        if (request.getProtocol() != null) {
          result=request.getProtocol().getName();
        }
      }
 else       if (variableName.startsWith("r")) {
        result=getReferenceContent(variableName.substring(1),request.getResourceRef());
      }
    }
    if ((result == null) && (response != null)) {
      if (variableName.equals("ECS")) {
        if ((response.getEntity() != null) && (response.getEntity().getCharacterSet() != null)) {
          result=response.getEntity().getCharacterSet().getName();
        }
      }
 else       if (variableName.equals("EE")) {
        if ((response.getEntity() != null) && (response.getEntity().getEncoding() != null)) {
          result=response.getEntity().getEncoding().getName();
        }
      }
 else       if (variableName.equals("EED")) {
        if ((response.getEntity() != null) && (response.getEntity().getExpirationDate() != null)) {
          result=DateUtils.format(response.getEntity().getExpirationDate(),DateUtils.FORMAT_RFC_1123.get(0));
        }
      }
 else       if (variableName.equals("EL")) {
        if ((response.getEntity() != null) && (!response.getEntity().getLanguages().isEmpty())) {
          StringBuilder value=new StringBuilder();
          for (int i=0; i < response.getEntity().getLanguages().size(); i++) {
            if (i > 0)             value.append(", ");
            value.append(response.getEntity().getLanguages().get(i).getName());
          }
          result=value.toString();
        }
      }
 else       if (variableName.equals("EMD")) {
        if ((response.getEntity() != null) && (response.getEntity().getModificationDate() != null)) {
          result=DateUtils.format(response.getEntity().getModificationDate(),DateUtils.FORMAT_RFC_1123.get(0));
        }
      }
 else       if (variableName.equals("EMT")) {
        if ((response.getEntity() != null) && (response.getEntity().getMediaType() != null)) {
          result=response.getEntity().getMediaType().getName();
        }
      }
 else       if (variableName.equals("ES")) {
        if ((response.getEntity() != null) && (response.getEntity().getSize() != -1)) {
          result=Long.toString(response.getEntity().getSize());
        }
      }
 else       if (variableName.equals("ET")) {
        if ((response.getEntity() != null) && (response.getEntity().getTag() != null)) {
          result=response.getEntity().getTag().getName();
        }
      }
 else       if (variableName.startsWith("R")) {
        result=getReferenceContent(variableName.substring(1),response.getRedirectRef());
      }
 else       if (variableName.equals("S")) {
        if (response.getStatus() != null) {
          result=Integer.toString(response.getStatus().getCode());
        }
      }
 else       if (variableName.equals("SIA")) {
        result=response.getServerInfo().getAddress();
      }
 else       if (variableName.equals("SIG")) {
        result=response.getServerInfo().getAgent();
      }
 else       if (variableName.equals("SIP")) {
        if (response.getServerInfo().getPort() != -1) {
          result=Integer.toString(response.getServerInfo().getPort());
        }
      }
    }
  }
  if (result == null) {
    result=var.getDefaultValue();
  }
  return result;
}
