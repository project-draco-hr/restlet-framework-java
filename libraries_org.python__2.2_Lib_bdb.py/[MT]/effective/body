def effective(file, line, frame):
    'Determine which breakpoint for this file:line is to be acted upon.\n\n    Called only if we know there is a bpt at this\n    location.  Returns breakpoint that was triggered and a flag\n    that indicates if it is ok to delete a temporary bp.\n\n    '
    possibles = Breakpoint.bplist[(file, line)]
    for i in range(0, len(possibles)):
        b = possibles[i]
        if (b.enabled == 0):
            continue
        b.hits = (b.hits + 1)
        if (not b.cond):
            if (b.ignore > 0):
                b.ignore = (b.ignore - 1)
                continue
            else:
                return (b, 1)
        else:
            try:
                val = eval(b.cond, frame.f_globals, frame.f_locals)
                if val:
                    if (b.ignore > 0):
                        b.ignore = (b.ignore - 1)
                    else:
                        return (b, 1)
            except:
                return (b, 0)
    return (None, None)
