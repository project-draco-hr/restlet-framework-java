{
  boolean bContinue=true;
  if (request.getConditions().hasSome()) {
    Variant preferredVariant=null;
    if (isNegotiateContent()) {
      List<Variant> variants=target.getVariants();
      if ((variants != null) && (!variants.isEmpty())) {
        Language language=null;
        if (response.getRequest().getAttributes().get(Application.class.getCanonicalName()) != null) {
          Application application=(Application)response.getRequest().getAttributes().get(Application.class.getCanonicalName());
          language=application.getMetadataService().getDefaultLanguage();
        }
        preferredVariant=response.getRequest().getClientInfo().getPreferredVariant(variants,language);
      }
    }
 else {
      List<Variant> variants=target.getVariants();
      if (variants.size() == 1) {
        preferredVariant=variants.get(0);
      }
 else {
        response.setStatus(Status.CLIENT_ERROR_PRECONDITION_FAILED);
        bContinue=false;
      }
    }
    if (preferredVariant != null && bContinue) {
      Status status=request.getConditions().getStatus(request.getMethod(),preferredVariant);
      if (status != null) {
        response.setStatus(status);
        bContinue=false;
      }
    }
  }
  if (bContinue) {
    response.copyFrom(target.delete());
    response.setRequest(request);
  }
}
