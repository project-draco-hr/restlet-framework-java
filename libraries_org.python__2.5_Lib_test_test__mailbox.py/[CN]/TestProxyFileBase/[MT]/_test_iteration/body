def _test_iteration(self, proxy):
    proxy.seek(0)
    iterator = iter(proxy)
    self.assert_((iterator.next() == ('foo' + os.linesep)))
    self.assert_((iterator.next() == ('bar' + os.linesep)))
    self.assert_((iterator.next() == ('fred' + os.linesep)))
    self.assert_((iterator.next() == 'bob'))
    self.assertRaises(StopIteration, (lambda : iterator.next()))
