def test_labels(self):
    msg = mailbox.BabylMessage(_sample_message)
    self.assert_((msg.get_labels() == []))
    msg.set_labels(['foobar'])
    self.assert_((msg.get_labels() == ['foobar']))
    msg.set_labels([])
    self.assert_((msg.get_labels() == []))
    msg.add_label('filed')
    self.assert_((msg.get_labels() == ['filed']))
    msg.add_label('resent')
    self.assert_((msg.get_labels() == ['filed', 'resent']))
    msg.add_label('resent')
    self.assert_((msg.get_labels() == ['filed', 'resent']))
    msg.remove_label('filed')
    self.assert_((msg.get_labels() == ['resent']))
    msg.add_label('foobar')
    self.assert_((msg.get_labels() == ['resent', 'foobar']))
    msg.remove_label('unseen')
    self.assert_((msg.get_labels() == ['resent', 'foobar']))
    msg.set_labels(['foobar', 'answered'])
    self.assert_((msg.get_labels() == ['foobar', 'answered']))
