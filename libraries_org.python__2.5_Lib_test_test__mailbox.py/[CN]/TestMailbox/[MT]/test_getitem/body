def test_getitem(self):
    key0 = self._box.add((self._template % 0))
    msg = self._box[key0]
    self.assert_((msg['from'] == 'foo'))
    self.assert_((msg.get_payload() == '0'))
    self.assertRaises(KeyError, (lambda : self._box['foo']))
    self._box.discard(key0)
    self.assertRaises(KeyError, (lambda : self._box[key0]))
