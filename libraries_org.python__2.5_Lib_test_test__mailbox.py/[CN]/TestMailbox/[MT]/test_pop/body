def test_pop(self):
    key0 = self._box.add((self._template % 0))
    self.assert_((key0 in self._box))
    key1 = self._box.add((self._template % 1))
    self.assert_((key1 in self._box))
    self.assert_((self._box.pop(key0).get_payload() == '0'))
    self.assert_((key0 not in self._box))
    self.assert_((key1 in self._box))
    key2 = self._box.add((self._template % 2))
    self.assert_((key2 in self._box))
    self.assert_((self._box.pop(key2).get_payload() == '2'))
    self.assert_((key2 not in self._box))
    self.assert_((key1 in self._box))
    self.assert_((self._box.pop(key1).get_payload() == '1'))
    self.assert_((key1 not in self._box))
    self.assert_((len(self._box) == 0))
