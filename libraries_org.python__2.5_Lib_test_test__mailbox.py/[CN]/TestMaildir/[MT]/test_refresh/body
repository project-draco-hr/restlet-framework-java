def test_refresh(self):
    self.assert_((self._box._toc == {}))
    key0 = self._box.add((self._template % 0))
    key1 = self._box.add((self._template % 1))
    self.assert_((self._box._toc == {}))
    self._box._refresh()
    self.assert_((self._box._toc == {key0: os.path.join('new', key0), key1: os.path.join('new', key1), }))
    key2 = self._box.add((self._template % 2))
    self.assert_((self._box._toc == {key0: os.path.join('new', key0), key1: os.path.join('new', key1), }))
    self._box._refresh()
    self.assert_((self._box._toc == {key0: os.path.join('new', key0), key1: os.path.join('new', key1), key2: os.path.join('new', key2), }))
