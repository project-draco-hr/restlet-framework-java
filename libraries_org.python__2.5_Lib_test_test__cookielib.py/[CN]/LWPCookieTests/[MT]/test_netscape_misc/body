def test_netscape_misc(self):
    from cookielib import CookieJar
    from urllib2 import Request
    c = CookieJar()
    headers = []
    req = Request('http://foo.bar.acme.com/foo')
    headers.append('Set-Cookie: Customer=WILE_E_COYOTE; domain=.acme.com')
    res = FakeResponse(headers, 'http://www.acme.com/foo')
    c.extract_cookies(res, req)
    headers.append('Set-Cookie: PART_NUMBER=3,4; domain=foo.bar.acme.com')
    res = FakeResponse(headers, 'http://www.acme.com/foo')
    c.extract_cookies(res, req)
    req = Request('http://foo.bar.acme.com/foo')
    c.add_cookie_header(req)
    self.assert_((('PART_NUMBER=3,4' in req.get_header('Cookie')) and ('Customer=WILE_E_COYOTE' in req.get_header('Cookie'))))
