def test_two_component_domain_rfc2965(self):
    from cookielib import CookieJar, DefaultCookiePolicy
    pol = DefaultCookiePolicy(rfc2965=True)
    c = CookieJar(pol)
    interact_2965(c, 'http://foo.net/', 'foo=bar; Version="1"')
    self.assertEquals(len(c), 1)
    self.assertEquals(c._cookies['foo.net']['/']['foo'].value, 'bar')
    self.assertEquals(interact_2965(c, 'http://foo.net/'), '$Version=1; foo=bar')
    self.assertEquals(interact_2965(c, 'http://www.foo.net/'), '')
    interact_2965(c, 'http://foo.net/foo', 'spam=eggs; domain=foo.net; path=/foo; Version="1"')
    self.assertEquals(len(c), 1)
    self.assertEquals(interact_2965(c, 'http://foo.net/foo'), '$Version=1; foo=bar')
    interact_2965(c, 'http://www.foo.net/foo/', 'spam=eggs; domain=foo.net; Version="1"')
    self.assertEquals(c._cookies['.foo.net']['/foo/']['spam'].value, 'eggs')
    self.assertEquals(len(c), 2)
    self.assertEquals(interact_2965(c, 'http://foo.net/foo/'), '$Version=1; foo=bar')
    self.assertEquals(interact_2965(c, 'http://www.foo.net/foo/'), '$Version=1; spam=eggs; $Domain="foo.net"')
    interact_2965(c, 'http://foo.net/', 'ni="ni"; domain=".net"; Version="1"')
    self.assertEquals(len(c), 2)
    interact_2965(c, 'http://foo.co.uk/', 'nasty=trick; domain=.co.uk; Version="1"')
    self.assertEquals(len(c), 3)
