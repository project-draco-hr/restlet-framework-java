def test_bad_magic(self):
    from cookielib import LWPCookieJar, MozillaCookieJar, LoadError
    filename = test_support.TESTFN
    for cookiejar_class in (LWPCookieJar, MozillaCookieJar):
        c = cookiejar_class()
        try:
            c.load(filename='for this test to work, a file with this filename should not exist')
        except IOError as exc:
            self.assertEqual(exc.__class__, IOError)
        else:
            self.fail('expected IOError for invalid filename')
    try:
        f = open(filename, 'w')
        f.write('oops\n')
        for cookiejar_class in (LWPCookieJar, MozillaCookieJar):
            c = cookiejar_class()
            self.assertRaises(LoadError, c.load, filename)
    finally:
        try:
            os.unlink(filename)
        except OSError:
            pass
