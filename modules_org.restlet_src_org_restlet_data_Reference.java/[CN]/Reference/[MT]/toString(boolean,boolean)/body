{
  if (query) {
    if (fragment) {
      return this.internalRef;
    }
 else {
      if (hasFragment()) {
        return this.internalRef.substring(0,fragmentIndex);
      }
 else {
        return this.internalRef;
      }
    }
  }
 else {
    if (fragment) {
      if (hasQuery()) {
        if (hasFragment()) {
          return this.internalRef.substring(0,queryIndex) + "#" + getFragment();
        }
 else {
          return this.internalRef.substring(0,queryIndex);
        }
      }
 else {
        return this.internalRef;
      }
    }
 else {
      if (hasQuery()) {
        return this.internalRef.substring(0,queryIndex);
      }
 else {
        if (hasFragment()) {
          return this.internalRef.substring(0,fragmentIndex);
        }
 else {
          return this.internalRef;
        }
      }
    }
  }
}
