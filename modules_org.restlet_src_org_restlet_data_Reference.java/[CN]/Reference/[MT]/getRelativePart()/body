{
  String result=null;
  if (isRelative()) {
    if (queryIndex != -1) {
      result=this.internalRef.substring(0,queryIndex);
    }
 else {
      if (fragmentIndex != -1) {
        result=this.internalRef.substring(0,fragmentIndex);
      }
 else {
        result=this.internalRef;
      }
    }
  }
 else {
    if (baseRef == null) {
      throw new IllegalArgumentException("Relative references are only usable when a base URI is known.");
    }
 else {
      result=getRelativeRef().getRelativePart();
    }
  }
  return result;
}
