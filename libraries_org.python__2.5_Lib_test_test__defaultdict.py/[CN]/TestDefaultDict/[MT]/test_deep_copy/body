def test_deep_copy(self):
    d1 = defaultdict(foobar, {1: [1], })
    d2 = copy.deepcopy(d1)
    self.assertEqual(d2.default_factory, foobar)
    self.assertEqual(d2, d1)
    self.assert_((d1[1] is not d2[1]))
    d1.default_factory = list
    d2 = copy.deepcopy(d1)
    self.assertEqual(d2.default_factory, list)
    self.assertEqual(d2, d1)
