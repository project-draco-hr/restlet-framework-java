{
  int result=0;
  if ((getIoState() == IoState.READY) && (getMessageState() == MessageState.IDLE)) {
    getBuffer().beforeDrain();
    result=onDrain(getBuffer(),maxDrained,args);
  }
  return result;
}
