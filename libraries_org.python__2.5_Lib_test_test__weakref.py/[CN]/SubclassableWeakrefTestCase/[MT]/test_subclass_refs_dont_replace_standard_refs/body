def test_subclass_refs_dont_replace_standard_refs(self):


    class MyRef(weakref.ref):
        pass
    o = Object(42)
    r1 = MyRef(o)
    r2 = weakref.ref(o)
    self.assert_((r1 is not r2))
    self.assertEqual(weakref.getweakrefs(o), [r2, r1])
    self.assertEqual(weakref.getweakrefcount(o), 2)
    r3 = MyRef(o)
    self.assertEqual(weakref.getweakrefcount(o), 3)
    refs = weakref.getweakrefs(o)
    self.assertEqual(len(refs), 3)
    self.assert_((r2 is refs[0]))
    self.assert_((r1 in refs[1:]))
    self.assert_((r3 in refs[1:]))
