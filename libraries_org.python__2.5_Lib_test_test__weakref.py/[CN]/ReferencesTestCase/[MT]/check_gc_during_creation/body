def check_gc_during_creation(self, makeref):
    if (not test_support.is_jython):
        thresholds = gc.get_threshold()
        gc.set_threshold(1, 1, 1)
    gc.collect()


    class A:
        pass

    def callback(*args):
        pass
    referenced = A()
    a = A()
    a.a = a
    a.wr = makeref(referenced)
    try:
        a = A()
        weakref.ref(referenced, callback)
    finally:
        if (not test_support.is_jython):
            gc.set_threshold(*thresholds)
