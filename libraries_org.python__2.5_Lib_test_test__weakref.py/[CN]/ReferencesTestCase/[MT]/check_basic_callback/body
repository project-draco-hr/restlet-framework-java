def check_basic_callback(self, factory):
    self.cbcalled = 0
    o = factory()
    ref = weakref.ref(o, self.callback)
    del o
    extra_collect()
    self.assert_((self.cbcalled == 1), "callback did not properly set 'cbcalled'")
    self.assert_((ref() is None), 'ref2 should be dead after deleting object reference')
