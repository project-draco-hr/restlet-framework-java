def test_sf_bug_840829(self):
    import gc


    class C(object):
        pass
    c = C()
    wr = weakref.ref(c, (lambda ignore: gc.collect()))
    del c
    del wr
    c1 = C()
    c1.i = C()
    wr = weakref.ref(c1.i, (lambda ignore: gc.collect()))
    c2 = C()
    c2.c1 = c1
    del c1
    del c2
