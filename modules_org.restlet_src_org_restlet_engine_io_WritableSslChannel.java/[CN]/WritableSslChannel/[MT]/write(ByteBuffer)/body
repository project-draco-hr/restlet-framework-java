{
  int result=0;
  if (Context.getCurrentLogger().isLoggable(Level.INFO)) {
    Context.getCurrentLogger().log(Level.INFO,getManager().toString());
  }
  flush();
  if (getPacketBufferState() == BufferState.FILLING) {
    int srcSize=src.remaining();
    if (srcSize > 0) {
      SSLEngineResult sslResult=runEngine(src);
      handleResult(sslResult,src);
      flush();
      result=srcSize - src.remaining();
    }
  }
  return result;
}
