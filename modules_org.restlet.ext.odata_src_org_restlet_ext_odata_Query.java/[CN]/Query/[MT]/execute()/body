{
  if (!isExecuted()) {
    String targetUri=createTargetUri();
    ClientResource resource=new ClientResource(targetUri);
    resource.setChallengeResponse(service.getCredentials());
    Representation result=resource.get(MediaType.APPLICATION_ATOM);
    service.setLatestRequest(resource.getRequest());
    service.setLatestResponse(resource.getResponse());
    if (resource.getStatus().isSuccess()) {
switch (guessType(targetUri)) {
case TYPE_ENTITY_SET:
        FeedContentHandler<T> feedContentHandler=new FeedContentHandler<T>(entityClass,(Metadata)service.getMetadata(),getLogger());
      setFeed(new Feed(result,feedContentHandler));
    this.count=feedContentHandler.getCount();
  this.entities=feedContentHandler.getEntities();
break;
case TYPE_ENTITY:
EntryContentHandler<T> entryContentHandler=new EntryContentHandler<T>(entityClass,(Metadata)service.getMetadata(),getLogger());
Feed feed=new Feed();
feed.getEntries().add(new Entry(result,entryContentHandler));
setFeed(feed);
entities=new ArrayList<T>();
if (entryContentHandler.getEntity() != null) {
entities.add(entryContentHandler.getEntity());
}
break;
case TYPE_UNKNOWN:
Representation rep=new StringRepresentation(result.getText());
String string=rep.getText().substring(0,Math.min(100,rep.getText().length()));
if (string.contains("<feed")) {
setFeed(new Feed(rep));
}
 else if (string.contains("<entry")) {
Feed f=new Feed();
f.getEntries().add(new Entry(result));
setFeed(f);
}
default :
break;
}
}
setExecuted(true);
}
}
