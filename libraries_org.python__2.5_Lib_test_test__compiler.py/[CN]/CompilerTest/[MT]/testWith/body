def testWith(self):
    c = compiler.compile('from __future__ import with_statement\ndef f():\n    with TrivialContext():\n        return 1\nresult = f()', '<string>', 'exec')
    dct = {'TrivialContext': TrivialContext, }
    exec c in dct
    self.assertEquals(dct.get('result'), 1)
