def testNestedScope(self):
    c = compiler.compile('def g():\n    a = 1\n    def f(): return a + 2\n    return f()\nresult = g()', '<string>', 'exec')
    dct = {}
    exec c in dct
    self.assertEquals(dct.get('result'), 3)
