def _rshift_nearest(x, shift):
    'Given an integer x and a nonnegative integer shift, return closest\n    integer to x / 2**shift; use round-to-even in case of a tie.\n\n    '
    (b, q) = ((1L << shift), (x >> shift))
    return (q + (((2 * (x & (b - 1))) + (q & 1)) > b))
