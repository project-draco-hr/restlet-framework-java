def _find_mac(command, args, hw_identifiers, get_index):
    import os
    for dir in ['', '/sbin/', '/usr/sbin']:
        executable = os.path.join(dir, command)
        if (not os.path.exists(executable)):
            continue
        try:
            cmd = ('LC_ALL=C %s %s 2>/dev/null' % (executable, args))
            pipe = os.popen(cmd)
        except IOError:
            continue
        for line in pipe:
            words = line.lower().split()
            for i in range(len(words)):
                if (words[i] in hw_identifiers):
                    return int(words[get_index(i)].replace(':', ''), 16)
    return None
