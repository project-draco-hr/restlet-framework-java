def test_multiple_selfref_callbacks(self):
    'Make sure all references are invalidated before callbacks\n        are called.'

    def callback(object, self=self):
        self.ref()
    c = C()
    self.ref = weakref.ref(c, callback)
    ref1 = weakref.ref(c, callback)
    del c
