def testSAX2DOM():
    from xml.dom import pulldom
    sax2dom = pulldom.SAX2DOM()
    sax2dom.startDocument()
    sax2dom.startElement('doc', {})
    sax2dom.characters('text')
    sax2dom.startElement('subelm', {})
    sax2dom.characters('text')
    sax2dom.endElement('subelm')
    sax2dom.characters('text')
    sax2dom.endElement('doc')
    sax2dom.endDocument()
    doc = sax2dom.document
    root = doc.documentElement
    (text1, elm1, text2) = root.childNodes
    text3 = elm1.childNodes[0]
    confirm(((text1.previousSibling is None) and (text1.nextSibling is elm1) and (elm1.previousSibling is text1) and (elm1.nextSibling is text2) and (text2.previousSibling is elm1) and (text2.nextSibling is None) and (text3.previousSibling is None) and (text3.nextSibling is None)), 'testSAX2DOM - siblings')
    confirm(((root.parentNode is doc) and (text1.parentNode is root) and (elm1.parentNode is root) and (text2.parentNode is root) and (text3.parentNode is elm1)), 'testSAX2DOM - parents')
    doc.unlink()
