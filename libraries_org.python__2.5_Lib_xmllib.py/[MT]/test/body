def test(args=None):
    import sys, getopt
    from time import time
    if (not args):
        args = sys.argv[1:]
    (opts, args) = getopt.getopt(args, 'st')
    klass = TestXMLParser
    do_time = 0
    for (o, a) in opts:
        if (o == '-s'):
            klass = XMLParser
        elif (o == '-t'):
            do_time = 1
    if args:
        file = args[0]
    else:
        file = 'test.xml'
    if (file == '-'):
        f = sys.stdin
    else:
        try:
            f = open(file, 'r')
        except IOError as msg:
            print file, ':', msg
            sys.exit(1)
    data = f.read()
    if (f is not sys.stdin):
        f.close()
    x = klass()
    t0 = time()
    try:
        if do_time:
            x.feed(data)
            x.close()
        else:
            for c in data:
                x.feed(c)
            x.close()
    except Error as msg:
        t1 = time()
        print msg
        if do_time:
            print ('total time: %g' % (t1 - t0))
        sys.exit(1)
    t1 = time()
    if do_time:
        print ('total time: %g' % (t1 - t0))
