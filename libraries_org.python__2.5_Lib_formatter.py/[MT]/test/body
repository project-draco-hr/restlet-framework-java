def test(file=None):
    w = DumbWriter()
    f = AbstractFormatter(w)
    if (file is not None):
        fp = open(file)
    elif sys.argv[1:]:
        fp = open(sys.argv[1])
    else:
        fp = sys.stdin
    while 1:
        line = fp.readline()
        if (not line):
            break
        if (line == '\n'):
            f.end_paragraph(1)
        else:
            f.add_flowing_data(line)
    f.end_paragraph(0)
