def test_foreign_thread(self):

    def f(mutex):
        r = threading.RLock()
        r.acquire()
        r.release()
        mutex.release()
    mutex = threading.Lock()
    mutex.acquire()
    tid = thread.start_new_thread(f, (mutex,))
    mutex.acquire()
    self.assert_((tid in threading._active))
    self.assert_(isinstance(threading._active[tid], threading._DummyThread))
    del threading._active[tid]
