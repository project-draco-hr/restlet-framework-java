def test_enumerate_after_join(self):
    enum = threading.enumerate
    old_interval = sys.getcheckinterval()
    sys.setcheckinterval(1)
    try:
        for i in xrange(1, 1000):
            t = threading.Thread(target=(lambda : None))
            t.start()
            t.join()
            l = enum()
            self.assertFalse((t in l), ('#1703448 triggered after %d trials: %s' % (i, l)))
    finally:
        sys.setcheckinterval(old_interval)
