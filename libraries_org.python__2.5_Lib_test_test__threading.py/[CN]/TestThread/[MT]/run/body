def run(self):
    delay = (random.random() * 2)
    if verbose:
        print 'task', self.getName(), 'will run for', delay, 'sec'
    self.sema.acquire()
    self.mutex.acquire()
    self.nrunning.inc()
    if verbose:
        print self.nrunning.get(), 'tasks are running'
    self.testcase.assert_((self.nrunning.get() <= 3))
    self.mutex.release()
    time.sleep(delay)
    if verbose:
        print 'task', self.getName(), 'done'
    self.mutex.acquire()
    self.nrunning.dec()
    self.testcase.assert_((self.nrunning.get() >= 0))
    if verbose:
        print self.getName(), 'is finished.', self.nrunning.get(), 'tasks are running'
    self.mutex.release()
    self.sema.release()
