def _del_pkg(self, top, depth, mod_name):
    for i in range((depth + 1)):
        parts = mod_name.rsplit('.', i)
        entry = parts[0]
        try:
            del sys.modules[entry]
        except KeyError as ex:
            if verbose:
                print ex
    if verbose:
        print '  Removed sys.modules entries'
    del sys.path[0]
    if verbose:
        print '  Removed sys.path entry'
    for (root, dirs, files) in os.walk(top, topdown=False):
        for name in files:
            try:
                os.remove(os.path.join(root, name))
            except OSError as ex:
                if verbose:
                    print ex
        for name in dirs:
            fullname = os.path.join(root, name)
            try:
                os.rmdir(fullname)
            except OSError as ex:
                if verbose:
                    print ex
    try:
        os.rmdir(top)
        if verbose:
            print '  Removed package tree'
    except OSError as ex:
        if verbose:
            print ex
