def __enter__(self):
    try:
        return self.gen.next()
    except StopIteration:
        raise RuntimeError("generator didn't yield")
