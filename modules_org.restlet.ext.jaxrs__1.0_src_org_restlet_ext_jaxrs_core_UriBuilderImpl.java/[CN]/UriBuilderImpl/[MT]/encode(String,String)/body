{
  if (string == null)   throw new IllegalArgumentException("The " + errMessName + " must not be null");
  if (this.encode)   return Reference.encode(string);
  if (Reference.encode(string).length() != string.length())   throw new IllegalArgumentException("The " + errMessName + " contains illegal characters");
  return string;
}
