def test_heapsort(self):
    for trial in xrange(100):
        size = random.randrange(50)
        data = [random.randrange(25) for i in range(size)]
        if (trial & 1):
            heap = data[:]
            heapify(heap)
        else:
            heap = []
            for item in data:
                heappush(heap, item)
        heap_sorted = [heappop(heap) for i in range(size)]
        self.assertEqual(heap_sorted, sorted(data))
