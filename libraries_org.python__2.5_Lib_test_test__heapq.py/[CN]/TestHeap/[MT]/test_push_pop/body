def test_push_pop(self):
    heap = []
    data = []
    self.check_invariant(heap)
    for i in range(256):
        item = random.random()
        data.append(item)
        heappush(heap, item)
        self.check_invariant(heap)
    results = []
    while heap:
        item = heappop(heap)
        self.check_invariant(heap)
        results.append(item)
    data_sorted = data[:]
    data_sorted.sort()
    self.assertEqual(data_sorted, results)
    self.check_invariant(results)
    self.assertRaises(TypeError, heappush, [])
    try:
        self.assertRaises(TypeError, heappush, None, None)
        self.assertRaises(TypeError, heappop, None)
    except AttributeError:
        pass
