def test_today(self):
    import time
    for dummy in range(3):
        today = self.theclass.today()
        ts = time.time()
        todayagain = self.theclass.fromtimestamp(ts)
        if (today == todayagain):
            break
        time.sleep(0.1)
    self.failUnless(((today == todayagain) or (abs((todayagain - today)) < timedelta(seconds=0.5))))
