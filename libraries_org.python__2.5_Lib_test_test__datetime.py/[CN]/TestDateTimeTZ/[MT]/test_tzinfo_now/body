def test_tzinfo_now(self):
    meth = self.theclass.now
    base = meth()
    off42 = FixedOffset(42, '42')
    another = meth(off42)
    again = meth(tz=off42)
    self.failUnless((another.tzinfo is again.tzinfo))
    self.assertEqual(another.utcoffset(), timedelta(minutes=42))
    self.assertRaises(TypeError, meth, 16)
    self.assertRaises(TypeError, meth, tzinfo=16)
    self.assertRaises(TypeError, meth, tinfo=off42)
    self.assertRaises(TypeError, meth, off42, off42)
    weirdtz = FixedOffset(timedelta(hours=15, minutes=58), 'weirdtz', 0)
    utc = FixedOffset(0, 'utc', 0)
    for dummy in range(3):
        now = datetime.now(weirdtz)
        self.failUnless((now.tzinfo is weirdtz))
        utcnow = datetime.utcnow().replace(tzinfo=utc)
        now2 = utcnow.astimezone(weirdtz)
        if (abs((now - now2)) < timedelta(seconds=30)):
            break
    else:
        self.fail('utcnow(), now(tz), or astimezone() may be broken')
