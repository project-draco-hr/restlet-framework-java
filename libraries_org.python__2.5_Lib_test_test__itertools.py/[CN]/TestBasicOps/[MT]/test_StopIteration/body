def test_StopIteration(self):
    self.assertRaises(StopIteration, izip().next)
    for f in (chain, cycle, izip, groupby):
        self.assertRaises(StopIteration, f([]).next)
        self.assertRaises(StopIteration, f(StopNow()).next)
    self.assertRaises(StopIteration, islice([], None).next)
    self.assertRaises(StopIteration, islice(StopNow(), None).next)
    (p, q) = tee([])
    self.assertRaises(StopIteration, p.next)
    self.assertRaises(StopIteration, q.next)
    (p, q) = tee(StopNow())
    self.assertRaises(StopIteration, p.next)
    self.assertRaises(StopIteration, q.next)
    self.assertRaises(StopIteration, repeat(None, 0).next)
    for f in (ifilter, ifilterfalse, imap, takewhile, dropwhile, starmap):
        self.assertRaises(StopIteration, f((lambda x: x), []).next)
        self.assertRaises(StopIteration, f((lambda x: x), StopNow()).next)
