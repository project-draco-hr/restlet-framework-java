{
  Status status;
  if (!getDirectory().isModifiable()) {
    status=Status.CLIENT_ERROR_FORBIDDEN;
  }
 else {
    Request contextRequest=new Request(Method.PUT,this.targetUri);
    Response contextResponse=new Response(contextRequest);
    contextRequest.setEntity(variant);
    if (targetDirectory) {
      contextRequest.setResourceRef(this.targetUri);
      getDispatcher().handle(contextRequest,contextResponse);
    }
 else {
      ReferenceList references=getVariantsReferences(true);
      if (!references.isEmpty()) {
        contextRequest.setResourceRef(references.get(0));
        getDispatcher().handle(contextRequest,contextResponse);
      }
 else {
        contextRequest.setResourceRef(this.targetUri);
        getDispatcher().handle(contextRequest,contextResponse);
      }
    }
    status=contextResponse.getStatus();
  }
  return new Result(status);
}
