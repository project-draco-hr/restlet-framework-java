def test_undetected_mutation(self):
    memorywaster = []
    for i in range(20):

        def mutating_cmp(x, y):
            L.append(3)
            L.pop()
            return cmp(x, y)
        L = [1, 2]
        self.assertRaises(ValueError, L.sort, mutating_cmp)

        def mutating_cmp(x, y):
            L.append(3)
            del L[:]
            return cmp(x, y)
        self.assertRaises(ValueError, L.sort, mutating_cmp)
        memorywaster = [memorywaster]
