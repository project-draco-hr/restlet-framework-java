{
  List<Representation> variants=resource.getVariants();
  if ((variants == null) || (variants.size() < 1)) {
    setStatus(Status.CLIENT_ERROR_NOT_FOUND);
  }
 else {
    Representation preferredVariant=getRequest().getClientInfo().getPreferredVariant(variants);
    getDimensions().add(Dimension.CHARACTER_SET);
    getDimensions().add(Dimension.ENCODING);
    getDimensions().add(Dimension.LANGUAGE);
    getDimensions().add(Dimension.MEDIA_TYPE);
    if (preferredVariant == null) {
      setStatus(Status.CLIENT_ERROR_NOT_ACCEPTABLE);
      ReferenceList refs=new ReferenceList(variants.size());
      for (      Representation variant : variants) {
        if (variant.getIdentifier() != null) {
          refs.add(variant.getIdentifier());
        }
      }
      this.setEntity(refs.getTextRepresentation());
    }
 else {
      setEntity(preferredVariant);
    }
  }
}
