{
  boolean success=checkVirtualHost(getHelped().getDefaultHost());
  if (success) {
    for (    final VirtualHost host : getHelped().getHosts()) {
      success=success && checkVirtualHost(host);
    }
  }
  if (!success) {
    getHelped().stop();
  }
 else {
    if (getHelped().getLogService().isEnabled()) {
      addFilter(createLogFilter(getHelped().getContext().createChildContext(),getHelped().getLogService()));
    }
    if (getHelped().getStatusService().isEnabled()) {
      addFilter(createStatusFilter(getHelped()));
    }
    setNext(getServerRouter());
  }
}
