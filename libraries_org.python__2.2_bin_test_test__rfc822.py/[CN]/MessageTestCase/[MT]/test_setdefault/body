def test_setdefault(self):
    msg = self.create_message('To: "last, first" <userid@foo.net>\n\ntest\n')
    self.assert_((not msg.has_key('New-Header')))
    self.assert_((msg.setdefault('New-Header', 'New-Value') == 'New-Value'))
    self.assert_((msg.setdefault('New-Header', 'Different-Value') == 'New-Value'))
    self.assert_((msg['new-header'] == 'New-Value'))
    self.assert_((msg.setdefault('Another-Header') == ''))
    self.assert_((msg['another-header'] == ''))
