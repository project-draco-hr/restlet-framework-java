{
  if (response != null) {
    getLogger().fine("Handling outbound message");
    ConnectedRequest request=(ConnectedRequest)response.getRequest();
    Connection<Server> connection=request.getConnection();
    if (request.isExpectingResponse()) {
      Response nextResponse=connection.getInboundWay().getMessages().peek();
      if ((nextResponse != null) && (nextResponse.getRequest() == request)) {
        connection.getOutboundWay().getMessages().add(response);
      }
 else {
        getOutboundMessages().add(response);
        getController().wakeup();
      }
    }
 else {
    }
  }
}
