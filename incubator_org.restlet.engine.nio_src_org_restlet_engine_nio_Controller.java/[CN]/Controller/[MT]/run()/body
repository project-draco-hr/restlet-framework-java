{
  setRunning(true);
  long sleepTime=getHelper().getControllerSleepTimeMs();
  while (isRunning()) {
    try {
      if (isOverloaded()) {
        if (!isWorkerServiceFull()) {
          setOverloaded(false);
          getHelper().getLogger().log(Level.INFO,"Accepting new connections and transactions again.");
        }
      }
 else {
        if (isWorkerServiceFull()) {
          setOverloaded(true);
          getHelper().getLogger().log(Level.INFO,"Stop accepting new connections and transactions. Consider increasing the maximum number of threads.");
        }
      }
      selectKey(sleepTime);
      controlConnections(isOverloaded());
      controlHelper();
    }
 catch (    Exception ex) {
      this.helper.getLogger().log(Level.INFO,"Unexpected error while controlling connector",ex);
    }
  }
}
