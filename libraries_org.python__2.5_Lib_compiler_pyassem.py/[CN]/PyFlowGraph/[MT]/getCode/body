def getCode(self):
    'Get a Python code object'
    assert (self.stage == RAW)
    self.computeStackDepth()
    self.flattenGraph()
    assert (self.stage == FLAT)
    self.convertArgs()
    assert (self.stage == CONV)
    self.makeByteCode()
    assert (self.stage == DONE)
    return self.newCodeObject()
