def testdgram(proto, addr):
    s = socket.socket(proto, socket.SOCK_DGRAM)
    s.sendto(teststring, addr)
    buf = data = receive(s, 100)
    while (data and ('\n' not in buf)):
        data = receive(s, 100)
        buf += data
    verify((buf == teststring))
    s.close()
