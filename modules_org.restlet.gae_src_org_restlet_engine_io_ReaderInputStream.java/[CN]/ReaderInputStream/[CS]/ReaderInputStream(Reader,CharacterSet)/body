{
  this.reader=(reader instanceof BufferedReader) ? (BufferedReader)reader : new BufferedReader(reader);
  this.pipedInputStream=new PipedInputStream();
  this.pipedOutputStream=new PipedOutputStream(this.pipedInputStream);
  if (characterSet != null) {
    this.outputStreamWriter=new OutputStreamWriter(this.pipedOutputStream,characterSet.getName());
  }
 else {
    this.outputStreamWriter=new OutputStreamWriter(this.pipedOutputStream);
  }
}
