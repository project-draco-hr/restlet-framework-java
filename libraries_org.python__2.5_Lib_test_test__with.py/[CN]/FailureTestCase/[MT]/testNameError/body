def testNameError(self):

    def fooNotDeclared():
        with foo:
            pass
    self.assertRaises(NameError, fooNotDeclared)
