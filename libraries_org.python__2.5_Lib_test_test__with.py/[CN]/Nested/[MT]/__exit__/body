def __exit__(self, *exc_info):
    ex = exc_info
    for mgr in self.entered:
        try:
            if mgr.__exit__(*ex):
                ex = (None, None, None)
        except:
            ex = sys.exc_info()
    self.entered = None
    if (ex is not exc_info):
        raise ex[0], ex[1], ex[2]
