def testWithYield(self):
    mock = mock_contextmanager_generator()

    def gen():
        with mock:
            yield 12
            yield 13
    x = list(gen())
    self.assertEqual(x, [12, 13])
    self.assertAfterWithManagerInvariantsNoError(mock)
