def run_and_compare(self, func, events):
    tracer = Tracer()
    sys.settrace(tracer.trace)
    func()
    sys.settrace(None)
    self.compare_events(func.func_code.co_firstlineno, tracer.events, events)
