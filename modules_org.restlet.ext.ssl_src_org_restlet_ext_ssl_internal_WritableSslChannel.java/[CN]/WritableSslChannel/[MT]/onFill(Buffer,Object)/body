{
  if (getConnection().getSslState() == SslState.READING_APPLICATION_DATA) {
    getConnection().setSslState(SslState.WRITING_APPLICATION_DATA);
  }
  int srcSize=buffer.remaining();
  ByteBuffer applicationBuffer=(ByteBuffer)args[0];
  SSLEngineResult sslResult=getConnection().getSslEngine().wrap(applicationBuffer,buffer.getBytes());
  getConnection().handleResult(sslResult,buffer,buffer.getBytes(),this);
  return srcSize - buffer.remaining();
}
