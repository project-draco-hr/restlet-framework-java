{
  int result=0;
  if (getPacketBuffer().isDraining()) {
    if (getWrappedChannel().isOpen()) {
      result=getWrappedChannel().write(getPacketBuffer().getBytes());
      if (getConnection().getLogger().isLoggable(Level.INFO)) {
        getConnection().getLogger().log(Level.INFO,"Packet bytes written: " + result);
      }
      if (!getPacketBuffer().getBytes().hasRemaining()) {
        getPacketBuffer().clear();
      }
    }
  }
  return result;
}
