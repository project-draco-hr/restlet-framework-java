def write_rsrc(self, data):
    if (self.state < _DID_DATA):
        self.close_data()
    if (self.state != _DID_DATA):
        raise Error, 'Writing resource data at the wrong time'
    self.rlen = (self.rlen - len(data))
    self._write(data)
