{
  Representation result=null;
  ConverterHelper ch=ConverterUtils.getBestHelper(source,target,resource);
  if (ch != null) {
    try {
      Context.getCurrentLogger().fine("The following converter was selected for the " + source + " object: "+ ch);
      if (target == null) {
        target=new Variant();
      }
      result=ch.toRepresentation(source,target,resource);
      if (result != null) {
        if (result.getCharacterSet() == null) {
          result.setCharacterSet(target.getCharacterSet());
        }
        if (result.getMediaType() == null) {
          result.setMediaType(target.getMediaType());
        }
        if (result.getEncodings().isEmpty()) {
          result.getEncodings().addAll(target.getEncodings());
        }
        if (result.getLanguages().isEmpty()) {
          result.getLanguages().addAll(target.getLanguages());
        }
      }
    }
 catch (    IOException e) {
      Context.getCurrentLogger().log(Level.WARNING,"Unable to convert object to a representation",e);
    }
  }
 else {
    Context.getCurrentLogger().warning("Unable to find a converter for this object : " + source);
  }
  return result;
}
