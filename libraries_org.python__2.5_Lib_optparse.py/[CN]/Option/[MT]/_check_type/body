def _check_type(self):
    if (self.type is None):
        if (self.action in self.ALWAYS_TYPED_ACTIONS):
            if (self.choices is not None):
                self.type = 'choice'
            else:
                self.type = 'string'
    else:
        import __builtin__
        if ((type(self.type) is types.TypeType) or (hasattr(self.type, '__name__') and (getattr(__builtin__, self.type.__name__, None) is self.type))):
            self.type = self.type.__name__
        if (self.type == 'str'):
            self.type = 'string'
        if (self.type not in self.TYPES):
            raise OptionError(('invalid option type: %r' % self.type), self)
        if (self.action not in self.TYPED_ACTIONS):
            raise OptionError(('must not supply a type for action %r' % self.action), self)
