{
  final MediaType mediaType=getMediaType(httpHeaders);
  String charset=null;
  if (mediaType != null) {
    charset=mediaType.getParameters().getFirstValue(CHARSET);
  }
  if ((charset == null) || (charset.length() == 0)) {
    return defaultCs != null ? defaultCs.toString() : null;
  }
  return charset;
}
