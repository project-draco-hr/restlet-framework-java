{
  StringBuilder path=getPath();
  if (extension == null) {
    int lastSegmSt=path.lastIndexOf(".");
    if (lastSegmSt > 0)     path.delete(lastSegmSt,Integer.MAX_VALUE);
  }
 else {
    CharSequence e=EncodeOrCheck.pathSegmentWithMatrix(extension,encode);
    if (e.charAt(0) != '.')     path.append('.');
    path.append(e);
  }
  return this;
}
