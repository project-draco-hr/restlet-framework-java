def find_all_submodules(self, m):
    if (not m.__path__):
        return
    modules = {}
    suffixes = []
    for triple in imp.get_suffixes():
        suffixes.append(triple[0])
    for dir in m.__path__:
        try:
            names = os.listdir(dir)
        except os.error:
            self.msg(2, "can't list directory", dir)
            continue
        for name in names:
            mod = None
            for suff in suffixes:
                n = len(suff)
                if (name[(- n):] == suff):
                    mod = name[:(- n)]
                    break
            if (mod and (mod != '__init__')):
                modules[mod] = mod
    return modules.keys()
