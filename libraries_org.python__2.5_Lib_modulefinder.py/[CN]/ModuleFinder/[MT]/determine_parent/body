def determine_parent(self, caller):
    self.msgin(4, 'determine_parent', caller)
    if (not caller):
        self.msgout(4, 'determine_parent -> None')
        return None
    pname = caller.__name__
    if caller.__path__:
        parent = self.modules[pname]
        assert (caller is parent)
        self.msgout(4, 'determine_parent ->', parent)
        return parent
    if ('.' in pname):
        i = pname.rfind('.')
        pname = pname[:i]
        parent = self.modules[pname]
        assert (parent.__name__ == pname)
        self.msgout(4, 'determine_parent ->', parent)
        return parent
    self.msgout(4, 'determine_parent -> None')
    return None
