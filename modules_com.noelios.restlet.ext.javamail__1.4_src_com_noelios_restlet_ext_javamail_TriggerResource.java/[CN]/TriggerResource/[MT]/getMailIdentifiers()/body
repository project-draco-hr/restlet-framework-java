{
  List<String> result=new ArrayList<String>();
  Request request=new Request(Method.GET,getMailboxUri());
  if (getMailboxChallengeScheme() != null) {
    ChallengeResponse challengeResponse=new ChallengeResponse(getMailboxChallengeScheme(),getMailboxLogin(),getMailboxPassword());
    request.setChallengeResponse(challengeResponse);
  }
  Response response=getContext().getClientDispatcher().handle(request);
  if (!response.getStatus().isSuccess()) {
    throw new ResourceException(response.getStatus(),"Cannot get the mail iddentifiers.");
  }
  if (response.isEntityAvailable()) {
    DomRepresentation rep=response.getEntityAsDom();
    for (    Node node : rep.getNodes("/emails/email/@href")) {
      String href=node.getNodeValue();
      if (href.startsWith("/")) {
        result.add(href.substring(1));
      }
 else {
        result.add(href);
      }
    }
  }
  return result;
}
