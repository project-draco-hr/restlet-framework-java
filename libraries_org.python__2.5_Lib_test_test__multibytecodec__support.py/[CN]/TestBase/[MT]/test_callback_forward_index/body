def test_callback_forward_index(self):

    def myreplace(exc):
        return (u'REPLACED', (exc.end + 2))
    codecs.register_error('test.cjktest', myreplace)
    self.assertEqual(self.encode(((u'abcd' + self.unmappedunicode) + u'efgh'), 'test.cjktest'), ('abcdREPLACEDgh', 9))
