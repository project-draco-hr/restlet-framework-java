def test_callback_long_index(self):

    def myreplace(exc):
        return (u'x', long(exc.end))
    codecs.register_error('test.cjktest', myreplace)
    self.assertEqual(self.encode(((u'abcd' + self.unmappedunicode) + u'efgh'), 'test.cjktest'), ('abcdxefgh', 9))

    def myreplace(exc):
        return (u'x', (sys.maxint + 1))
    codecs.register_error('test.cjktest', myreplace)
    self.assertRaises(IndexError, self.encode, self.unmappedunicode, 'test.cjktest')
