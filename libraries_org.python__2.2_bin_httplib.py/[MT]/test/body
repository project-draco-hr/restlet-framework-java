def test():
    'Test this module.\n\n    A hodge podge of tests collected here, because they have too many\n    external dependencies for the regular test suite.\n    '
    import sys
    import getopt
    (opts, args) = getopt.getopt(sys.argv[1:], 'd')
    dl = 0
    for (o, a) in opts:
        if (o == '-d'):
            dl = (dl + 1)
    host = 'www.python.org'
    selector = '/'
    if args[0:]:
        host = args[0]
    if args[1:]:
        selector = args[1]
    h = HTTP()
    h.set_debuglevel(dl)
    h.connect(host)
    h.putrequest('GET', selector)
    h.endheaders()
    (status, reason, headers) = h.getreply()
    print 'status =', status
    print 'reason =', reason
    print 'read', len(h.getfile().read())
    print 
    if headers:
        for header in headers.headers:
            print header.strip()
    print 


    class HTTP11(HTTP):
        _http_vsn = 11
        _http_vsn_str = 'HTTP/1.1'
    h = HTTP11('www.python.org')
    h.putrequest('GET', 'http://www.python.org/~jeremy/')
    h.endheaders()
    h.getreply()
    h.close()
    if hasattr(socket, 'ssl'):
        for (host, selector) in (('sourceforge.net', '/projects/python'),):
            print ('https://%s%s' % (host, selector))
            hs = HTTPS()
            hs.set_debuglevel(dl)
            hs.connect(host)
            hs.putrequest('GET', selector)
            hs.endheaders()
            (status, reason, headers) = hs.getreply()
            print 'status =', status
            print 'reason =', reason
            print 'read', len(hs.getfile().read())
            print 
            if headers:
                for header in headers.headers:
                    print header.strip()
            print 
