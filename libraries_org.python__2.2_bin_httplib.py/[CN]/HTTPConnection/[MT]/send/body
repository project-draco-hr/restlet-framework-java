def send(self, str):
    "Send `str' to the server."
    if (self.sock is None):
        if self.auto_open:
            self.connect()
        else:
            raise NotConnected()
    if (self.debuglevel > 0):
        print 'send:', repr(str)
    try:
        self.sock.sendall(str)
    except socket.error as v:
        if (v[0] == 32):
            self.close()
        raise
