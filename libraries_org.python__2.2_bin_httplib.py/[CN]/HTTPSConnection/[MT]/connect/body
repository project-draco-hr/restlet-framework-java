def connect(self):
    'Connect to a host on a given (SSL) port.'
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.connect((self.host, self.port))
    realsock = sock
    if hasattr(sock, '_sock'):
        realsock = sock._sock
    ssl = socket.ssl(realsock, self.key_file, self.cert_file)
    self.sock = FakeSocket(sock, ssl)
