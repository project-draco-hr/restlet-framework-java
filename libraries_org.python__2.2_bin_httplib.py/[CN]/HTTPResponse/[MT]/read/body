def read(self, amt=None):
    if (self.fp is None):
        return ''
    if self.chunked:
        return self._read_chunked(amt)
    if (amt is None):
        if self.will_close:
            s = self.fp.read()
        else:
            s = self._safe_read(self.length)
        self.close()
        return s
    if (self.length is not None):
        if (amt > self.length):
            amt = self.length
        self.length -= amt
    s = self.fp.read(amt)
    return s
