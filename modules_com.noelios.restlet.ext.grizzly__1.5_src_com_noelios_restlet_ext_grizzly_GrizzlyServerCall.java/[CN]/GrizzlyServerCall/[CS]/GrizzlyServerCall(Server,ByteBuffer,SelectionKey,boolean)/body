{
  super(server);
  setConfidential(confidential);
  try {
    ByteBufferInputStream headStream=null;
    if (confidential) {
      headStream=new SSLByteBufferInputStream();
    }
 else {
      headStream=new ByteBufferInputStream();
    }
    headStream.setSelectionKey(key);
    headStream.setByteBuffer(byteBuffer);
    this.socketChannel=(SocketChannel)key.channel();
    readRequestHead(headStream);
  }
 catch (  IOException ioe) {
    getLogger().log(Level.WARNING,"Unable to parse the HTTP request",ioe);
  }
}
