{
  MetadataService metadataService=resource.getMetadataService();
  if (metadataService != null) {
    MethodAnnotationInfo ai=annotation;
    if (ai == null) {
      List<AnnotationInfo> annotations=resource.isAnnotated() ? AnnotationUtils.getInstance().getAnnotations(resource.getClass()) : null;
      for (      AnnotationInfo annotationInfo : annotations) {
        if (annotationInfo instanceof MethodAnnotationInfo) {
          MethodAnnotationInfo mai=(MethodAnnotationInfo)annotationInfo;
          if (info.getMethod().equals(mai.getRestletMethod())) {
            ai=mai;
            break;
          }
        }
      }
    }
    if (ai != null) {
      try {
        Class<?>[] classes=ai.getJavaInputTypes();
        List<Variant> requestVariants=ai.getRequestVariants(resource.getMetadataService(),resource.getConverterService());
        if (classes != null && classes.length > 0 && requestVariants != null) {
          for (          Variant variant : requestVariants) {
            if ((variant.getMediaType() != null) && ((info.getRequest() == null) || !info.getRequest().getRepresentations().contains(variant))) {
              if (info.getRequest() == null) {
                info.setRequest(new RequestInfo());
              }
              RepresentationInfo representationInfo=RepresentationInfo.describe(info,ai.getJavaMethod().getParameterTypes()[0],ai.getJavaMethod().getGenericParameterTypes()[0],variant);
              info.getRequest().getRepresentations().add(representationInfo);
            }
          }
        }
        if (ai.getQuery() != null) {
          Form form=new Form(ai.getQuery());
          for (          Parameter parameter : form) {
            ParameterInfo pi=new ParameterInfo(parameter.getName(),true,null,ParameterStyle.QUERY,"Value: " + parameter.getValue());
            pi.setDefaultValue(parameter.getValue());
            info.getParameters().add(pi);
          }
        }
        Class<?> outputClass=ai.getJavaOutputType();
        if (outputClass != null) {
          List<Variant> responseVariants=ai.getResponseVariants(resource.getMetadataService(),resource.getConverterService());
          if (responseVariants != null) {
            for (            Variant variant : responseVariants) {
              if ((variant.getMediaType() != null) && !info.getResponse().getRepresentations().contains(variant)) {
                RepresentationInfo representationInfo=RepresentationInfo.describe(info,ai.getJavaMethod().getReturnType(),ai.getJavaMethod().getGenericReturnType(),variant);
                info.getResponse().getRepresentations().add(representationInfo);
              }
            }
          }
        }
        if (info.getResponse().getStatuses().isEmpty()) {
          info.getResponse().getStatuses().add(Status.SUCCESS_OK);
          info.getResponse().setDocumentation("Success");
        }
      }
 catch (      IOException e) {
        throw new ResourceException(e);
      }
    }
  }
}
