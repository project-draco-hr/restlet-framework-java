{
  MetadataService metadataService=resource.getMetadataService();
  List<AnnotationInfo> annotations=resource.isAnnotated() ? AnnotationUtils.getInstance().getAnnotations(resource.getClass()) : null;
  if (annotations != null && metadataService != null) {
    for (    AnnotationInfo annotationInfo : annotations) {
      try {
        if (info.getMethod().equals(annotationInfo.getRestletMethod())) {
          Class<?>[] classes=annotationInfo.getJavaInputTypes();
          Class<?> inputClass=(classes != null && classes.length > 0) ? classes[0] : null;
          List<Variant> requestVariants=annotationInfo.getRequestVariants(resource.getMetadataService(),resource.getConverterService());
          if (requestVariants != null) {
            for (            Variant variant : requestVariants) {
              if ((variant.getMediaType() != null) && ((info.getRequest() == null) || !info.getRequest().getRepresentations().contains(variant))) {
                if (info.getRequest() == null) {
                  info.setRequest(new RequestInfo());
                }
                RepresentationInfo representationInfo=RepresentationInfo.describe(info,inputClass,variant);
                info.getRequest().getRepresentations().add(representationInfo);
              }
            }
          }
          if (annotationInfo.getQuery() != null) {
            Form form=new Form(annotationInfo.getQuery());
            for (            Parameter parameter : form) {
              ParameterInfo pi=new ParameterInfo(parameter.getName(),true,null,ParameterStyle.QUERY,"Value: " + parameter.getValue());
              pi.setDefaultValue(parameter.getValue());
              info.getParameters().add(pi);
            }
          }
          Class<?> outputClass=annotationInfo.getJavaOutputType();
          if (outputClass != null) {
            List<Variant> responseVariants=annotationInfo.getResponseVariants(resource.getMetadataService(),resource.getConverterService());
            if (responseVariants != null) {
              for (              Variant variant : responseVariants) {
                if ((variant.getMediaType() != null) && !info.getResponse().getRepresentations().contains(variant)) {
                  RepresentationInfo representationInfo=RepresentationInfo.describe(info,outputClass,variant);
                  info.getResponse().getRepresentations().add(representationInfo);
                }
              }
            }
          }
          if (info.getResponse().getStatuses().isEmpty()) {
            info.getResponse().getStatuses().add(Status.SUCCESS_OK);
            info.getResponse().setDocumentation("Success");
          }
        }
      }
 catch (      IOException e) {
        throw new ResourceException(e);
      }
    }
  }
}
