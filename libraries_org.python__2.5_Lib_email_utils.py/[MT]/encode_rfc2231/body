def encode_rfc2231(s, charset=None, language=None):
    'Encode string according to RFC 2231.\n\n    If neither charset nor language is given, then s is returned as-is.  If\n    charset is given but not language, the string is encoded using the empty\n    string for language.\n    '
    import urllib
    s = urllib.quote(s, safe='')
    if ((charset is None) and (language is None)):
        return s
    if (language is None):
        language = ''
    return ("%s'%s'%s" % (charset, language, s))
