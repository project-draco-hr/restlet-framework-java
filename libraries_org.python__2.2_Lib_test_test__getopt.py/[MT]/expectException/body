def expectException(teststr, expected, failure=AssertionError):
    'Executes a statement passed in teststr, and raises an exception\n       (failure) if the expected exception is *not* raised.'
    try:
        exec teststr
    except expected:
        pass
    else:
        raise failure
