def run(statement, filename=None):
    'Run statement under profiler optionally saving results in filename\n\n    This function takes a single argument that can be passed to the\n    "exec" statement, and an optional file name.  In all cases this\n    routine attempts to "exec" its first argument and gather profiling\n    statistics from the execution. If no file name is present, then this\n    function automatically prints a simple profiling report, sorted by the\n    standard name string (file/line/function-name) that is presented in\n    each line.\n    '
    prof = Profile()
    try:
        prof = prof.run(statement)
    except SystemExit:
        pass
    if (filename is not None):
        prof.dump_stats(filename)
    else:
        return prof.print_stats()
