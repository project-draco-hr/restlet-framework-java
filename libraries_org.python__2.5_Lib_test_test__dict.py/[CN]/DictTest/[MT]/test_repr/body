def test_repr(self):
    d = {}
    self.assertEqual(repr(d), '{}')
    d[1] = 2
    self.assertEqual(repr(d), '{1: 2}')
    d = {}
    d[1] = d
    self.assertEqual(repr(d), '{1: {...}}')


    class Exc(Exception):
        pass


    class BadRepr(object):

        def __repr__(self):
            raise Exc()
    d = {1: BadRepr(), }
    self.assertRaises(Exc, repr, d)
