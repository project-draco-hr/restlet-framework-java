{
  String userAgent1="Mozilla/4.0 (compatible; MSIE 6.0; America Online Browser 1.1; rev1.1; Windows NT 5.1;)";
  String userAgent2="Advanced Browser (http://www.avantbrowser.com)";
  String userAgent3="Mozilla/5.0";
  String userAgent4="Mozilla";
  String userAgent5="Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en-US; rv:1.8) Gecko/20051107 Camino/1.0b1";
  String userAgent6="Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1) Gecko/20061024 Iceweasel/2.0 (Debian-2.0+dfsg-1)";
  List<Product> list=Engine.getInstance().parseUserAgent(userAgent1);
  assertEquals(1,list.size());
  assertEquals("Mozilla",list.get(0).getName());
  assertEquals("4.0",list.get(0).getVersion());
  assertEquals("compatible; MSIE 6.0; America Online Browser 1.1; rev1.1; Windows NT 5.1;",list.get(0).getComment());
  list=Engine.getInstance().parseUserAgent(userAgent2);
  assertEquals(1,list.size());
  assertEquals(list.get(0).getName(),"Advanced Browser");
  assertNull(list.get(0).getVersion());
  assertEquals(list.get(0).getComment(),"http://www.avantbrowser.com");
  list=Engine.getInstance().parseUserAgent(userAgent3);
  assertEquals(1,list.size());
  assertEquals("Mozilla",list.get(0).getName());
  assertEquals("5.0",list.get(0).getVersion());
  assertNull(list.get(0).getComment());
  list=Engine.getInstance().parseUserAgent(userAgent4);
  assertEquals(1,list.size());
  assertEquals("Mozilla",list.get(0).getName());
  assertNull(list.get(0).getVersion());
  assertNull(list.get(0).getComment());
  list=Engine.getInstance().parseUserAgent(userAgent5);
  assertEquals(3,list.size());
  assertEquals("Mozilla",list.get(0).getName());
  assertEquals("5.0",list.get(0).getVersion());
  assertEquals("Macintosh; U; PPC Mac OS X; en-US; rv:1.8",list.get(0).getComment());
  assertEquals("Gecko",list.get(1).getName());
  assertEquals("20051107",list.get(1).getVersion());
  assertNull(list.get(1).getComment());
  assertEquals("Camino",list.get(2).getName());
  assertEquals("1.0b1",list.get(2).getVersion());
  assertNull(list.get(2).getComment());
  list=Engine.getInstance().parseUserAgent(userAgent6);
  assertEquals(3,list.size());
  assertEquals("Mozilla",list.get(0).getName());
  assertEquals("5.0",list.get(0).getVersion());
  assertEquals("X11; U; Linux i686; en-US; rv:1.8.1",list.get(0).getComment());
  assertEquals("Gecko",list.get(1).getName());
  assertEquals("20061024",list.get(1).getVersion());
  assertNull(list.get(1).getComment());
  assertEquals("Iceweasel",list.get(2).getName());
  assertEquals("2.0",list.get(2).getVersion());
  assertEquals("Debian-2.0+dfsg-1",list.get(2).getComment());
  List<Product> products=new ArrayList<Product>();
  products.add(new Product("Product","1.2",null));
  products.add(new Product("Nre","1.1m4","This is a comment"));
  list=Engine.getInstance().parseUserAgent(Engine.getInstance().formatUserAgent(products));
  assertEquals(2,list.size());
  assertEquals("Product",list.get(0).getName());
  assertEquals("1.2",list.get(0).getVersion());
  assertNull(list.get(0).getComment());
  assertEquals("Nre",list.get(1).getName());
  assertEquals("1.1m4",list.get(1).getVersion());
  assertEquals("This is a comment",list.get(1).getComment());
}
