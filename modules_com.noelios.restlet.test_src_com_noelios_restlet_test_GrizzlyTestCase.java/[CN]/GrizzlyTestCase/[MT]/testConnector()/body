{
  Engine nre=new Engine(false);
  nre.getRegisteredServers().add(new HttpServerHelper(null));
  nre.getRegisteredClients().add(new HttpClientHelper(null));
  org.restlet.util.Engine.setInstance(nre);
  Component clientComponent=new Component();
  Component originComponent=new Component();
  clientComponent.getClients().add(Protocol.HTTP);
  Restlet trace=new Restlet(originComponent.getContext()){
    public void handle(    Request request,    Response response){
      Form inputForm=request.getEntityAsForm();
      response.setEntity(inputForm.getWebRepresentation());
    }
  }
;
  originComponent.getDefaultHost().attach("",trace);
  originComponent.getServers().add(Protocol.HTTP,9090);
  originComponent.start();
  clientComponent.start();
  Context context=clientComponent.getContext();
  String uri="http://localhost:9090/?foo=bar";
  testCall(context,Method.POST,uri);
  testCall(context,Method.PUT,uri);
  clientComponent.stop();
  originComponent.stop();
}
