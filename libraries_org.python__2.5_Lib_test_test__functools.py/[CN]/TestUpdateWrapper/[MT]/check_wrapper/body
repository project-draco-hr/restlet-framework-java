def check_wrapper(self, wrapper, wrapped, assigned=functools.WRAPPER_ASSIGNMENTS, updated=functools.WRAPPER_UPDATES):
    for name in assigned:
        self.failUnless((getattr(wrapper, name) == getattr(wrapped, name)))
    for name in updated:
        wrapper_attr = getattr(wrapper, name)
        wrapped_attr = getattr(wrapped, name)
        for key in wrapped_attr:
            self.failUnless((wrapped_attr[key] is wrapper_attr[key]))
