{
  super.onHeadersCompleted();
  InboundRequest request=(InboundRequest)getMessage().getRequest();
  if (getHeaders() != null) {
    request.setHeaders(getHeaders());
  }
  if (HeaderUtils.isConnectionClose(getHeaders())) {
    getConnection().setState(ConnectionState.CLOSING);
  }
  Representation entity=createEntity(getHeaders());
  getMessage().getRequest().setEntity(entity);
  getMessage().getServerInfo().setAddress(getConnection().getHelper().getHelped().getAddress());
  getMessage().getServerInfo().setPort(getConnection().getHelper().getHelped().getPort());
  onReceived(getMessage());
}
