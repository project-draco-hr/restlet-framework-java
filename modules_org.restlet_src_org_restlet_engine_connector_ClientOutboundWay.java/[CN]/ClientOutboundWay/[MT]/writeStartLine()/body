{
  Request request=getMessage().getRequest();
  getLineBuilder().append(request.getMethod().getName());
  getLineBuilder().append(' ');
  getLineBuilder().append(ReferenceUtils.format(request.getResourceRef(),getHelper().isProxying(),request));
  getLineBuilder().append(' ');
  getLineBuilder().append(getVersion(request));
  getLineBuilder().append("\r\n");
  getActualMessage().setEntity(AuthenticatorUtils.updateEntity(getActualMessage().getEntity(),getActualMessage().getChallengeResponse(),getActualMessage()));
}
