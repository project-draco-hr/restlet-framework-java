{
  return new OutputStream(){
    @Override public void write(    int b) throws IOException {
      try {
        if (!PipeStream.this.queue.offer(b,QUEUE_TIMEOUT,TimeUnit.SECONDS)) {
          throw new IOException("Timeout while writing to the queue-based output stream");
        }
      }
 catch (      InterruptedException ie) {
        throw new IOException("Interruption occurred while writing in the queue");
      }
    }
  }
;
}
