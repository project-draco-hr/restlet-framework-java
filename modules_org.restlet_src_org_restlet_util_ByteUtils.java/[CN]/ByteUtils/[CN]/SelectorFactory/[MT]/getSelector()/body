{
synchronized (selectors) {
    Selector selector=null;
    try {
      if (selectors.size() != 0)       selector=selectors.pop();
    }
 catch (    EmptyStackException ex) {
    }
    int attempts=0;
    try {
      while (selector == null && attempts < 2) {
        selectors.wait(timeout);
        try {
          if (selectors.size() != 0)           selector=selectors.pop();
        }
 catch (        EmptyStackException ex) {
          break;
        }
        attempts++;
      }
    }
 catch (    InterruptedException ex) {
    }
    return selector;
  }
}
