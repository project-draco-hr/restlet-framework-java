{
  if (request != null) {
    Response response=null;
    if (request.producesResponse()) {
      response=createResponse(request);
      response.getServerInfo().setAgent(Engine.VERSION_HEADER);
    }
    handle(request,response);
    if ((response != null) && !response.isCommitted() && response.isAutoCommitting()) {
      getPendingResponses().add(response);
      response.setCommitted(true);
    }
  }
  handleNextResponse();
}
