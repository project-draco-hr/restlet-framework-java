{
  if (this.acceptorService != null) {
    try {
      getServerSocket().close();
      this.acceptorTask.setRunning(false);
      this.acceptorService.shutdown();
      this.acceptorService.awaitTermination(30,TimeUnit.SECONDS);
    }
 catch (    Exception ex) {
      getLogger().log(Level.FINE,"Interruption while shutting down the acceptor service",ex);
    }
  }
  if (this.serverSocket != null) {
    this.serverSocket.close();
  }
  super.stop();
  getAttributes().put("ephemeralPort",-1);
}
