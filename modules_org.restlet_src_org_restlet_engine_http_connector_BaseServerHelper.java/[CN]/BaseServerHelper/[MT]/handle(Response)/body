{
  if (response != null) {
    ConnectedRequest request=(ConnectedRequest)response.getRequest();
    BaseServerConnection connection=(BaseServerConnection)request.getConnection();
    if (connection.getInboundRequests().peek() == request) {
      if (!response.getStatus().isInformational()) {
        connection.getInboundRequests().remove(request);
      }
      connection.getOutboundResponses().add(response);
      connection.writeResponses();
    }
 else {
      getPendingResponses().add(response);
    }
  }
}
