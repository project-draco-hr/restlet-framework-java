def localtrace_trace_and_count(self, frame, why, arg):
    if (why == 'line'):
        filename = frame.f_code.co_filename
        lineno = frame.f_lineno
        key = (filename, lineno)
        self.counts[key] = (self.counts.get(key, 0) + 1)
        bname = os.path.basename(filename)
        print ('%s(%d): %s' % (bname, lineno, linecache.getline(filename, lineno))),
    return self.localtrace
