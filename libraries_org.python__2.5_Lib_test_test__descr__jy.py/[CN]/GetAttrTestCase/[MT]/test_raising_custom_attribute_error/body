def test_raising_custom_attribute_error(self):


    class BarAttributeError(AttributeError):
        pass


    class Bar(object):

        def __getattr__(self, name):
            raise BarAttributeError


    class BarClassic:

        def __getattr__(self, name):
            raise BarAttributeError


    class Foo(object):

        def __getattr__(self, name):
            raise AttributeError('Custom message')


    class FooClassic:

        def __getattr__(self, name):
            raise AttributeError('Custom message')
    self.assertRaises(BarAttributeError, (lambda : Bar().x))
    self.assertRaises(BarAttributeError, (lambda : BarClassic().x))
    try:
        Foo().x
        self.assert_(False)
    except AttributeError as e:
        self.assertEquals('Custom message', str(e))
    try:
        FooClassic().x
        self.assert_(False)
    except AttributeError as e:
        self.assertEquals('Custom message', str(e))
