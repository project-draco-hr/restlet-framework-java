def flat_conjoin(gs):
    n = len(gs)
    values = ([None] * n)
    iters = ([None] * n)
    _StopIteration = StopIteration
    i = 0
    while 1:
        try:
            while (i < n):
                it = iters[i] = gs[i]().next
                values[i] = it()
                i += 1
        except _StopIteration:
            pass
        else:
            assert (i == n)
            yield values
        i -= 1
        while (i >= 0):
            try:
                values[i] = iters[i]()
                i += 1
                break
            except _StopIteration:
                i -= 1
        else:
            assert (i < 0)
            break
