def zipTest(f, compression, srccontents):
    zip = zipfile.ZipFile(f, 'w', compression)
    zip.write(srcname, (('another' + os.extsep) + 'name'))
    zip.write(srcname, srcname)
    zip.close()
    zip = zipfile.ZipFile(f, 'r', compression)
    readData2 = zip.read(srcname)
    readData1 = zip.read((('another' + os.extsep) + 'name'))
    zip.close()
    if ((readData1 != srccontents) or (readData2 != srccontents)):
        raise TestFailed, "Written data doesn't equal read data."
