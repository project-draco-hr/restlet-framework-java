{
  Application application=null;
  final String applicationBeanName=getInitParameter(SpringServerServlet.APPLICATION_BEAN_PARAM_NAME,null);
  application=(Application)getWebApplicationContext().getBean(applicationBeanName);
  if (application != null) {
    final ChildContext applicationContext=(ChildContext)application.getContext();
    application.setContext(new ChildContext(new ServletContextAdapter(this,context),applicationContext.getLogger()));
    String initParam;
    final javax.servlet.ServletConfig servletConfig=getServletConfig();
    for (final Enumeration<String> enum1=servletConfig.getInitParameterNames(); enum1.hasMoreElements(); ) {
      initParam=enum1.nextElement();
      applicationContext.getParameters().add(initParam,servletConfig.getInitParameter(initParam));
    }
    for (final Enumeration<String> enum1=getServletContext().getInitParameterNames(); enum1.hasMoreElements(); ) {
      initParam=enum1.nextElement();
      applicationContext.getParameters().add(initParam,getServletContext().getInitParameter(initParam));
    }
  }
 else {
    application=super.createApplication(context);
  }
  return application;
}
