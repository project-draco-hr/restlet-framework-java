def test_doseq(self):
    given = {'sequence': ['1', '2', '3'], }
    expect = ('sequence=%s' % urllib.quote_plus(str(['1', '2', '3'])))
    result = urllib.urlencode(given)
    self.assertEqual(expect, result)
    result = urllib.urlencode(given, True)
    for value in given['sequence']:
        expect = ('sequence=%s' % value)
        self.assert_((expect in result), ('%s not found in %s' % (expect, result)))
    self.assertEqual(result.count('&'), 2, ("Expected 2 '&'s, got %s" % result.count('&')))
