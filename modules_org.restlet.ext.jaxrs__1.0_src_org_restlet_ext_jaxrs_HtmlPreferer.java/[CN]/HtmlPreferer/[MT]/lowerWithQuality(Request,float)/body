{
  List<Preference<MediaType>> acceptedMediaTypes=request.getClientInfo().getAcceptedMediaTypes();
  float goalQuality=quality - 0.001f;
  boolean alreadyAvailable=false;
  for (  Preference<MediaType> accPref : acceptedMediaTypes) {
    if (accPref.getQuality() == goalQuality) {
      alreadyAvailable=true;
      break;
    }
  }
  if (alreadyAvailable)   lowerWithQuality(request,goalQuality);
  for (  Preference<MediaType> accPref : acceptedMediaTypes) {
    if (accPref.getQuality() == quality)     accPref.setQuality(goalQuality);
  }
}
