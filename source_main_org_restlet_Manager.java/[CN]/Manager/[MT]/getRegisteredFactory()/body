{
  if (registeredFactory == null) {
    String factoryClassName=System.getProperty(PROPERTY_FACTORY);
    if (factoryClassName == null)     factoryClassName="com.noelios.restlet.Engine";
    try {
      registeredFactory=(Factory)Class.forName(factoryClassName).newInstance();
      return registeredFactory;
    }
 catch (    Exception e) {
      logger.log(Level.SEVERE,"Unable to register the Restlet API implementation",e);
      throw new RuntimeException("Unable to register the Restlet API implementation");
    }
  }
 else {
    return registeredFactory;
  }
}
