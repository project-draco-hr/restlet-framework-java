{
  super.start();
  if (this.controller == null) {
    this.controller=new Controller();
    configure(this.controller);
  }
  getLogger().info("Starting the Grizzly " + getProtocols() + " server");
  final CountDownLatch latch=new CountDownLatch(1);
  final Controller controller=this.controller;
  new Thread(){
    public void run(){
      try {
        latch.countDown();
        controller.start();
      }
 catch (      IOException e) {
        getLogger().log(Level.WARNING,"Error while starting the Grizzly controller",e);
      }
    }
  }
.start();
  try {
    latch.await();
  }
 catch (  InterruptedException ex) {
    getLogger().log(Level.WARNING,"Interrupted while waiting for starting latch. Stopping...",ex);
    stop();
  }
}
