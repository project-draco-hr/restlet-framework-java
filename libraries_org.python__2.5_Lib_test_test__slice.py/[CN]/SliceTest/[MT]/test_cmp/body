def test_cmp(self):
    s1 = slice(1, 2, 3)
    s2 = slice(1, 2, 3)
    s3 = slice(1, 2, 4)
    self.assertEqual(s1, s2)
    self.assertNotEqual(s1, s3)


    class Exc(Exception):
        pass


    class BadCmp(object):

        def __eq__(self, other):
            raise Exc
    s1 = slice(BadCmp())
    s2 = slice(BadCmp())
    self.assertRaises(Exc, cmp, s1, s2)
    self.assertEqual(s1, s1)
    s1 = slice(1, BadCmp())
    s2 = slice(1, BadCmp())
    self.assertEqual(s1, s1)
    self.assertRaises(Exc, cmp, s1, s2)
    s1 = slice(1, 2, BadCmp())
    s2 = slice(1, 2, BadCmp())
    self.assertEqual(s1, s1)
    self.assertRaises(Exc, cmp, s1, s2)
