def testformat(formatstr, args, output=None):
    if verbose:
        if output:
            print ('%s %% %s =? %s ...' % (repr(formatstr), repr(args), repr(output))),
        else:
            print ('%s %% %s works? ...' % (repr(formatstr), repr(args))),
    try:
        result = (formatstr % args)
    except OverflowError:
        if (not overflowok):
            raise
        if verbose:
            print 'overflow (this is fine)'
    else:
        if (output and (result != output)):
            if verbose:
                print 'no'
            print ('%s %% %s == %s != %s' % (repr(formatstr), repr(args), repr(result), repr(output)))
        elif verbose:
            print 'yes'
