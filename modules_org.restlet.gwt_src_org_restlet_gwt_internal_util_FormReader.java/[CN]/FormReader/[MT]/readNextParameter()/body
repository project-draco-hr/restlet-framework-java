{
  Parameter result=null;
  boolean readingName=true;
  boolean readingValue=false;
  final StringBuilder nameBuffer=new StringBuilder();
  final StringBuilder valueBuffer=new StringBuilder();
  final CharacterReader cr=new CharacterReader(this.text);
  int nextChar=0;
  while ((result == null) && (nextChar != -1)) {
    nextChar=cr.read();
    if (readingName) {
      if (nextChar == '=') {
        if (nameBuffer.length() > 0) {
          readingName=false;
          readingValue=true;
        }
 else {
          throw new Exception("Empty parameter name detected. Please check your form data");
        }
      }
 else       if ((nextChar == this.separator) || (nextChar == -1)) {
        if (nameBuffer.length() > 0) {
          result=FormUtils.create(nameBuffer,null,this.decode,this.characterSet);
        }
 else         if (nextChar == -1) {
        }
 else {
          throw new Exception("Empty parameter name detected. Please check your form data");
        }
      }
 else {
        nameBuffer.append((char)nextChar);
      }
    }
 else     if (readingValue) {
      if ((nextChar == this.separator) || (nextChar == -1)) {
        if (valueBuffer.length() > 0) {
          result=FormUtils.create(nameBuffer,valueBuffer,this.decode,this.characterSet);
        }
 else {
          result=FormUtils.create(nameBuffer,null,this.decode,this.characterSet);
        }
      }
 else {
        valueBuffer.append((char)nextChar);
      }
    }
  }
  return result;
}
