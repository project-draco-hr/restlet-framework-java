{
  DependencyInjection di=null;
switch (mode) {
case EXPLICIT_INJECTOR:
    Injector injector=RestletGuice.createInjector(mainModule);
  di=injector.getInstance(DependencyInjection.class);
break;
case AUTO_INJECTOR:
di=new RestletGuice.Module(mainModule);
break;
}
if (di == null) {
throw new IllegalStateException("No Injector creation mode specified.");
}
Router router=new Router(getContext());
router.attach(HELLO_PATH,di.inject(ServerResource.class,HelloWorld.class));
router.attachDefault(di.inject(DefaultResource.class));
return router;
}
