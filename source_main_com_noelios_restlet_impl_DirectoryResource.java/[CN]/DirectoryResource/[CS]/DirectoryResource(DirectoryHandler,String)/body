{
  this.directory=directory;
  this.baseUri=new Reference(directory.getRootUri() + resourcePath).getTargetRef().toString();
  if (!this.baseUri.startsWith(directory.getRootUri())) {
    this.baseUri=directory.getRootUri();
  }
  Call call=getDirectory().getContextClient().get(this.baseUri);
  boolean isDirectory=(call.getOutput() != null) && (call.getOutput().getMediaType().equals(MediaTypes.TEXT_URI_LIST));
  if (isDirectory) {
    if (getDirectory().getIndexName() != null) {
      this.baseUri=this.baseUri + getDirectory().getIndexName();
      this.baseName=getDirectory().getIndexName();
    }
  }
 else {
    if (lastIndex == -1) {
      this.baseName=baseUri;
    }
 else {
      this.baseName=baseUri.substring(lastIndex + 1);
    }
  }
  int dotIndex=this.baseName.indexOf('.');
  if (dotIndex != -1)   this.baseName=this.baseName.substring(0,dotIndex);
  logger.info("Converted base path: " + this.baseUri);
  logger.info("Converted base name: " + this.baseName);
}
