{
  boolean toArray=false;
  Collection<Object> coll=null;
  if (paramClass.isArray()) {
    coll=new ArrayList<Object>(1);
    toArray=true;
    paramClass=paramClass.getComponentType();
  }
 else   if (paramGenericType instanceof ParameterizedType) {
    ParameterizedType parameterizedType=(ParameterizedType)paramGenericType;
    coll=createColl(parameterizedType);
    paramClass=(Class<?>)parameterizedType.getActualTypeArguments()[0];
  }
  if (coll == null) {
    return convertParamValueFromParam(paramClass,paramValue,defaultValue,leaveEncoded);
  }
  while (paramValueIter.hasNext()) {
    String queryParamValue=paramValueIter.next();
    Object convertedValue=convertParamValueFromParam(paramClass,queryParamValue,defaultValue,leaveEncoded);
    if (convertedValue != null)     coll.add(convertedValue);
    defaultValue=null;
  }
  if (coll.isEmpty())   coll.add(convertParamValueFromParam(paramClass,paramValue,defaultValue,leaveEncoded));
  if (toArray)   return Util.toArray(coll,paramClass);
  return coll;
}
