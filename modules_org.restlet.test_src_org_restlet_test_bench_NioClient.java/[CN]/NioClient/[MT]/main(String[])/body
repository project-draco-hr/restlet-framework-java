{
  ConnectorHelper<Client> helper;
  helper=new org.restlet.engine.connector.HttpClientHelper(null);
  Engine.getInstance().getRegisteredClients().add(0,helper);
  Client client=new Client(new Context(),Protocol.HTTP);
  client.getContext().getParameters().add("tracing","false");
  client.getContext().getParameters().add("minThreads","1");
  client.getContext().getParameters().add("lowThreads","30");
  client.getContext().getParameters().add("maxThreads","40");
  client.getContext().getParameters().add("maxQueued","20");
  client.getContext().getParameters().add("directBuffers","false");
  client.start();
  String uri="http://127.0.0.1:9999/";
  int iterations=1000;
  ClientResource cr=new ClientResource(uri);
  cr.setRetryOnError(false);
  cr.setNext(client);
  Representation r=null;
  System.out.println("Calling resource: " + uri + " "+ iterations+ " times");
  long start=System.currentTimeMillis();
  for (int i=0; i < iterations; i++) {
    r=cr.get();
    r.exhaust();
  }
  long total=(System.currentTimeMillis() - start);
  long avg=total / iterations;
  System.out.println("Bench completed in " + total + " ms. Average time per call: "+ avg+ " ms");
}
