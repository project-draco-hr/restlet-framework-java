def test():
    import sys
    caps = getcaps()
    if (not sys.argv[1:]):
        show(caps)
        return
    for i in range(1, len(sys.argv), 2):
        args = sys.argv[i:(i + 2)]
        if (len(args) < 2):
            print 'usage: mailcap [MIMEtype file] ...'
            return
        MIMEtype = args[0]
        file = args[1]
        (command, e) = findmatch(caps, MIMEtype, 'view', file)
        if (not command):
            print 'No viewer found for', type
        else:
            print 'Executing:', command
            sts = os.system(command)
            if sts:
                print 'Exit status:', sts
