{
  if (this.endDetected != endDetected) {
    this.endDetected=endDetected;
    if (endDetected && (getWrappedChannel() instanceof CompletionListener)) {
      ((CompletionListener)getWrappedChannel()).onMessageCompleted(isEndDetected());
    }
  }
}
