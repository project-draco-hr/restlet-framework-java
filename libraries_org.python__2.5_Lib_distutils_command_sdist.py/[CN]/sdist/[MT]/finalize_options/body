def finalize_options(self):
    if (self.manifest is None):
        self.manifest = 'MANIFEST'
    if (self.template is None):
        self.template = 'MANIFEST.in'
    self.ensure_string_list('formats')
    if (self.formats is None):
        try:
            self.formats = [self.default_format[os.name]]
        except KeyError:
            raise DistutilsPlatformError, ("don't know how to create source distributions " + ('on platform %s' % os.name))
    bad_format = archive_util.check_archive_formats(self.formats)
    if bad_format:
        raise DistutilsOptionError, ("unknown archive format '%s'" % bad_format)
    if (self.dist_dir is None):
        self.dist_dir = 'dist'
