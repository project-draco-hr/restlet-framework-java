def process_message(self, peer, mailfrom, rcpttos, data):
    inheaders = 1
    lines = data.split('\n')
    print '---------- MESSAGE FOLLOWS ----------'
    for line in lines:
        if (inheaders and (not line)):
            print 'X-Peer:', peer[0]
            inheaders = 0
        print line
    print '------------ END MESSAGE ------------'
