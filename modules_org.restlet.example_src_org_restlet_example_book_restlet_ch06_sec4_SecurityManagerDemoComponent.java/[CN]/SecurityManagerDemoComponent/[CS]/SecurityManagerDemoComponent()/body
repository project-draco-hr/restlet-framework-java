{
  MemoryRealm realm=new MemoryRealm();
  User stiger=new User("stiger","pwd","Scott","Tiger","scott.tiger@foobar.com");
  realm.getUsers().add(stiger);
  User larmstrong=new User("larmstrong","pwd","Louis","Armstrong","la@foobar.com");
  realm.getUsers().add(larmstrong);
  Group employees=new Group("employees","All FooBar employees");
  employees.getMemberUsers().add(larmstrong);
  realm.getRootGroups().add(employees);
  Group contractors=new Group("contractors","All FooBar contractors");
  contractors.getMemberUsers().add(stiger);
  realm.getRootGroups().add(contractors);
  Group managers=new Group("managers","All FooBar managers");
  realm.getRootGroups().add(managers);
  Group directors=new Group("directors","Top-level directors");
  directors.getMemberUsers().add(larmstrong);
  managers.getMemberGroups().add(directors);
  Group developers=new Group("developers","All FooBar developers");
  realm.getRootGroups().add(developers);
  Group engineers=new Group("engineers","All FooBar engineers");
  engineers.getMemberUsers().add(stiger);
  developers.getMemberGroups().add(engineers);
  Context appContext=getContext().createChildContext();
  Application app=new SecurityManagerDemoApplication(appContext);
  appContext.setDefaultEnroler(realm.getEnroler());
  appContext.setDefaultVerifier(realm.getVerifier());
  Role adminRole=new Role("admin","Administrator");
  realm.map(managers,adminRole);
  app.getRoles().add(adminRole);
  getDefaultHost().attachDefault(app);
}
