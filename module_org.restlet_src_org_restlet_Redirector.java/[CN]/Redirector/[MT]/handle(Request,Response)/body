{
  StringTemplate te=new StringTemplate(this.targetPattern);
  te.setLogger(getLogger());
  String targetUri=te.format(new CallModel(request,response,""));
  Reference target=new Reference(targetUri);
switch (this.mode) {
case MODE_CLIENT_PERMANENT:
    getLogger().log(Level.INFO,"Permanently redirecting client to: " + targetUri);
  response.setRedirectRef(target);
response.setStatus(Status.REDIRECTION_MOVED_PERMANENTLY);
break;
case MODE_CLIENT_FOUND:
getLogger().log(Level.INFO,"Redirecting client to found location: " + targetUri);
response.setRedirectRef(target);
response.setStatus(Status.REDIRECTION_FOUND);
break;
case MODE_CLIENT_TEMPORARY:
getLogger().log(Level.INFO,"Temporarily redirecting client to: " + targetUri);
response.setRedirectRef(target);
response.setStatus(Status.REDIRECTION_MOVED_TEMPORARILY);
break;
case MODE_CONNECTOR:
getLogger().log(Level.INFO,"Redirecting via client connector to: " + targetUri);
request.setResourceRef(target);
getContext().getDispatcher().handle(request,response);
break;
}
}
