def push_with_producer(self, producer):
    self.producer_fifo.push(producer)
    self.initiate_send()
