def test_no_leaking(self):
    if ((not hasattr(test_support, 'is_resource_enabled')) or (test_support.is_resource_enabled('subprocess') and (not mswindows) and (not jython))):
        max_handles = 1026
    else:
        max_handles = 65
    for i in range(max_handles):
        p = subprocess.Popen([sys.executable, '-c', 'import sys;sys.stdout.write(sys.stdin.read())'], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        data = p.communicate('lime')[0]
        self.assertEqual(data, 'lime')
