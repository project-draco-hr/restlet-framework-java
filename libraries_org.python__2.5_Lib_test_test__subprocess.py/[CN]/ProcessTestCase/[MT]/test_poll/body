def test_poll(self):
    p = subprocess.Popen([sys.executable, '-c', 'import time; time.sleep(1)'])
    count = 0
    while (p.poll() is None):
        time.sleep(0.1)
        count += 1
    self.assert_((count >= 2))
    self.assertEqual(p.poll(), 0)
