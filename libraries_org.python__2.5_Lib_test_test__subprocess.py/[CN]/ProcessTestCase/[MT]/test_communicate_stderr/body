def test_communicate_stderr(self):
    p = subprocess.Popen([sys.executable, '-c', 'import sys; sys.stderr.write("pineapple")'], stderr=subprocess.PIPE)
    (stdout, stderr) = p.communicate()
    self.assertEqual(stdout, None)
    self.assert_(stderr.startswith('pineapple'))
