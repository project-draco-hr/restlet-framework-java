def test_list2cmdline(self):
    self.assertEqual(subprocess.list2cmdline(['a b c', 'd', 'e']), '"a b c" d e')
    self.assertEqual(subprocess.list2cmdline(['ab"c', '\\', 'd']), 'ab\\"c \\ d')
    self.assertEqual(subprocess.list2cmdline(['ab"c', ' \\', 'd']), 'ab\\"c " \\\\" d')
    self.assertEqual(subprocess.list2cmdline(['a\\\\\\b', 'de fg', 'h']), 'a\\\\\\b "de fg" h')
    self.assertEqual(subprocess.list2cmdline(['a\\"b', 'c', 'd']), 'a\\\\\\"b c d')
    self.assertEqual(subprocess.list2cmdline(['a\\\\b c', 'd', 'e']), '"a\\\\b c" d e')
    self.assertEqual(subprocess.list2cmdline(['a\\\\b\\ c', 'd', 'e']), '"a\\\\b\\ c" d e')
    self.assertEqual(subprocess.list2cmdline(['ab', '']), 'ab ""')
    self.assertEqual(subprocess.list2cmdline(['echo', 'foo|bar']), 'echo "foo|bar"')
