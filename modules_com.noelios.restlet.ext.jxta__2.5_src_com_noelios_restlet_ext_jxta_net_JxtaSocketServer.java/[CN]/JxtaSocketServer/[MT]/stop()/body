{
  if (server == null) {
    return;
  }
  try {
    server.close();
  }
 catch (  IOException ioe) {
    throw new NetworkException("can't close socket",ioe);
  }
  executor.shutdown();
  while (!executor.isTerminated()) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException ie) {
    }
  }
  server=null;
}
