{
  boolean result=false;
  if (getLineBuilderState() != BufferState.DRAINING) {
    int byteBufferSize=0;
    if (getWrappedChannel().getSourceBuffer().isDraining()) {
      byteBufferSize=getWrappedChannel().getSourceBuffer().remaining();
    }
    if (byteBufferSize == 0) {
      getWrappedChannel().getSourceBuffer().clear();
      if (getWrappedChannel().refill() > 0) {
        byteBufferSize=getWrappedChannel().getSourceBuffer().remaining();
      }
    }
    if (byteBufferSize > 0) {
      setLineBuilderState(getWrappedChannel().getSourceBuffer().drain(getLineBuilder(),getLineBuilderState()));
      if (!getWrappedChannel().getSourceBuffer().hasRemaining()) {
        getWrappedChannel().getSourceBuffer().clear();
      }
      return getLineBuilderState() == BufferState.DRAINING;
    }
  }
 else {
    result=true;
  }
  return result;
}
