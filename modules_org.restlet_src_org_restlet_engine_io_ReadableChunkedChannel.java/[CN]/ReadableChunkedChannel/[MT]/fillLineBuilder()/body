{
  boolean result=false;
  if (getLineBuilderState() != BufferState.DRAINING) {
synchronized (getByteBuffer()) {
      int byteBufferSize=0;
      if (getByteBufferState() == BufferState.DRAINING) {
        byteBufferSize=getByteBuffer().remaining();
      }
      if (byteBufferSize == 0) {
        setByteBufferState(BufferState.FILLING);
        getByteBuffer().clear();
        if (super.refill()) {
          byteBufferSize=getByteBuffer().remaining();
        }
      }
      if (byteBufferSize > 0) {
        setLineBuilderState(NioUtils.fillLine(getLineBuilder(),getLineBuilderState(),getByteBuffer()));
        return getLineBuilderState() == BufferState.DRAINING;
      }
    }
  }
 else {
    result=true;
  }
  return result;
}
