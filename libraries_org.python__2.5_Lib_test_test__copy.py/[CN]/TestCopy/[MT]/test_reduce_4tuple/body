def test_reduce_4tuple(self):


    class C(list):

        def __reduce__(self):
            return (C, (), self.__dict__, iter(self))

        def __cmp__(self, other):
            return (cmp(list(self), list(other)) or cmp(self.__dict__, other.__dict__))
    x = C([[1, 2], 3])
    y = copy.copy(x)
    self.assertEqual(x, y)
    self.assert_((x is not y))
    self.assert_((x[0] is y[0]))
    y = copy.deepcopy(x)
    self.assertEqual(x, y)
    self.assert_((x is not y))
    self.assert_((x[0] is not y[0]))
