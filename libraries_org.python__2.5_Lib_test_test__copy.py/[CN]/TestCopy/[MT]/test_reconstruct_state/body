def test_reconstruct_state(self):


    class C(object):

        def __reduce__(self):
            return (C, (), self.__dict__)

        def __cmp__(self, other):
            return cmp(self.__dict__, other.__dict__)
    x = C()
    x.foo = [42]
    y = copy.copy(x)
    self.assertEqual(y, x)
    y = copy.deepcopy(x)
    self.assertEqual(y, x)
    self.assert_((y.foo is not x.foo))
