def run_test(self, callable, events, profiler=None):
    if (profiler is None):
        profiler = self.new_profiler()
    profiler.runcall(callable)
    profiler.close()
    self.check_events(events)
