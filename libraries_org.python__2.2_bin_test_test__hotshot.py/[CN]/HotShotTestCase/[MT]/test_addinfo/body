def test_addinfo(self):

    def f(p):
        p.addinfo('test-key', 'test-value')
    profiler = self.new_profiler()
    profiler.runcall(f, profiler)
    profiler.close()
    log = self.get_logreader()
    info = log._info
    list(log)
    self.failUnless((info['test-key'] == ['test-value']))
