def gopher_open(self, req):
    host = req.get_host()
    if (not host):
        raise GopherError('no host given')
    host = unquote(host)
    selector = req.get_selector()
    (type, selector) = splitgophertype(selector)
    (selector, query) = splitquery(selector)
    selector = unquote(selector)
    if query:
        query = unquote(query)
        fp = gopherlib.send_query(selector, query, host)
    else:
        fp = gopherlib.send_selector(selector, host)
    return addinfourl(fp, noheaders(), req.get_full_url())
