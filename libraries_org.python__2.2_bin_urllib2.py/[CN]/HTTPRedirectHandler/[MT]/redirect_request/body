def redirect_request(self, req, fp, code, msg, headers, newurl):
    "Return a Request or None in response to a redirect.\n\n        This is called by the http_error_30x methods when a redirection\n        response is received.  If a redirection should take place, return a new\n        Request to allow http_error_30x to perform the redirect.  Otherwise,\n        raise HTTPError if no-one else should try to handle this url.  Return\n        None if you can't but another Handler might.\n\n        "
    m = req.get_method()
    if (((code in (301, 302, 303, 307)) and (m in ('GET', 'HEAD'))) or ((code in (301, 302, 303)) and (m == 'POST'))):
        return Request(newurl, headers=req.headers)
    else:
        raise HTTPError(req.get_full_url(), code, msg, headers, fp)
