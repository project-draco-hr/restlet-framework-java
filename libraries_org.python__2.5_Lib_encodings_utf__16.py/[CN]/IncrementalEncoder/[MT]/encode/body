def encode(self, input, final=False):
    if (self.encoder is None):
        result = codecs.utf_16_encode(input, self.errors)[0]
        if (sys.byteorder == 'little'):
            self.encoder = codecs.utf_16_le_encode
        else:
            self.encoder = codecs.utf_16_be_encode
        return result
    return self.encoder(input, self.errors)[0]
