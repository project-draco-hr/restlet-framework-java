{
  int result=getBuffer().drain(getConnection().getWritableSelectionChannel());
  if (getLogger().isLoggable(Level.FINE)) {
    getLogger().log(Level.FINE,result + " bytes written");
  }
  if (getHelper().getThrottleTimeMs() > 0) {
    try {
      Thread.sleep(getHelper().getThrottleTimeMs());
    }
 catch (    InterruptedException e) {
    }
  }
  if (result == 0) {
    if (getIoState() == IoState.PROCESSING) {
      setIoState(IoState.INTEREST);
    }
  }
  return result;
}
