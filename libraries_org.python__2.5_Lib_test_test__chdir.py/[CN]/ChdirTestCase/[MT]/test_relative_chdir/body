def test_relative_chdir(self):
    top = os.path.dirname(self.dir1)
    os.chdir(top)
    os.chdir(os.path.basename(self.dir1))
    self.assertEqual(os.getcwd(), os.path.realpath(self.dir1))
    os.chdir('subdir1')
    self.assertEqual(os.getcwd(), os.path.realpath(self.subdir1))
    os.chdir('subdir2')
    self.assertEqual(os.getcwd(), os.path.realpath(self.subdir2))
    os.chdir('..')
    self.assertEqual(os.getcwd(), os.path.realpath(self.subdir1))
    os.chdir(('..%s..' % os.sep))
    self.assertEqual(os.getcwd(), os.path.realpath(top))
