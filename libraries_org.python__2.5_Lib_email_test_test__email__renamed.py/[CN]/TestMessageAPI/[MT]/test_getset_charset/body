def test_getset_charset(self):
    eq = self.assertEqual
    msg = Message()
    eq(msg.get_charset(), None)
    charset = Charset('iso-8859-1')
    msg.set_charset(charset)
    eq(msg['mime-version'], '1.0')
    eq(msg.get_content_type(), 'text/plain')
    eq(msg['content-type'], 'text/plain; charset="iso-8859-1"')
    eq(msg.get_param('charset'), 'iso-8859-1')
    eq(msg['content-transfer-encoding'], 'quoted-printable')
    eq(msg.get_charset().input_charset, 'iso-8859-1')
    msg.set_charset(None)
    eq(msg.get_charset(), None)
    eq(msg['content-type'], 'text/plain')
    msg = Message()
    msg['MIME-Version'] = '2.0'
    msg['Content-Type'] = 'text/x-weird'
    msg['Content-Transfer-Encoding'] = 'quinted-puntable'
    msg.set_charset(charset)
    eq(msg['mime-version'], '2.0')
    eq(msg['content-type'], 'text/x-weird; charset="iso-8859-1"')
    eq(msg['content-transfer-encoding'], 'quinted-puntable')
