def ndiffAssertEqual(self, first, second):
    'Like failUnlessEqual except use ndiff for readable output.'
    if (first != second):
        sfirst = str(first)
        ssecond = str(second)
        diff = difflib.ndiff(sfirst.splitlines(), ssecond.splitlines())
        fp = StringIO()
        print  >> fp, NL, NL.join(diff)
        raise self.failureException, fp.getvalue()
