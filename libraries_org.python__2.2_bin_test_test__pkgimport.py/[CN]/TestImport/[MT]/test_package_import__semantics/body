def test_package_import__semantics(self):
    self.rewrite_file('for')
    try:
        __import__(self.module_name)
    except SyntaxError:
        pass
    else:
        raise RuntimeError, 'Failed to induce SyntaxError'
    self.assert_(((not sys.modules.has_key(self.module_name)) and (not hasattr(sys.modules[self.package_name], 'foo'))))
    var = 'a'
    while (var in dir(__builtins__)):
        var += random.choose(string.letters)
    self.rewrite_file(var)
    try:
        __import__(self.module_name)
    except NameError:
        pass
    else:
        raise RuntimeError, 'Failed to induce NameError.'
    module = __import__(self.module_name).foo
    self.rewrite_file(('%s = 1' % var))
    reload(module)
    self.assertEqual(getattr(module, var), 1)
