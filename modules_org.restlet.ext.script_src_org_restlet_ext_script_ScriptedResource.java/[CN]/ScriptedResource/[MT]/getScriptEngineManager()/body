{
  if (this.scriptEngineManager == null) {
    ConcurrentMap<String,Object> attributes=getContext().getAttributes();
    this.scriptEngineManager=(ScriptEngineManager)attributes.get("org.restlet.ext.script.ScriptedResource.scriptEngineManager");
    if (this.scriptEngineManager == null) {
      this.scriptEngineManager=new ScriptEngineManager();
    }
    ScriptEngineManager existing=(ScriptEngineManager)attributes.putIfAbsent("org.restlet.ext.script.ScriptedResource.scriptEngineManager",this.scriptEngineManager);
    if (existing != null) {
      this.scriptEngineManager=existing;
    }
  }
  return this.scriptEngineManager;
}
