def test_contextmanager_trap_yield_after_throw(self):

    @contextmanager
    def whoo():
        try:
            yield
        except:
            yield
    ctx = whoo()
    ctx.__enter__()
    self.assertRaises(RuntimeError, ctx.__exit__, TypeError, TypeError('foo'), None)
