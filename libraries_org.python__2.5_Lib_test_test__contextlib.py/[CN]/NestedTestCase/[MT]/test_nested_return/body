def test_nested_return(self):

    @contextmanager
    def a():
        try:
            yield
        except:
            pass

    def foo():
        with nested(a(), a()):
            return 1
        return 10
    self.assertEqual(foo(), 1)
