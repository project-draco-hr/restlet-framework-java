def boilerPlate(self, lock, locked):
    self.failIf(locked())
    with lock:
        self.failUnless(locked())
    self.failIf(locked())
    try:
        with lock:
            self.failUnless(locked())
            (1 / 0)
    except ZeroDivisionError:
        self.failIf(locked())
    else:
        self.fail("Didn't raise ZeroDivisionError")
