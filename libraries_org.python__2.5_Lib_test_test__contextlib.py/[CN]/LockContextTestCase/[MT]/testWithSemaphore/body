def testWithSemaphore(self):
    lock = threading.Semaphore()

    def locked():
        if lock.acquire(False):
            lock.release()
            return False
        else:
            return True
    self.boilerPlate(lock, locked)
