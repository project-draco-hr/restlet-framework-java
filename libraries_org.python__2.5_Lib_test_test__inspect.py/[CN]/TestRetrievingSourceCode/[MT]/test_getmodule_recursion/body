def test_getmodule_recursion(self):
    from new import module
    name = '__inspect_dummy'
    m = sys.modules[name] = module(name)
    m.__file__ = '<string>'
    m.__loader__ = 'dummy'
    exec 'def x(): pass' in m.__dict__
    self.assertEqual(inspect.getsourcefile(m.x.func_code), '<string>')
    del sys.modules[name]
    inspect.getmodule(compile('a=10', '', 'single'))
