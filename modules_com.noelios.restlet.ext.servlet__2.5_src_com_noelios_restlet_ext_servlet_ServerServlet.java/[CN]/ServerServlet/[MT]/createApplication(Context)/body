{
  Application application=null;
  final String applicationClassName=getInitParameter(APPLICATION_KEY,null);
  if (applicationClassName != null) {
    try {
      final Class<?> targetClass=loadClass(applicationClassName);
      try {
        application=(Application)targetClass.getConstructor(Context.class).newInstance(new ServletContextAdapter(this,parentContext));
      }
 catch (      final NoSuchMethodException e) {
        log("[Noelios Restlet Engine] - The ServerServlet couldn't invoke the constructor of the target class. Please check this class has a constructor with a single parameter of type Context. The empty constructor and the context setter will be used instead.",e);
        application=(Application)targetClass.getConstructor().newInstance();
        application.setContext(new ServletContextAdapter(this,parentContext));
      }
    }
 catch (    final ClassNotFoundException e) {
      log("[Noelios Restlet Engine] - The ServerServlet couldn't find the target class. Please check that your classpath includes " + applicationClassName,e);
    }
catch (    final InstantiationException e) {
      log("[Noelios Restlet Engine] - The ServerServlet couldn't instantiate the target class. Please check this class has an empty constructor " + applicationClassName,e);
    }
catch (    final IllegalAccessException e) {
      log("[Noelios Restlet Engine] - The ServerServlet couldn't instantiate the target class. Please check that you have to proper access rights to " + applicationClassName,e);
    }
catch (    final NoSuchMethodException e) {
      log("[Noelios Restlet Engine] - The ServerServlet couldn't invoke the constructor of the target class. Please check this class has a constructor with a single parameter of Context " + applicationClassName,e);
    }
catch (    final InvocationTargetException e) {
      log("[Noelios Restlet Engine] - The ServerServlet couldn't instantiate the target class. An exception was thrown while creating " + applicationClassName,e);
    }
  }
  if (application != null) {
    final Context applicationContext=application.getContext();
    String initParam;
    final javax.servlet.ServletConfig servletConfig=getServletConfig();
    for (final Enumeration<String> enum1=servletConfig.getInitParameterNames(); enum1.hasMoreElements(); ) {
      initParam=enum1.nextElement();
      applicationContext.getParameters().add(initParam,servletConfig.getInitParameter(initParam));
    }
    for (final Enumeration<String> enum1=getServletContext().getInitParameterNames(); enum1.hasMoreElements(); ) {
      initParam=enum1.nextElement();
      applicationContext.getParameters().add(initParam,getServletContext().getInitParameter(initParam));
    }
  }
  return application;
}
