{
  HttpServerHelper result=null;
  final Component component=getComponent();
  if (component != null) {
    final Server server=new Server(component.getContext().createChildContext(),(List<Protocol>)null,request.getLocalAddr(),request.getLocalPort(),component);
    result=new HttpServerHelper(server);
    final String uriPattern=request.getContextPath() + request.getServletPath();
    if (isDefaultComponent()) {
      if (this.application != null) {
        log("[Noelios Restlet Engine] - Attaching application: " + this.application + " to URI: "+ uriPattern);
        component.getDefaultHost().attach(uriPattern,this.application);
      }
    }
 else {
      final String autoWire=getInitParameter(AUTO_WIRE_KEY,AUTO_WIRE_KEY_DEFAULT);
      if (AUTO_WIRE_KEY_DEFAULT.equalsIgnoreCase(autoWire)) {
        for (        final Route route : component.getDefaultHost().getRoutes()) {
          if ((route.getTemplate().getPattern() == null) || !route.getTemplate().getPattern().startsWith(uriPattern)) {
            log("[Noelios Restlet Engine] - Attaching restlet: " + route.getNext() + " to URI: "+ uriPattern+ route.getTemplate().getPattern());
            route.getTemplate().setPattern(uriPattern + route.getTemplate().getPattern());
          }
        }
        for (        final VirtualHost virtualHost : component.getHosts()) {
          for (          final Route route : virtualHost.getRoutes()) {
            if ((route.getTemplate().getPattern() == null) || !route.getTemplate().getPattern().startsWith(uriPattern)) {
              log("[Noelios Restlet Engine] - Attaching restlet: " + route.getNext() + " to URI: "+ uriPattern+ route.getTemplate().getPattern());
              route.getTemplate().setPattern(uriPattern + route.getTemplate().getPattern());
            }
          }
        }
      }
    }
  }
  return result;
}
