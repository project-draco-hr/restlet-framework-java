def strip_dirs(self):
    oldstats = self.stats
    self.stats = newstats = {}
    max_name_len = 0
    for func in oldstats.keys():
        (cc, nc, tt, ct, callers) = oldstats[func]
        newfunc = func_strip_path(func)
        if (len(func_std_string(newfunc)) > max_name_len):
            max_name_len = len(func_std_string(newfunc))
        newcallers = {}
        for func2 in callers.keys():
            newcallers[func_strip_path(func2)] = callers[func2]
        if newstats.has_key(newfunc):
            newstats[newfunc] = add_func_stats(newstats[newfunc], (cc, nc, tt, ct, newcallers))
        else:
            newstats[newfunc] = (cc, nc, tt, ct, newcallers)
    old_top = self.top_level
    self.top_level = new_top = {}
    for func in old_top.keys():
        new_top[func_strip_path(func)] = None
    self.max_name_len = max_name_len
    self.fcn_list = None
    self.all_callees = None
    return self
