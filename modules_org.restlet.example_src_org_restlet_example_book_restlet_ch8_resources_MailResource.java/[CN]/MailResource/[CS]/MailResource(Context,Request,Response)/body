{
  super(context,request,response);
  if (getCurrentUser() != null) {
    setModifiable(true);
    String mailboxId=(String)request.getAttributes().get("mailboxId");
    mailbox=getObjectsFacade().getMailboxById(mailboxId);
    if (mailbox != null) {
      String mailId=(String)request.getAttributes().get("mailId");
      mail=getObjectsFacade().getMailById(mailId);
      if (mail != null) {
        getVariants().add(new Variant(MediaType.TEXT_HTML));
      }
    }
  }
 else {
    setModifiable(false);
  }
}
