{
  boolean result=false;
synchronized (getByteBuffer()) {
    int size=0;
    if (getBufferState() == BufferState.DRAINING) {
      size=getByteBuffer().remaining();
      if (size == 0) {
        setBufferState(BufferState.FILLING);
        getByteBuffer().clear();
      }
    }
    if (getBufferState() == BufferState.FILLING) {
      size=getWrappedChannel().read(getByteBuffer());
      if (size > 0) {
        setBufferState(BufferState.DRAINING);
        getByteBuffer().flip();
      }
    }
    if (size > 0) {
      setLineBuilderState(NioUtils.fillLine(getLineBuilder(),getLineBuilderState(),getByteBuffer()));
      return getLineBuilderState() == BufferState.DRAINING;
    }
  }
  return result;
}
