{
  boolean result=false;
synchronized (getBuffer()) {
    int size=0;
    if (getBufferState() == STATE_BUFFER_DRAINING) {
      size=getBuffer().remaining();
      if (size == 0) {
        setBufferState(STATE_BUFFER_FILLING);
        getBuffer().clear();
      }
    }
    if (getBufferState() == STATE_BUFFER_FILLING) {
      size=getWrappedChannel().read(getBuffer());
      if (size > 0) {
        setBufferState(STATE_BUFFER_DRAINING);
        getBuffer().flip();
      }
    }
    if (size > 0) {
      result=NioUtils.fillLine(getLineBuilder(),getBuffer());
    }
  }
  return result;
}
