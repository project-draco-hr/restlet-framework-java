def add_password(self, realm, uri, user, passwd):
    if isinstance(uri, basestring):
        uri = [uri]
    if (not (realm in self.passwd)):
        self.passwd[realm] = {}
    for default_port in (True, False):
        reduced_uri = tuple([self.reduce_uri(u, default_port) for u in uri])
        self.passwd[realm][reduced_uri] = (user, passwd)
