def test_iter_function_stop(self):

    def spam(state=[0]):
        i = state[0]
        if (i == 10):
            raise StopIteration
        state[0] = (i + 1)
        return i
    self.check_iterator(iter(spam, 20), range(10))
