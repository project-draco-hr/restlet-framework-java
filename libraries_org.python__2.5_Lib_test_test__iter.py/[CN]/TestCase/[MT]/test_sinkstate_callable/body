def test_sinkstate_callable(self):

    def spam(state=[0]):
        i = state[0]
        state[0] = (i + 1)
        if (i == 10):
            raise AssertionError, "shouldn't have gotten this far"
        return i
    b = iter(spam, 5)
    self.assertEqual(list(b), range(5))
    self.assertEqual(list(b), [])
