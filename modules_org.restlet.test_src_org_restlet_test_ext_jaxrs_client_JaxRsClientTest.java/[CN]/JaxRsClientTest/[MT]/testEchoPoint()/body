{
  final JaxRsClientTest clientTest=startSocketServerDaemon();
  while (!_serverStarted.get()) {
    Thread.sleep(100);
    System.out.println("waiting for the server to start...");
  }
  EchoResource echoResource=JaxRsClientResource.createJaxRsClient("http://localhost:" + clientTest.getServerPort(),EchoResource.class);
  assertEquals(1,echoResource.echoPointHeaderParam(new Point(1,2)).x);
  assertEquals(3,echoResource.echoPointQueryParam(new Point(3,4)).x);
synchronized (lock) {
    clientTest.stopServer();
    _serverStarted.set(false);
  }
}
