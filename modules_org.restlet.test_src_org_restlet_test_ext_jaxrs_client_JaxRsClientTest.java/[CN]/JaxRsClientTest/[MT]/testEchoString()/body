{
  final JaxRsClientTest clientTest=startSocketServerDaemon();
  while (!_serverStarted.get()) {
    Thread.sleep(100);
    System.out.println("waiting for the server to start...");
  }
  EchoResource echoResource=JaxRsClientResource.createJaxRsClient("http://localhost:" + clientTest.getServerPort(),EchoResource.class);
  assertEquals("this is a test",echoResource.echo("this is a test"));
synchronized (lock) {
    clientTest.stopServer();
    _serverStarted.set(false);
  }
}
