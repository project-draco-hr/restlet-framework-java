def listmodules(self, key=''):
    if key:
        self.output.write('\nHere is a list of matching modules.  Enter any module name to get more help.\n\n')
        apropos(key)
    else:
        self.output.write('\nPlease wait a moment while I gather a list of all available modules...\n\n')
        modules = {}

        def callback(path, modname, desc, modules=modules):
            if (modname and (modname[(-9):] == '.__init__')):
                modname = (modname[:(-9)] + ' (package)')
            if (find(modname, '.') < 0):
                modules[modname] = 1
        ModuleScanner().run(callback)
        self.list(modules.keys())
        self.output.write('\nEnter any module name to get more help.  Or, type "modules spam" to search\nfor modules whose descriptions contain the word "spam".\n')
