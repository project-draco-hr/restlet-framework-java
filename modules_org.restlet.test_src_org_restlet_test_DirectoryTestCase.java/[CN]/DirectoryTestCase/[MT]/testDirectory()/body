{
  try {
    this.testDir=new File(System.getProperty("java.io.tmpdir"),"DirectoryTestCase");
    final Component clientComponent=new Component();
    clientComponent.getClients().add(Protocol.FILE);
    final MyApplication application=new MyApplication(clientComponent.getContext(),this.testDir);
    clientComponent.getDefaultHost().attach("",application);
    clientComponent.start();
    application.getTunnelService().setExtensionsTunnel(true);
    deleteDir(this.testDir);
    this.testDir.mkdir();
    testDirectory(application,application.getDirectory(),"index");
    deleteDir(this.testDir);
    this.testDir.mkdir();
    testDirectory(application,application.getDirectory(),"");
    application.getTunnelService().setExtensionsTunnel(false);
    deleteDir(this.testDir);
    this.testDir.mkdir();
    testDirectory(application,application.getDirectory(),"index");
    deleteDir(this.testDir);
    this.testDir.mkdir();
    testDirectory(application,application.getDirectory(),"");
    clientComponent.stop();
  }
 catch (  final Exception e) {
    e.printStackTrace();
  }
}
