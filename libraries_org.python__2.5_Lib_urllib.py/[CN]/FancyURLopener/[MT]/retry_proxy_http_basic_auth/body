def retry_proxy_http_basic_auth(self, url, realm, data=None):
    (host, selector) = splithost(url)
    newurl = (('http://' + host) + selector)
    proxy = self.proxies['http']
    (urltype, proxyhost) = splittype(proxy)
    (proxyhost, proxyselector) = splithost(proxyhost)
    i = (proxyhost.find('@') + 1)
    proxyhost = proxyhost[i:]
    (user, passwd) = self.get_user_passwd(proxyhost, realm, i)
    if (not (user or passwd)):
        return None
    proxyhost = ((((quote(user, safe='') + ':') + quote(passwd, safe='')) + '@') + proxyhost)
    self.proxies['http'] = (('http://' + proxyhost) + proxyselector)
    if (data is None):
        return self.open(newurl)
    else:
        return self.open(newurl, data)
