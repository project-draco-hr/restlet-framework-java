def retry_http_basic_auth(self, url, realm, data=None):
    (host, selector) = splithost(url)
    i = (host.find('@') + 1)
    host = host[i:]
    (user, passwd) = self.get_user_passwd(host, realm, i)
    if (not (user or passwd)):
        return None
    host = ((((quote(user, safe='') + ':') + quote(passwd, safe='')) + '@') + host)
    newurl = (('http://' + host) + selector)
    if (data is None):
        return self.open(newurl)
    else:
        return self.open(newurl, data)
