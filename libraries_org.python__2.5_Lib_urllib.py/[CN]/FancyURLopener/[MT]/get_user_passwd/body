def get_user_passwd(self, host, realm, clear_cache=0):
    key = ((realm + '@') + host.lower())
    if (key in self.auth_cache):
        if clear_cache:
            del self.auth_cache[key]
        else:
            return self.auth_cache[key]
    (user, passwd) = self.prompt_user_passwd(host, realm)
    if (user or passwd):
        self.auth_cache[key] = (user, passwd)
    return (user, passwd)
