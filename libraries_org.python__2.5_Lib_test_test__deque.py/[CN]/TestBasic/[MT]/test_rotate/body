def test_rotate(self):
    s = tuple('abcde')
    n = len(s)
    d = deque(s)
    d.rotate(1)
    self.assertEqual(''.join(d), 'eabcd')
    d = deque(s)
    d.rotate((-1))
    self.assertEqual(''.join(d), 'bcdea')
    d.rotate()
    self.assertEqual(tuple(d), s)
    for i in xrange((n * 3)):
        d = deque(s)
        e = deque(d)
        d.rotate(i)
        for j in xrange(i):
            e.rotate(1)
        self.assertEqual(tuple(d), tuple(e))
        d.rotate((- i))
        self.assertEqual(tuple(d), s)
        e.rotate((n - i))
        self.assertEqual(tuple(e), s)
    for i in xrange((n * 3)):
        d = deque(s)
        e = deque(d)
        d.rotate((- i))
        for j in xrange(i):
            e.rotate((-1))
        self.assertEqual(tuple(d), tuple(e))
        d.rotate(i)
        self.assertEqual(tuple(d), s)
        e.rotate((i - n))
        self.assertEqual(tuple(e), s)
    d = deque(s)
    e = deque(s)
    e.rotate((BIG + 17))
    dr = d.rotate
    for i in xrange((BIG + 17)):
        dr()
    self.assertEqual(tuple(d), tuple(e))
    self.assertRaises(TypeError, d.rotate, 'x')
    self.assertRaises(TypeError, d.rotate, 1, 10)
    d = deque()
    d.rotate()
    self.assertEqual(d, deque())
