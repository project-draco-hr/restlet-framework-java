def test_delitem(self):
    n = 500
    d = deque(xrange(n))
    self.assertRaises(IndexError, d.__delitem__, ((- n) - 1))
    self.assertRaises(IndexError, d.__delitem__, n)
    for i in xrange(n):
        self.assertEqual(len(d), (n - i))
        j = random.randrange((- len(d)), len(d))
        val = d[j]
        self.assert_((val in d))
        del d[j]
        self.assert_((val not in d))
    self.assertEqual(len(d), 0)
