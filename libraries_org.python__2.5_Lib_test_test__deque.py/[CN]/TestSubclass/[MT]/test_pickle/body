def test_pickle(self):
    d = Deque('abc')
    d.append(d)
    e = pickle.loads(pickle.dumps(d))
    self.assertNotEqual(id(d), id(e))
    self.assertEqual(type(d), type(e))
    dd = d.pop()
    ee = e.pop()
    self.assertEqual(id(e), id(ee))
    self.assertEqual(d, e)
    d.x = d
    e = pickle.loads(pickle.dumps(d))
    self.assertEqual(id(e), id(e.x))
    d = DequeWithBadIter('abc')
    self.assertRaises(TypeError, pickle.dumps, d)
