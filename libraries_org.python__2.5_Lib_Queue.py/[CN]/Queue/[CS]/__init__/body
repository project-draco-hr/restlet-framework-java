def __init__(self, maxsize=0):
    try:
        import threading
    except ImportError:
        import dummy_threading as threading
    self._init(maxsize)
    self.mutex = threading.Lock()
    self.not_empty = threading.Condition(self.mutex)
    self.not_full = threading.Condition(self.mutex)
    self.all_tasks_done = threading.Condition(self.mutex)
    self.unfinished_tasks = 0
