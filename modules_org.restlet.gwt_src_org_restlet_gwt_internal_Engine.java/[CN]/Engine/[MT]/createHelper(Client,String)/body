{
  ClientHelper result=null;
  if (client.getProtocols().size() > 0) {
    ClientHelper connector=null;
    for (Iterator<ClientHelper> iter=getRegisteredClients().iterator(); (result == null) && iter.hasNext(); ) {
      connector=iter.next();
      if (connector.getProtocols().containsAll(client.getProtocols())) {
        if ((helperClass == null) || connector.getClass().getCanonicalName().equals(helperClass)) {
          try {
            result=connector.getClass().getConstructor(Client.class).newInstance(client);
          }
 catch (          Exception e) {
            System.err.println("Exception while instantiation the client connector.");
          }
        }
      }
    }
    if (result == null) {
      StringBuilder sb=new StringBuilder();
      sb.append("No available client connector supports the required protocols: ");
      for (      Protocol p : client.getProtocols()) {
        sb.append("'").append(p.getName()).append("' ");
      }
      sb.append(". Please add the JAR of a matching connector to your classpath.");
      System.err.println(sb.toString());
    }
  }
  return result;
}
