{
  getConnectorService().getClientProtocols().add(Protocol.FILE);
  getConnectorService().getClientProtocols().add(Protocol.CLAP);
  getConnectorService().getClientProtocols().add(Protocol.HTTP);
  Properties properties=getProperties("clap://class/config/mailApplication.properties");
  this.dbFilePath=properties.getProperty("db4o.file.path");
  this.webRootPath=properties.getProperty("web.root.path");
  this.dataFacade=new ObjectsFacade(new Db4oFacade(dbFilePath));
  this.dataFacade.initAdmin();
  try {
    final File templateDir=new File(webRootPath + "/tmpl");
    this.fmc=new freemarker.template.Configuration();
    this.fmc.setDirectoryForTemplateLoading(templateDir);
  }
 catch (  Exception e) {
    getLogger().severe("Unable to configure FreeMarker.");
    e.printStackTrace();
  }
  getMetadataService().addExtension("xml",MediaType.APPLICATION_ATOM_XML,true);
}
