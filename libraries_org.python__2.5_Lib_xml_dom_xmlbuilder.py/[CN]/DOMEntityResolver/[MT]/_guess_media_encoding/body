def _guess_media_encoding(self, source):
    info = source.byteStream.info()
    if info.has_key('Content-Type'):
        for param in info.getplist():
            if param.startswith('charset='):
                return param.split('=', 1)[1].lower()
