{
  if (this.baseRef == null) {
    String basePath=request.getContextPath() + request.getServletPath();
    String baseUri=request.getRequestURL().toString();
    int baseIndex=baseUri.indexOf(basePath);
    if (baseIndex != -1) {
      this.baseRef=new Reference(baseUri.substring(0,baseIndex + basePath.length()));
    }
  }
  return this.baseRef;
}
