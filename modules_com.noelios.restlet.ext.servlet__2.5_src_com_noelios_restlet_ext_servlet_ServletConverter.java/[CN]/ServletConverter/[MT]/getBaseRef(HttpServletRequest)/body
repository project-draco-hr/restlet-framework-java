{
  Reference result=null;
  String basePath=request.getContextPath() + request.getServletPath();
  String baseUri=request.getRequestURL().toString();
  int baseIndex=baseUri.indexOf(basePath);
  if (baseIndex != -1) {
    result=new Reference(baseUri.substring(0,baseIndex + basePath.length()));
  }
  return result;
}
