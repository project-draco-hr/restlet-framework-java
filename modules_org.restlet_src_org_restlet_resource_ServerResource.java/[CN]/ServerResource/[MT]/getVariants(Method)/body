{
  List<Variant> result=this.variants;
  if (result == null) {
    result=new ArrayList<Variant>();
    if (isAnnotated() && hasAnnotations()) {
      List<Variant> annoVariants=null;
      method=(Method.HEAD.equals(method)) ? Method.GET : method;
      for (      AnnotationInfo annotationInfo : getAnnotations()) {
        if (annotationInfo.isCompatible(method,getQuery(),getRequestEntity(),getMetadataService(),getConverterService())) {
          annoVariants=annotationInfo.getResponseVariants(getMetadataService(),getConverterService());
          if (annoVariants != null) {
            float score=0.5f;
            if ((getRequest().getEntity() != null) && getRequest().getEntity().isAvailable()) {
              MediaType emt=getRequest().getEntity().getMediaType();
              MediaType amt=getMetadataService().getMediaType(annotationInfo.getInput());
              if (amt != null && amt.equals(amt)) {
                score=1.0f;
              }
 else               if (amt != null && amt.includes(emt)) {
                score=0.8f;
              }
 else               if (amt != null && amt.isCompatible(emt)) {
                score=0.6f;
              }
            }
            for (            Variant v : annoVariants) {
              VariantInfo vi=new VariantInfo(v,annotationInfo);
              vi.setInputScore(score);
              result.add(vi);
            }
          }
        }
      }
    }
    this.variants=result;
  }
  return result;
}
