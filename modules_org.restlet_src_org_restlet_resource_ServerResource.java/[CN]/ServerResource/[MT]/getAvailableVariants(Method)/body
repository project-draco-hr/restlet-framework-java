{
  List<Variant> result=null;
  if (isAnnotated() && hasAnnotations()) {
    MetadataService ms=(getApplication() == null) ? null : getApplication().getMetadataService();
    if (ms == null) {
      ms=new MetadataService();
    }
    ConverterService cs=getConverterService();
    List<VariantInfo> annoVariants=null;
    for (    AnnotationInfo annotationInfo : annotations) {
      if (method.equals(annotationInfo.getRestletMethod())) {
        if (annotationInfo.getValue() != null) {
          List<Metadata> allMetadata=ms.getAllMetadata(annotationInfo.getValue());
          for (          Metadata metadata : allMetadata) {
            if (metadata instanceof MediaType) {
              annoVariants=(List<VariantInfo>)cs.getVariants(annotationInfo.getJavaReturnType(),new Variant((MediaType)metadata));
              if (annoVariants != null) {
                if (result == null) {
                  result=new ArrayList<Variant>();
                }
                for (                VariantInfo v : annoVariants) {
                  result.add(new VariantInfo(v,annotationInfo));
                }
              }
            }
          }
        }
 else {
          annoVariants=(List<VariantInfo>)cs.getVariants(annotationInfo.getJavaReturnType(),null);
          if (annoVariants != null) {
            if (result == null) {
              result=new ArrayList<Variant>();
            }
            for (            VariantInfo v : annoVariants) {
              result.add(new VariantInfo(v,annotationInfo));
            }
          }
        }
      }
    }
  }
  List<Variant> methodVariants=getVariants(getMethod());
  if (methodVariants != null) {
    if (result == null) {
      result=new ArrayList<Variant>();
    }
    result.addAll(methodVariants);
  }
  return result;
}
