{
  if (this.preferredVariant == null) {
    List<Variant> variants=(List<Variant>)getVariants().get(getMethod());
    if ((variants != null) && (!variants.isEmpty())) {
      Language language=null;
      final Application app=Application.getCurrent();
      if (app != null) {
        language=app.getMetadataService().getDefaultLanguage();
      }
      this.preferredVariant=getClientInfo().getPreferredVariant(variants,language);
    }
  }
  return preferredVariant;
}
