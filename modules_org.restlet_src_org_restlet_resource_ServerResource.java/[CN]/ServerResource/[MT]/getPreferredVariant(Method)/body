{
  Variant result=null;
  List<Variant> variants=null;
  if (isAnnotated() && hasAnnotations()) {
    ConverterService cs=getConverterService();
    List<Variant> annoVariants=null;
    for (    AnnotationInfo annotationInfo : annotations) {
      if (method.equals(annotationInfo.getRestletMethod())) {
        annoVariants=cs.getVariants(annotationInfo.getJavaReturnType());
        if (annoVariants != null) {
          if (variants == null) {
            variants=new ArrayList<Variant>();
          }
          for (          Variant v : annoVariants) {
            variants.add(new VariantInfo(v,annotationInfo));
          }
        }
      }
    }
  }
  List<Variant> methodVariants=getVariants(getMethod());
  if (methodVariants != null) {
    if (variants == null) {
      variants=new ArrayList<Variant>();
    }
    variants.addAll(methodVariants);
  }
  methodVariants=getVariants(Method.ALL);
  if (methodVariants != null) {
    if (variants == null) {
      variants=new ArrayList<Variant>();
    }
    variants.addAll(methodVariants);
  }
  if ((variants != null) && (!variants.isEmpty())) {
    Language language=null;
    final Application app=Application.getCurrent();
    if (app != null) {
      language=app.getMetadataService().getDefaultLanguage();
    }
    result=getClientInfo().getPreferredVariant(variants,language);
  }
  return result;
}
