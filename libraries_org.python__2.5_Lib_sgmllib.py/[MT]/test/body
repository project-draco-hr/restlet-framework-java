def test(args=None):
    import sys
    if (args is None):
        args = sys.argv[1:]
    if (args and (args[0] == '-s')):
        args = args[1:]
        klass = SGMLParser
    else:
        klass = TestSGMLParser
    if args:
        file = args[0]
    else:
        file = 'test.html'
    if (file == '-'):
        f = sys.stdin
    else:
        try:
            f = open(file, 'r')
        except IOError as msg:
            print file, ':', msg
            sys.exit(1)
    data = f.read()
    if (f is not sys.stdin):
        f.close()
    x = klass()
    for c in data:
        x.feed(c)
    x.close()
