def find_library_file(self, dirs, lib, debug=0):
    shortlib = ('%s.lib' % lib)
    longlib = ('lib%s.lib' % lib)
    try:
        emx_dirs = os.environ['LIBRARY_PATH'].split(';')
    except KeyError:
        emx_dirs = []
    for dir in (dirs + emx_dirs):
        shortlibp = os.path.join(dir, shortlib)
        longlibp = os.path.join(dir, longlib)
        if os.path.exists(shortlibp):
            return shortlibp
        elif os.path.exists(longlibp):
            return longlibp
    return None
