{
  if (network != null) {
    throw new IllegalStateException("network already started");
  }
  try {
    network=new Network(new AbstractConfigurator(HOME,Profile.get(getClass().getResource(PROFILE_RESOURCE).toURI())){
      public PlatformConfig createPlatformConfig(      Configurator c) throws ConfiguratorException {
        c.setName(CONFIG_NAME);
        c.setSecurity(CONFIG_USER,CONFIG_PASSWORD);
        return c.getPlatformConfig();
      }
    }
,listener != null ? listener : createNetworkListener());
    network.start();
  }
 catch (  URISyntaxException use) {
    throw new NetworkException("invalid uri: " + getClass().getResource(PROFILE_RESOURCE),use);
  }
}
