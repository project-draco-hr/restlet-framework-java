def test_errors(self):
    h = urllib2.HTTPErrorProcessor()
    o = h.parent = MockOpener()
    url = 'http://example.com/'
    req = Request(url)
    r = MockResponse(200, 'OK', {}, '', url)
    newr = h.http_response(req, r)
    self.assert_((r is newr))
    self.assert_((not hasattr(o, 'proto')))
    r = MockResponse(201, 'Created', {}, '', url)
    self.assert_((h.http_response(req, r) is None))
    self.assertEqual(o.proto, 'http')
    self.assertEqual(o.args, (req, r, 201, 'Created', {}))
