def test_build_opener(self):


    class MyHTTPHandler(urllib2.HTTPHandler):
        pass


    class FooHandler(urllib2.BaseHandler):

        def foo_open(self):
            pass


    class BarHandler(urllib2.BaseHandler):

        def bar_open(self):
            pass
    build_opener = urllib2.build_opener
    o = build_opener(FooHandler, BarHandler)
    self.opener_has_handler(o, FooHandler)
    self.opener_has_handler(o, BarHandler)
    o = build_opener(FooHandler, BarHandler())
    self.opener_has_handler(o, FooHandler)
    self.opener_has_handler(o, BarHandler)
    o = build_opener(MyHTTPHandler)
    self.opener_has_handler(o, MyHTTPHandler)
    o = build_opener()
    self.opener_has_handler(o, urllib2.HTTPHandler)
    o = build_opener(urllib2.HTTPHandler)
    self.opener_has_handler(o, urllib2.HTTPHandler)
    o = build_opener(urllib2.HTTPHandler())
    self.opener_has_handler(o, urllib2.HTTPHandler)


    class MyOtherHTTPHandler(urllib2.HTTPHandler):
        pass
    o = build_opener(MyHTTPHandler, MyOtherHTTPHandler)
    self.opener_has_handler(o, MyHTTPHandler)
    self.opener_has_handler(o, MyOtherHTTPHandler)
