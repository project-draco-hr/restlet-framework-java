def test_processors(self):
    o = OpenerDirector()
    meth_spec = [[('http_request', 'return request'), ('http_response', 'return response')], [('http_request', 'return request'), ('http_response', 'return response')]]
    handlers = add_ordered_mock_handlers(o, meth_spec)
    req = Request('http://example.com/')
    r = o.open(req)
    calls = [(handlers[0], 'http_request'), (handlers[1], 'http_request'), (handlers[0], 'http_response'), (handlers[1], 'http_response')]
    for (i, (handler, name, args, kwds)) in enumerate(o.calls):
        if (i < 2):
            self.assertEqual((handler, name), calls[i])
            self.assertEqual(len(args), 1)
            self.assert_(isinstance(args[0], Request))
        else:
            self.assertEqual((handler, name), calls[i])
            self.assertEqual(len(args), 2)
            self.assert_(isinstance(args[0], Request))
            self.assert_(((args[1] is None) or isinstance(args[1], MockResponse)))
