def test_handler_order(self):
    o = OpenerDirector()
    handlers = []
    for (meths, handler_order) in [([('http_open', 'return self')], 500), (['http_open'], 0)]:


        class MockHandlerSubclass(MockHandler):
            pass
        h = MockHandlerSubclass(meths)
        h.handler_order = handler_order
        handlers.append(h)
        o.add_handler(h)
    r = o.open('http://example.com/')
    self.assertEqual(o.calls[0][0], handlers[1])
    self.assertEqual(o.calls[1][0], handlers[0])
