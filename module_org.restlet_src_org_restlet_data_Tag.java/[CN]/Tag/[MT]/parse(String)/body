{
  Tag result=null;
  boolean weak=false;
  String httpTagCopy=httpTag;
  if (httpTagCopy.startsWith("W")) {
    weak=true;
    httpTagCopy=httpTagCopy.substring(1);
  }
  if (httpTagCopy.startsWith("\"") && httpTagCopy.endsWith("\"")) {
    result=new Tag(httpTagCopy.substring(1,httpTagCopy.length() - 1),weak);
  }
 else   if (httpTagCopy.equals("*")) {
    result=new Tag("*",weak);
  }
 else {
    throw new IllegalArgumentException("Invalid tag format detected: " + httpTagCopy);
  }
  return result;
}
