{
  Tag result=new Tag();
  String httpTagCopy=httpTag;
  if (httpTagCopy.startsWith("W")) {
    result.weak=true;
    httpTagCopy=httpTagCopy.substring(1);
  }
 else {
    result.weak=false;
  }
  if (httpTagCopy.startsWith("\"") && httpTagCopy.endsWith("\"")) {
    result.opaqueTag=httpTagCopy.substring(1,httpTagCopy.length() - 1);
  }
 else   if (httpTagCopy.equals("*")) {
    result.opaqueTag="*";
  }
 else {
    throw new IllegalArgumentException("Invalid tag format detected: " + httpTagCopy);
  }
  return result;
}
