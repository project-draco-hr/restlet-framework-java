def __init__(self, uri, transport=None, encoding=None, verbose=0, allow_none=0, use_datetime=0):
    import urllib
    (type, uri) = urllib.splittype(uri)
    if (type not in ('http', 'https')):
        raise IOError, 'unsupported XML-RPC protocol'
    (self.__host, self.__handler) = urllib.splithost(uri)
    if (not self.__handler):
        self.__handler = '/RPC2'
    if (transport is None):
        if (type == 'https'):
            transport = SafeTransport(use_datetime=use_datetime)
        else:
            transport = Transport(use_datetime=use_datetime)
    self.__transport = transport
    self.__encoding = encoding
    self.__verbose = verbose
    self.__allow_none = allow_none
