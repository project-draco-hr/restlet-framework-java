def save_long(self, obj, pack=struct.pack):
    if (self.proto >= 2):
        bytes = encode_long(obj)
        n = len(bytes)
        if (n < 256):
            self.write(((LONG1 + chr(n)) + bytes))
        else:
            self.write(((LONG4 + pack('<i', n)) + bytes))
        return
    self.write(((LONG + repr(obj)) + '\n'))
