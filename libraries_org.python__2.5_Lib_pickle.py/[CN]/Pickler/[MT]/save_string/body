def save_string(self, obj, pack=struct.pack):
    if self.bin:
        n = len(obj)
        if (n < 256):
            self.write(((SHORT_BINSTRING + chr(n)) + obj))
        else:
            self.write(((BINSTRING + pack('<i', n)) + obj))
    else:
        self.write(((STRING + repr(obj)) + '\n'))
    self.memoize(obj)
