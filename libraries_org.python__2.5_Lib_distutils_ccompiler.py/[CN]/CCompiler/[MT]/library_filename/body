def library_filename(self, libname, lib_type='static', strip_dir=0, output_dir=''):
    assert (output_dir is not None)
    if (lib_type not in ('static', 'shared', 'dylib')):
        raise ValueError, '\'lib_type\' must be "static", "shared" or "dylib"'
    fmt = getattr(self, (lib_type + '_lib_format'))
    ext = getattr(self, (lib_type + '_lib_extension'))
    (dir, base) = os.path.split(libname)
    filename = (fmt % (base, ext))
    if strip_dir:
        dir = ''
    return os.path.join(output_dir, dir, filename)
