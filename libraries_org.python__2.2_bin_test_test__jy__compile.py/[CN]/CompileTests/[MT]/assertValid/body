def assertValid(self, str, symbol='single', values=None, value=None):
    'succeed iff str is a valid piece of code'
    code = compile_(str, '<input>', symbol)
    if values:
        d = {}
        exec code in d
        self.assertEquals(d, values)
    elif (value is not None):
        self.assertEquals(eval(code, self.eval_d), value)
    else:
        self.assert_(code)
