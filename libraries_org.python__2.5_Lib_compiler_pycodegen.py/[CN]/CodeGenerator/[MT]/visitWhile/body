def visitWhile(self, node):
    self.set_lineno(node)
    loop = self.newBlock()
    else_ = self.newBlock()
    after = self.newBlock()
    self.emit('SETUP_LOOP', after)
    self.nextBlock(loop)
    self.setups.push((LOOP, loop))
    self.set_lineno(node, force=True)
    self.visit(node.test)
    self.emit('JUMP_IF_FALSE', (else_ or after))
    self.nextBlock()
    self.emit('POP_TOP')
    self.visit(node.body)
    self.emit('JUMP_ABSOLUTE', loop)
    self.startBlock(else_)
    self.emit('POP_TOP')
    self.emit('POP_BLOCK')
    self.setups.pop()
    if node.else_:
        self.visit(node.else_)
    self.nextBlock(after)
