def set_lineno(self, node, force=False):
    'Emit SET_LINENO if necessary.\n\n        The instruction is considered necessary if the node has a\n        lineno attribute and it is different than the last lineno\n        emitted.\n\n        Returns true if SET_LINENO was emitted.\n\n        There are no rules for when an AST node should have a lineno\n        attribute.  The transformer and AST code need to be reviewed\n        and a consistent policy implemented and documented.  Until\n        then, this method works around missing line numbers.\n        '
    lineno = getattr(node, 'lineno', None)
    if ((lineno is not None) and ((lineno != self.last_lineno) or force)):
        self.emit('SET_LINENO', lineno)
        self.last_lineno = lineno
        return True
    return False
