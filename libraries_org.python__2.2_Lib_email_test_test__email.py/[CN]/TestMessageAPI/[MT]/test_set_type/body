def test_set_type(self):
    eq = self.assertEqual
    msg = Message()
    self.assertRaises(ValueError, msg.set_type, 'text')
    msg.set_type('text/plain')
    eq(msg['content-type'], 'text/plain')
    msg.set_param('charset', 'us-ascii')
    eq(msg['content-type'], 'text/plain; charset="us-ascii"')
    msg.set_type('text/html')
    eq(msg['content-type'], 'text/html; charset="us-ascii"')
