def test_typed_subpart_iterator(self):
    eq = self.assertEqual
    msg = self._msgobj('msg_04.txt')
    it = Iterators.typed_subpart_iterator(msg, 'text')
    lines = []
    subparts = 0
    for subpart in it:
        subparts += 1
        lines.append(subpart.get_payload())
    eq(subparts, 2)
    eq(EMPTYSTRING.join(lines), 'a simple kind of mirror\nto reflect upon our own\na simple kind of mirror\nto reflect upon our own\n')
