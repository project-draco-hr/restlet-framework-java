def test_ioctl(self):
    ids = (os.getpgrp(), os.getsid(0))
    tty = open('/dev/tty', 'r')
    r = fcntl.ioctl(tty, termios.TIOCGPGRP, '    ')
    rpgrp = struct.unpack('i', r)[0]
    self.assert_((rpgrp in ids), ('%s not in %s' % (rpgrp, ids)))
