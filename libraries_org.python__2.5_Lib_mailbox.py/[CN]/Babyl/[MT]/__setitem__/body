def __setitem__(self, key, message):
    "Replace the keyed message; raise KeyError if it doesn't exist."
    _singlefileMailbox.__setitem__(self, key, message)
    if isinstance(message, BabylMessage):
        self._labels[key] = message.get_labels()
