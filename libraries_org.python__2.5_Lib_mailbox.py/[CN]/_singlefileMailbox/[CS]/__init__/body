def __init__(self, path, factory=None, create=True):
    'Initialize a single-file mailbox.'
    Mailbox.__init__(self, path, factory, create)
    try:
        f = open(self._path, 'rb+')
    except IOError as e:
        if (e.errno == errno.ENOENT):
            if create:
                f = open(self._path, 'wb+')
            else:
                raise NoSuchMailboxError(self._path)
        elif (e.errno == errno.EACCES):
            f = open(self._path, 'rb')
        else:
            raise
    self._file = f
    self._toc = None
    self._next_key = 0
    self._pending = False
    self._locked = False
