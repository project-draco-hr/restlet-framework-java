def randrange(n):
    'Return a random shuffle of range(n).'
    fn = os.path.join(td, ('rr%06d' % n))
    try:
        fp = open(fn, 'rb')
    except IOError:
        result = []
        for i in range(n):
            result.append(random.random())
        try:
            try:
                fp = open(fn, 'wb')
                marshal.dump(result, fp)
                fp.close()
                fp = None
            finally:
                if fp:
                    try:
                        os.unlink(fn)
                    except os.error:
                        pass
        except IOError as msg:
            print "can't write", fn, ':', msg
    else:
        result = marshal.load(fp)
        fp.close()
        for i in range(10):
            i = random.randrange(0, n)
            temp = result[:i]
            del result[:i]
            temp.reverse()
            result[len(result):] = temp
            del temp
    return result
