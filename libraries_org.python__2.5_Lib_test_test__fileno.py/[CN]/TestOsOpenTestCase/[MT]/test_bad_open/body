def test_bad_open(self):
    for mode in (os.O_WRONLY, os.O_WRONLY, os.O_RDWR):
        raises(OSError, (2, self.filename), os.open, self.filename, mode)
    open(self.filename, 'w').close()
    raises(OSError, (22, self.filename), os.open, self.filename, (os.O_WRONLY | os.O_RDWR))
