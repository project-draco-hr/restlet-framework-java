def test_open_sync(self):
    if (not hasattr(os, 'O_SYNC')):
        return
    self.fd = os.open(self.filename, ((os.O_SYNC | os.O_WRONLY) | os.O_CREAT))
    self.assert_(os.path.exists(self.filename))
    os.write(self.fd, 'jython')
    raises(OSError, 9, os.read, self.fd, 99)
    os.close(self.fd)
    os.remove(self.filename)
    self.fd = os.open(self.filename, ((os.O_SYNC | os.O_RDWR) | os.O_CREAT))
    self.assert_(os.path.exists(self.filename))
    os.write(self.fd, 'jython')
    os.lseek(self.fd, 0, 0)
    self.assertEquals(os.read(self.fd, len('jython')), 'jython')
    os.close(self.fd)
