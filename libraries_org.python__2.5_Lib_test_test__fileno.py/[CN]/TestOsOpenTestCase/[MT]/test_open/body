def test_open(self):
    self.fd = os.open(self.filename, (os.O_WRONLY | os.O_CREAT))
    self.assert_(os.path.exists(self.filename))
    os.write(self.fd, 'jython')
    os.close(self.fd)
    self.fd = os.open(self.filename, (os.O_WRONLY | os.O_APPEND))
    os.write(self.fd, ' filenos')
    os.close(self.fd)
    fp = open(self.filename)
    self.assertEquals(fp.read(), 'jython filenos')
    fp.close()
    self.fd = os.open(self.filename, os.O_APPEND)
    raises(OSError, 9, os.write, self.fd, 'new')
    os.lseek(self.fd, 0, 0)
    self.assertEquals(os.read(self.fd, len('jython filenos')), 'jython filenos')
    os.close(self.fd)
    self.fd = os.open(self.filename, os.O_CREAT)
    raises(OSError, 9, os.write, self.fd, 'new')
    self.assertEquals(os.read(self.fd, len('jython filenos')), 'jython filenos')
    os.close(self.fd)
    self.fd = os.open(self.filename, (os.O_RDONLY | os.O_RDWR))
    os.write(self.fd, 'test')
    os.lseek(self.fd, 0, 0)
    self.assertEquals(os.read(self.fd, 4), 'test')
    os.close(self.fd)
