{
  if (server == null) {
    throw new IllegalStateException("server not started");
  }
  server.disconnect();
  server.close();
  executor.shutdown();
  while (!executor.isTerminated()) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException ie) {
    }
  }
  server=null;
}
