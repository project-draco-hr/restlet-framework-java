{
  if (socket == null) {
    throw new IllegalStateException("socket is not started");
  }
  DatagramPacket datagram=new DatagramPacket(data,data.length);
  if (to != null) {
    datagram.setAddress(to);
  }
  socket.send(datagram);
}
