{
  setMessageState(MessageState.START_LINE);
  while (getBuffer().hasRemaining()) {
    if (getMessageState() == MessageState.START_LINE) {
      writeMessageStart();
    }
 else     if (getMessageState() == MessageState.HEADERS) {
      writeMessageHead();
    }
  }
}
