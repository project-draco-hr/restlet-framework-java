{
  super.registerInterest(selector);
  SelectableChannel entitySelectableChannel=getEntitySelectableChannel();
  if (entitySelectableChannel != null) {
    int entityInterestOps=getEntityInterestOps();
    if ((getEntityKey() == null) && (entityInterestOps > 0)) {
      try {
        setEntityKey(entitySelectableChannel.register(selector,entityInterestOps,this));
      }
 catch (      ClosedChannelException cce) {
        getLogger().log(Level.WARNING,"Unable to register NIO interest operations for this entity",cce);
        getConnection().setState(ConnectionState.CLOSING);
      }
    }
 else {
      if (entityInterestOps == 0) {
        getEntityKey().cancel();
      }
 else {
        getEntityKey().interestOps(entityInterestOps);
      }
    }
  }
}
