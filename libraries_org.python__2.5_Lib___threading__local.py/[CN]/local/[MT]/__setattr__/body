def __setattr__(self, name, value):
    lock = object.__getattribute__(self, '_local__lock')
    lock.acquire()
    try:
        _patch(self)
        return object.__setattr__(self, name, value)
    finally:
        lock.release()
