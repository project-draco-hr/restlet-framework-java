def truncate(self, size=None):
    "Truncate the file's size.\n\n        If the optional size argument is present, the file is truncated to\n        (at most) that size. The size defaults to the current position.\n        The current file position is not changed unless the position\n        is beyond the new file size.\n\n        If the specified size exceeds the file's current size, the\n        file remains unchanged.\n        "
    _complain_ifclosed(self.closed)
    if (size is None):
        size = self.pos
    elif (size < 0):
        raise IOError(EINVAL, 'Negative size not allowed')
    elif (size < self.pos):
        self.pos = size
    self.buf = self.getvalue()[:size]
    self.len = size
