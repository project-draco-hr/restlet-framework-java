def readline(self, length=None):
    "Read one entire line from the file.\n\n        A trailing newline character is kept in the string (but may be absent\n        when a file ends with an incomplete line). If the size argument is\n        present and non-negative, it is a maximum byte count (including the\n        trailing newline) and an incomplete line may be returned.\n\n        An empty string is returned only when EOF is encountered immediately.\n\n        Note: Unlike stdio's fgets(), the returned string contains null\n        characters ('\\0') if they occurred in the input.\n        "
    _complain_ifclosed(self.closed)
    if self.buflist:
        self.buf += ''.join(self.buflist)
        self.buflist = []
    i = self.buf.find('\n', self.pos)
    if (i < 0):
        newpos = self.len
    else:
        newpos = (i + 1)
    if (length is not None):
        if ((self.pos + length) < newpos):
            newpos = (self.pos + length)
    r = self.buf[self.pos:newpos]
    self.pos = newpos
    return r
