def read(self, n=(-1)):
    'Read at most size bytes from the file\n        (less if the read hits EOF before obtaining size bytes).\n\n        If the size argument is negative or omitted, read all data until EOF\n        is reached. The bytes are returned as a string object. An empty\n        string is returned when EOF is encountered immediately.\n        '
    _complain_ifclosed(self.closed)
    if self.buflist:
        self.buf += ''.join(self.buflist)
        self.buflist = []
    if (n < 0):
        newpos = self.len
    else:
        newpos = min((self.pos + n), self.len)
    r = self.buf[self.pos:newpos]
    self.pos = newpos
    return r
