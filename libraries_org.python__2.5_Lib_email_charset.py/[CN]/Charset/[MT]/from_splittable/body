def from_splittable(self, ustr, to_output=True):
    "Convert a splittable string back into an encoded string.\n\n        Uses the proper codec to try and convert the string from Unicode back\n        into an encoded format.  Return the string as-is if it is not Unicode,\n        or if it could not be converted from Unicode.\n\n        Characters that could not be converted from Unicode will be replaced\n        with an appropriate character (usually '?').\n\n        If to_output is True (the default), uses output_codec to convert to an\n        encoded format.  If to_output is False, uses input_codec.\n        "
    if to_output:
        codec = self.output_codec
    else:
        codec = self.input_codec
    if ((not isinstance(ustr, unicode)) or (codec is None)):
        return ustr
    try:
        return ustr.encode(codec, 'replace')
    except LookupError:
        return ustr
