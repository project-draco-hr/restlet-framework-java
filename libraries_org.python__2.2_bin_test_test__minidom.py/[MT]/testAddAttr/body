def testAddAttr():
    dom = Document()
    child = dom.appendChild(dom.createElement('abc'))
    child.setAttribute('def', 'ghi')
    confirm((child.getAttribute('def') == 'ghi'))
    confirm((child.attributes['def'].value == 'ghi'))
    child.setAttribute('jkl', 'mno')
    confirm((child.getAttribute('jkl') == 'mno'))
    confirm((child.attributes['jkl'].value == 'mno'))
    confirm((len(child.attributes) == 2))
    child.setAttribute('def', 'newval')
    confirm((child.getAttribute('def') == 'newval'))
    confirm((child.attributes['def'].value == 'newval'))
    confirm((len(child.attributes) == 2))
    dom.unlink()
