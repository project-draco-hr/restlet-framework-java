def close(self):
    if self.closed:
        return
    self.socket.file_count -= 1
    istream = self.istream
    ostream = self.ostream
    self.istream = None
    self.ostream = None
    self.closed = 1
    if ((self.socket.file_count == 0) and (self.socket.sock_impl is None)):
        istream.close()
        ostream.close()
