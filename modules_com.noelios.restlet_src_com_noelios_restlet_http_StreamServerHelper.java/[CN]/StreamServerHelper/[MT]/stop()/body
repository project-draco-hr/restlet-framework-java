{
  super.stop();
  getLogger().info("Stopping the internal HTTP server");
  if (this.handlerService != null) {
    this.handlerService.shutdown();
    try {
      this.handlerService.awaitTermination(Long.MAX_VALUE,TimeUnit.SECONDS);
    }
 catch (    final InterruptedException ex) {
      ex.printStackTrace();
    }
  }
  if (this.listenerService != null) {
    this.listenerService.shutdownNow();
    try {
      this.listenerService.awaitTermination(Long.MAX_VALUE,TimeUnit.SECONDS);
    }
 catch (    final Exception ex) {
      ex.printStackTrace();
    }
  }
  if (this.serverSocketChannel != null) {
    this.serverSocketChannel.close();
  }
}
