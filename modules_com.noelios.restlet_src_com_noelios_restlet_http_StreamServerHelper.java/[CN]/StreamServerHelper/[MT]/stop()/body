{
  super.stop();
  getLogger().info("Stopping the internal HTTP server");
  if (handlerService != null) {
    handlerService.shutdown();
    try {
      handlerService.awaitTermination(Long.MAX_VALUE,TimeUnit.SECONDS);
    }
 catch (    InterruptedException ex) {
      ex.printStackTrace();
    }
  }
  if (listenerService != null) {
    listenerService.shutdownNow();
    try {
      listenerService.awaitTermination(Long.MAX_VALUE,TimeUnit.SECONDS);
    }
 catch (    Exception ex) {
      ex.printStackTrace();
    }
  }
  if (serverSocketChannel != null) {
    serverSocketChannel.close();
  }
}
