{
  super.start();
  getLogger().info("Starting the internal HTTP server");
  ThreadFactory factory=new LoggingThreadFactory(getLogger());
  handlerService=Executors.newFixedThreadPool(10,factory);
  listenerService=Executors.newSingleThreadExecutor(factory);
  serverSocketChannel=createServerSocket();
  setEphemeralPort(serverSocketChannel.socket());
  latch=new CountDownLatch(1);
  listenerService.submit(new Listener(this,serverSocketChannel,latch,handlerService));
  try {
    latch.await();
  }
 catch (  InterruptedException ex) {
    getLogger().log(Level.WARNING,"Interrupted while waiting for starting latch. Stopping...",ex);
    stop();
  }
}
