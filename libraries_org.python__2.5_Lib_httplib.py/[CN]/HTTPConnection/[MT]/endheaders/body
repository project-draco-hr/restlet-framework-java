def endheaders(self):
    'Indicate that the last header line has been sent to the server.'
    if (self.__state == _CS_REQ_STARTED):
        self.__state = _CS_REQ_SENT
    else:
        raise CannotSendHeader()
    self._send_output()
