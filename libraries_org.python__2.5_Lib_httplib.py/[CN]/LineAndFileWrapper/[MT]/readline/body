def readline(self):
    if self._line_consumed:
        return self._file.readline()
    assert self._line_left
    s = self._line[self._line_offset:]
    self._done()
    return s
